/**
 * Copyright 2024 Techbrood Technology Co., Ltd.
 */
import*as e from"three";import{TrianglesDrawMode as t,TriangleFanDrawMode as n,TriangleStripDrawMode as i,LoaderUtils as r,FileLoader as o,Loader as a,MeshBasicMaterial as s,Color as l,LinearSRGBColorSpace as u,SRGBColorSpace as h,Quaternion as c,Matrix4 as f,BufferAttribute as d,InterleavedBuffer as m,InterleavedBufferAttribute as p,LinearFilter as v,LinearMipmapLinearFilter as g,RepeatWrapping as y,PointsMaterial as b,Material as S,LineBasicMaterial as k,MeshStandardMaterial as x,DoubleSide as w,Vector2 as R,PropertyBinding as A,BufferGeometry as L,SkinnedMesh as B,Mesh as T,LineSegments as E,Line as C,LineLoop as M,Points as P,Group as O,PerspectiveCamera as _,MathUtils as I,OrthographicCamera as D,Skeleton as N,AnimationClip as z,Bone as H,Object3D as U,InterpolateLinear as F,ColorManagement as j,SpotLight as W,PointLight as G,DirectionalLight as V,MeshPhysicalMaterial as X,Vector3 as Y,InstancedMesh as K,InstancedBufferAttribute as q,NearestFilter as Q,NearestMipmapNearestFilter as Z,LinearMipmapNearestFilter as J,NearestMipmapLinearFilter as $,ClampToEdgeWrapping as ee,MirroredRepeatWrapping as te,InterpolateDiscrete as ne,FrontSide as ie,TextureLoader as re,ImageBitmapLoader as oe,Texture as ae,VectorKeyframeTrack as se,NumberKeyframeTrack as le,QuaternionKeyframeTrack as ue,Box3 as he,Sphere as ce,Interpolant as fe,DataTextureLoader as de,HalfFloatType as me,FloatType as pe,RGBAFormat as ve,RedFormat as ge,NoColorSpace as ye,DataUtils as be,Matrix3 as Se,Float32BufferAttribute as ke,ShaderMaterial as xe,UniformsUtils as we,WebGLRenderTarget as Re,NoBlending as Ae,Clock as Le,AdditiveBlending as Be,SRGBTransfer as Te,LinearToneMapping as Ee,ReinhardToneMapping as Ce,CineonToneMapping as Me,ACESFilmicToneMapping as Pe,AgXToneMapping as Oe,NeutralToneMapping as _e,RawShaderMaterial as Ie,Euler as De,Plane as Ne,Triangle as ze,Line3 as He,Layers as Ue,Vector4 as Fe}from"three";import{io as je}from"socket.io-client";function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Ge(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function Ve(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Ge(o,i,r,a,s,"next",e)}function s(e){Ge(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Xe(e,t,n){return t=et(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nt()?Reflect.construct(t,n||[],et(e).constructor):t.apply(e,n))}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t,n){if(nt())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&rt(r,n.prototype),r}function qe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,st(i.key),i)}}function Qe(e,t,n){return t&&qe(e.prototype,t),n&&qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ze(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ut(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Je(e,t,n){return(t=st(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(){return $e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=et(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},$e.apply(null,arguments)}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nt=function(){return!!e})()}function it(){it=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function h(e,t,n,i){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new C(i||[]);return r(a,"_invoke",{value:L(e,n,s)}),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f="suspendedStart",d="suspendedYield",m="executing",p="completed",v={};function g(){}function y(){}function b(){}var S={};u(S,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==n&&i.call(x,a)&&(S=x);var w=b.prototype=g.prototype=Object.create(S);function R(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(r,o,a,s){var l=c(e[r],e,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==typeof h&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return o=o?o.then(r,r):r()}})}function L(t,n,i){var r=f;return function(o,a){if(r===m)throw Error("Generator is already running");if(r===p){if("throw"===o)throw a;return{value:e,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var l=B(s,i);if(l){if(l===v)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===f)throw r=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=m;var u=c(t,n,i);if("normal"===u.type){if(r=i.done?p:d,u.arg===v)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r=p,i.method="throw",i.arg=u.arg)}}}function B(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,B(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),v;var o=c(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,r(w,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},R(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new A(h(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},R(w),u(w,l,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=M,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:M(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),v}},t}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rt(e,t)}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(e,t)||ut(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ut(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ut(e,t){if(e){if("string"==typeof e)return We(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}var ht={sceneData:{},container:null,stage:null,space:null,player:null,input:null};function ct(e,r){if(r===t)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(r===n||r===i){var o=e.getIndex();if(null===o){var a=[],s=e.getAttribute("position");if(void 0===s)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var l=0;l<s.count;l++)a.push(l);e.setIndex(a),o=e.getIndex()}var u=o.count-2,h=[];if(r===n)for(var c=1;c<=u;c++)h.push(o.getX(0)),h.push(o.getX(c)),h.push(o.getX(c+1));else for(var f=0;f<u;f++)f%2==0?(h.push(o.getX(f)),h.push(o.getX(f+1)),h.push(o.getX(f+2))):(h.push(o.getX(f+2)),h.push(o.getX(f+1)),h.push(o.getX(f)));h.length/3!==u&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var d=e.clone();return d.setIndex(h),d.clearGroups(),d}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",r),e}var ft=function(e){function t(e){var n;return Ye(this,t),(n=Xe(this,t,[e])).dracoLoader=null,n.ktx2Loader=null,n.meshoptDecoder=null,n.pluginCallbacks=[],n.register((function(e){return new yt(e)})),n.register((function(e){return new bt(e)})),n.register((function(e){return new Tt(e)})),n.register((function(e){return new Et(e)})),n.register((function(e){return new Ct(e)})),n.register((function(e){return new kt(e)})),n.register((function(e){return new xt(e)})),n.register((function(e){return new wt(e)})),n.register((function(e){return new Rt(e)})),n.register((function(e){return new gt(e)})),n.register((function(e){return new At(e)})),n.register((function(e){return new St(e)})),n.register((function(e){return new Bt(e)})),n.register((function(e){return new Lt(e)})),n.register((function(e){return new pt(e)})),n.register((function(e){return new Mt(e)})),n.register((function(e){return new Pt(e)})),n}return tt(t,a),Qe(t,[{key:"load",value:function(e,t,n,i){var a,s=this;if(""!==this.resourcePath)a=this.resourcePath;else if(""!==this.path){var l=r.extractUrlBase(e);a=r.resolveURL(l,this.path)}else a=r.extractUrlBase(e);this.manager.itemStart(e);var u=function(t){i?i(t):console.error(t),s.manager.itemError(e),s.manager.itemEnd(e)},h=new o(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,(function(n){try{s.parse(n,a,(function(n){t(n),s.manager.itemEnd(e)}),u)}catch(e){u(e)}}),n,u)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,i){var r,o={},a={},s=new TextDecoder;if("string"==typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(s.decode(new Uint8Array(e,0,4))===Ot){try{o[mt.KHR_BINARY_GLTF]=new Dt(e)}catch(e){return void(i&&i(e))}r=JSON.parse(o[mt.KHR_BINARY_GLTF].content)}else r=JSON.parse(s.decode(e))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var l=new ln(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(var u=0;u<this.pluginCallbacks.length;u++){var h=this.pluginCallbacks[u](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(r.extensionsUsed)for(var c=0;c<r.extensionsUsed.length;++c){var f=r.extensionsUsed[c],d=r.extensionsRequired||[];switch(f){case mt.KHR_MATERIALS_UNLIT:o[f]=new vt;break;case mt.KHR_DRACO_MESH_COMPRESSION:o[f]=new Nt(r,this.dracoLoader);break;case mt.KHR_TEXTURE_TRANSFORM:o[f]=new zt;break;case mt.KHR_MESH_QUANTIZATION:o[f]=new Ht;break;default:d.indexOf(f)>=0&&void 0===a[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,i)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(i,r){n.parse(e,t,i,r)}))}}])}();function dt(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var mt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},pt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}),[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,i=t.length;n<i;n++){var r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,i=t.cache.get(n);if(i)return i;var r,o=t.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],s=new l(16777215);void 0!==a.color&&s.setRGB(a.color[0],a.color[1],a.color[2],u);var h=void 0!==a.range?a.range:0;switch(a.type){case"directional":(r=new V(s)).target.position.set(0,0,-1),r.add(r.target);break;case"point":(r=new G(s)).distance=h;break;case"spot":(r=new W(s)).distance=h,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,r.angle=a.spot.outerConeAngle,r.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,r.target.position.set(0,0,-1),r.add(r.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return r.position.set(0,0,0),r.decay=2,tn(r,a),void 0!==a.intensity&&(r.intensity=a.intensity),r.name=t.createUniqueName(a.name||"light_"+e),i=Promise.resolve(r),t.cache.add(n,i),i}},{key:"getDependency",value:function(e,t){if("light"===e)return this._loadLight(t)}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return n._getNodeRef(t.cache,r,e)}))}}])}(),vt=function(){return Qe((function e(){Ye(this,e),this.name=mt.KHR_MATERIALS_UNLIT}),[{key:"getMaterialType",value:function(){return s}},{key:"extendParams",value:function(e,t,n){var i=[];e.color=new l(1,1,1),e.opacity=1;var r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],u),e.opacity=o[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,h))}return Promise.all(i)}}])}(),gt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_MATERIALS_EMISSIVE_STRENGTH}),[{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}])}(),yt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_MATERIALS_CLEARCOAT}),[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?X:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],o=i.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){var a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new R(a,a)}return Promise.all(r)}}])}(),bt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_MATERIALS_DISPERSION}),[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?X:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=n.extensions[this.name];return t.dispersion=void 0!==i.dispersion?i.dispersion:0,Promise.resolve()}}])}(),St=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_MATERIALS_IRIDESCENCE}),[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?X:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],o=i.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}])}(),kt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_MATERIALS_SHEEN}),[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?X:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[];t.sheenColor=new l(0,0,0),t.sheenRoughness=0,t.sheen=1;var o=i.extensions[this.name];if(void 0!==o.sheenColorFactor){var a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],u)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,h)),void 0!==o.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}])}(),xt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_MATERIALS_TRANSMISSION}),[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?X:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],o=i.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}])}(),wt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_MATERIALS_VOLUME}),[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?X:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],o=i.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;var a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new l).setRGB(a[0],a[1],a[2],u),Promise.all(r)}}])}(),Rt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_MATERIALS_IOR}),[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?X:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}])}(),At=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_MATERIALS_SPECULAR}),[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?X:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],o=i.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));var a=o.specularColorFactor||[1,1,1];return t.specularColor=(new l).setRGB(a[0],a[1],a[2],u),void 0!==o.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,h)),Promise.all(r)}}])}(),Lt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.EXT_MATERIALS_BUMP}),[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?X:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],o=i.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&r.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}])}(),Bt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_MATERIALS_ANISOTROPY}),[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?X:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var r=[],o=i.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}])}(),Tt=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.KHR_TEXTURE_BASISU}),[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;var r=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}])}(),Et=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.EXT_TEXTURE_WEBP,this.isSupported=null}),[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;var o=r.extensions[t],a=i.images[o.source],s=n.textureLoader;if(a.uri){var l=n.options.manager.getHandler(a.uri);null!==l&&(s=l)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,o.source,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}])}(),Ct=function(){return Qe((function e(t){Ye(this,e),this.parser=t,this.name=mt.EXT_TEXTURE_AVIF,this.isSupported=null}),[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;var o=r.extensions[t],a=i.images[o.source],s=n.textureLoader;if(a.uri){var l=n.options.manager.getHandler(a.uri);null!==l&&(s=l)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,o.source,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}])}(),Mt=function(){return Qe((function e(t){Ye(this,e),this.name=mt.EXT_MESHOPT_COMPRESSION,this.parser=t}),[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var i=n.extensions[this.name],r=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(e){var t=i.byteOffset||0,n=i.byteLength||0,r=i.count,a=i.byteStride,s=new Uint8Array(e,t,n);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(r,a,s,i.mode,i.filter).then((function(e){return e.buffer})):o.ready.then((function(){var e=new ArrayBuffer(r*a);return o.decodeGltfBuffer(new Uint8Array(e),r,a,s,i.mode,i.filter),e}))}))}return null}}])}(),Pt=function(){return Qe((function e(t){Ye(this,e),this.name=mt.EXT_MESH_GPU_INSTANCING,this.parser=t}),[{key:"createNodeMesh",value:function(e){var t=this,n=this.parser.json,i=n.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;var r,o=Ze(n.meshes[i.mesh].primitives);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a.mode!==Wt.TRIANGLES&&a.mode!==Wt.TRIANGLE_STRIP&&a.mode!==Wt.TRIANGLE_FAN&&void 0!==a.mode)return null}}catch(e){o.e(e)}finally{o.f()}var s=i.extensions[this.name].attributes,l=[],u={},h=function(e){l.push(t.parser.getDependency("accessor",s[e]).then((function(t){return u[e]=t,u[e]})))};for(var d in s)h(d);return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then((function(e){var n,i=e.pop(),r=i.isGroup?i.children:[i],o=e[0].count,a=[],s=Ze(r);try{for(s.s();!(n=s.n()).done;){for(var l=n.value,h=new f,d=new Y,m=new c,p=new Y(1,1,1),v=new K(l.geometry,l.material,o),g=0;g<o;g++)u.TRANSLATION&&d.fromBufferAttribute(u.TRANSLATION,g),u.ROTATION&&m.fromBufferAttribute(u.ROTATION,g),u.SCALE&&p.fromBufferAttribute(u.SCALE,g),v.setMatrixAt(g,h.compose(d,m,p));for(var y in u)if("_COLOR_0"===y){var b=u[y];v.instanceColor=new q(b.array,b.itemSize,b.normalized)}else"TRANSLATION"!==y&&"ROTATION"!==y&&"SCALE"!==y&&l.geometry.setAttribute(y,u[y]);U.prototype.copy.call(v,l),t.parser.assignFinalMaterial(v),a.push(v)}}catch(e){s.e(e)}finally{s.f()}return i.isGroup?(i.clear(),i.add.apply(i,a),i):a[0]})))}}])}(),Ot="glTF",_t=1313821514,It=5130562,Dt=Qe((function e(t){Ye(this,e),this.name=mt.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Ot)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,o=new DataView(t,12),a=0;a<r;){var s=o.getUint32(a,!0);a+=4;var l=o.getUint32(a,!0);if(a+=4,l===_t){var u=new Uint8Array(t,12+a,s);this.content=i.decode(u)}else if(l===It){var h=12+a;this.body=t.slice(h,h+s)}a+=s}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),Nt=function(){return Qe((function e(t,n){if(Ye(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=mt.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}),[{key:"decodePrimitive",value:function(e,t){var n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(var h in o){var c=Kt[h]||h.toLowerCase();a[c]=o[h]}for(var f in e.attributes){var d=Kt[f]||f.toLowerCase();if(void 0!==o[f]){var m=n.accessors[e.attributes[f]],p=Gt[m.componentType];l[d]=p.name,s[d]=!0===m.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t,n){i.decodeDracoFile(e,(function(e){for(var n in e.attributes){var i=e.attributes[n],r=s[n];void 0!==r&&(i.normalized=r)}t(e)}),a,l,u,n)}))}))}}])}(),zt=function(){return Qe((function e(){Ye(this,e),this.name=mt.KHR_TEXTURE_TRANSFORM}),[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}])}(),Ht=Qe((function e(){Ye(this,e),this.name=mt.KHR_MESH_QUANTIZATION})),Ut=function(e){function t(e,n,i,r){return Ye(this,t),Xe(this,t,[e,n,i,r])}return tt(t,fe),Qe(t,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i,o=0;o!==i;o++)t[o]=n[r+o];return t}},{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,u=i-t,h=(n-t)/u,c=h*h,f=c*h,d=e*l,m=d-l,p=-2*f+3*c,v=f-c,g=1-p,y=v-c+h,b=0;b!==a;b++){var S=o[m+b+a],k=o[m+b+s]*u,x=o[d+b+a],w=o[d+b]*u;r[b]=g*S+y*k+p*x+v*w}return r}}])}(),Ft=new c,jt=function(e){function t(){return Ye(this,t),Xe(this,t,arguments)}return tt(t,Ut),Qe(t,[{key:"interpolate_",value:function(e,n,i,r){var o=$e(et(t.prototype),"interpolate_",this).call(this,e,n,i,r);return Ft.fromArray(o).normalize().toArray(o),o}}])}(),Wt={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Gt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Vt={9728:Q,9729:v,9984:Z,9985:J,9986:$,9987:g},Xt={33071:ee,33648:te,10497:y},Yt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Kt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},qt={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Qt={CUBICSPLINE:void 0,LINEAR:F,STEP:ne},Zt="OPAQUE",Jt="MASK",$t="BLEND";function en(e,t,n){for(var i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function tn(e,t){void 0!==t.extras&&("object"===lt(t.extras)?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function nn(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(var o=0,a=r.length;o<a;o++)e.morphTargetDictionary[r[o]]=o}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function rn(e){var t,n=e.extensions&&e.extensions[mt.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+on(n.attributes):e.indices+":"+on(e.attributes)+":"+e.mode,void 0!==e.targets)for(var i=0,r=e.targets.length;i<r;i++)t+=":"+on(e.targets[i]);return t}function on(e){for(var t="",n=Object.keys(e).sort(),i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function an(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var sn=new f,ln=function(){return Qe((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ye(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new dt,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var i=!1,r=-1,a=!1,s=-1;if("undefined"!=typeof navigator){var l=navigator.userAgent;i=!0===/^((?!chrome|android).)*safari/i.test(l);var u=l.match(/Version\/(\d+)/);r=i&&u?parseInt(u[1],10):-1,s=(a=l.indexOf("Firefox")>-1)?l.match(/Firefox\/([0-9]+)\./)[1]:-1}"undefined"==typeof createImageBitmap||i&&r<17||a&&s<98?this.textureLoader=new re(this.options.manager):this.textureLoader=new oe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new o(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}),[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var o={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};return en(r,o,i),tn(o,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){var t,n=Ze(o.scenes);try{for(n.s();!(t=n.n()).done;){t.value.updateMatrixWorld()}}catch(e){n.e(e)}finally{n.f()}e(o)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],i=0,r=t.length;i<r;i++)for(var o=t[i].joints,a=0,s=o.length;a<s;a++)e[o[a]].isBone=!0;for(var l=0,u=e.length;l<u;l++){var h=e[l];void 0!==h.mesh&&(this._addNodeRef(this.meshCache,h.mesh),void 0!==h.skin&&(n[h.mesh].isSkinnedMesh=!0)),void 0!==h.camera&&this._addNodeRef(this.cameraCache,h.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var i=this;if(e.refs[t]<=1)return n;var r=n.clone();return function e(t,n){var r=i.associations.get(t);null!=r&&i.associations.set(n,r);var o,a=Ze(t.children.entries());try{for(a.s();!(o=a.n()).done;){var s=ot(o.value,2),l=s[0];e(s[1],n.children[l])}}catch(e){a.e(e)}finally{a.f()}}(n,r),r.name+="_instance_"+e.uses[t]++,r}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var i=e(t[n]);if(i)return i}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],i=0;i<t.length;i++){var r=e(t[i]);r&&n.push(r)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":i=this.loadCamera(t);break;default:if(!(i=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}))))throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[mt.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,o){n.load(r.resolveURL(t.uri,i.path),e,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){var r=Yt[i.type],o=Gt[i.componentType],a=!0===i.normalized,s=new o(i.count*r);return Promise.resolve(new d(s,r,a))}var l=[];return void 0!==i.bufferView?l.push(this.getDependency("bufferView",i.bufferView)):l.push(null),void 0!==i.sparse&&(l.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(l).then((function(e){var r,o,a=e[0],s=Yt[i.type],l=Gt[i.componentType],u=l.BYTES_PER_ELEMENT,h=u*s,c=i.byteOffset||0,f=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,v=!0===i.normalized;if(f&&f!==h){var g=Math.floor(c/f),y="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+g+":"+i.count,b=t.cache.get(y);b||(r=new l(a,g*f,i.count*f/u),b=new m(r,f/u),t.cache.add(y,b)),o=new p(b,s,c%f/u,v)}else r=null===a?new l(i.count*s):new l(a,c,i.count*s),o=new d(r,s,v);if(void 0!==i.sparse){var S=Yt.SCALAR,k=Gt[i.sparse.indices.componentType],x=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,R=new k(e[1],x,i.sparse.count*S),A=new l(e[2],w,i.sparse.count*s);null!==a&&(o=new d(o.array.slice(),o.itemSize,o.normalized));for(var L=0,B=R.length;L<B;L++){var T=R[L];if(o.setX(T,A[L*s]),s>=2&&o.setY(T,A[L*s+1]),s>=3&&o.setZ(T,A[L*s+2]),s>=4&&o.setW(T,A[L*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i],o=this.textureLoader;if(r.uri){var a=n.manager.getHandler(r.uri);null!==a&&(o=a)}return this.loadTextureImage(e,i,o)}},{key:"loadTextureImage",value:function(e,t,n){var i=this,r=this.json,o=r.textures[e],a=r.images[t],s=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];var l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=o.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);var n=(r.samplers||{})[o.sampler]||{};return t.magFilter=Vt[n.magFilter]||v,t.minFilter=Vt[n.minFilter]||g,t.wrapS=Xt[n.wrapS]||y,t.wrapT=Xt[n.wrapT]||y,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}},{key:"loadImageSource",value:function(e,t){var n=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var o=n.images[e],a=self.URL||self.webkitURL,s=o.uri||"",l=!1;if(void 0!==o.bufferView)s=this.getDependency("bufferView",o.bufferView).then((function(e){l=!0;var t=new Blob([e],{type:o.mimeType});return s=a.createObjectURL(t)}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var u=Promise.resolve(s).then((function(e){return new Promise((function(n,o){var a=n;!0===t.isImageBitmapLoader&&(a=function(e){var t=new ae(e);t.needsUpdate=!0,n(t)}),t.load(r.resolveURL(e,i.path),a,void 0,o)}))})).then((function(e){var t;return!0===l&&a.revokeObjectURL(s),tn(e,o),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",s),e}));return this.sourceCache[e]=u,u}},{key:"assignTexture",value:function(e,t,n,i){var r=this;return this.getDependency("texture",n.index).then((function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),r.extensions[mt.KHR_TEXTURE_TRANSFORM]){var a=void 0!==n.extensions?n.extensions[mt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var s=r.associations.get(o);o=r.extensions[mt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,s)}}return void 0!==i&&(o.colorSpace=i),e[t]=o,o}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){var a="PointsMaterial:"+n.uuid,s=this.cache.get(a);s||(s=new b,S.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(a,s)),n=s}else if(e.isLine){var l="LineBasicMaterial:"+n.uuid,u=this.cache.get(l);u||(u=new k,S.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(i||r||o){var h="ClonedMaterial:"+n.uuid+":";i&&(h+="derivative-tangents:"),r&&(h+="vertex-colors:"),o&&(h+="flat-shading:");var c=this.cache.get(h);c||(c=n.clone(),r&&(c.vertexColors=!0),o&&(c.flatShading=!0),i&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(h,c),this.associations.set(c,this.associations.get(n))),n=c}e.material=n}},{key:"getMaterialType",value:function(){return x}},{key:"loadMaterial",value:function(e){var t,n=this,i=this.json,r=this.extensions,o=i.materials[e],a={},c=[];if((o.extensions||{})[mt.KHR_MATERIALS_UNLIT]){var f=r[mt.KHR_MATERIALS_UNLIT];t=f.getMaterialType(),c.push(f.extendParams(a,o,n))}else{var d=o.pbrMetallicRoughness||{};if(a.color=new l(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){var m=d.baseColorFactor;a.color.setRGB(m[0],m[1],m[2],u),a.opacity=m[3]}void 0!==d.baseColorTexture&&c.push(n.assignTexture(a,"map",d.baseColorTexture,h)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(n.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(n.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),c.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===o.doubleSided&&(a.side=w);var p=o.alphaMode||Zt;if(p===$t?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,p===Jt&&(a.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==s&&(c.push(n.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new R(1,1),void 0!==o.normalTexture.scale)){var v=o.normalTexture.scale;a.normalScale.set(v,v)}if(void 0!==o.occlusionTexture&&t!==s&&(c.push(n.assignTexture(a,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(a.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==s){var g=o.emissiveFactor;a.emissive=(new l).setRGB(g[0],g[1],g[2],u)}return void 0!==o.emissiveTexture&&t!==s&&c.push(n.assignTexture(a,"emissiveMap",o.emissiveTexture,h)),Promise.all(c).then((function(){var i=new t(a);return o.name&&(i.name=o.name),tn(i,o),n.associations.set(i,{materials:e}),o.extensions&&en(r,i,o),i}))}},{key:"createUniqueName",value:function(e){var t=A.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[mt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return un(n,e,t)}))}for(var o=[],a=0,s=e.length;a<s;a++){var l=e[a],u=rn(l),h=i[u];if(h)o.push(h.promise);else{var c=void 0;c=l.extensions&&l.extensions[mt.KHR_DRACO_MESH_COMPRESSION]?r(l):un(new L,l,t),i[u]={primitive:l,promise:c},o.push(c)}}return Promise.all(o)}},{key:"loadMesh",value:function(e){for(var t,r=this,o=this.json,a=this.extensions,s=o.meshes[e],l=s.primitives,u=[],h=0,c=l.length;h<c;h++){var f=void 0===l[h].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new x({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ie})),t.DefaultMaterial):this.getDependency("material",l[h].material);u.push(f)}return u.push(r.loadGeometries(l)),Promise.all(u).then((function(t){for(var o=t.slice(0,t.length-1),u=t[t.length-1],h=[],c=0,f=u.length;c<f;c++){var d=u[c],m=l[c],p=void 0,v=o[c];if(m.mode===Wt.TRIANGLES||m.mode===Wt.TRIANGLE_STRIP||m.mode===Wt.TRIANGLE_FAN||void 0===m.mode)!0===(p=!0===s.isSkinnedMesh?new B(d,v):new T(d,v)).isSkinnedMesh&&p.normalizeSkinWeights(),m.mode===Wt.TRIANGLE_STRIP?p.geometry=ct(p.geometry,i):m.mode===Wt.TRIANGLE_FAN&&(p.geometry=ct(p.geometry,n));else if(m.mode===Wt.LINES)p=new E(d,v);else if(m.mode===Wt.LINE_STRIP)p=new C(d,v);else if(m.mode===Wt.LINE_LOOP)p=new M(d,v);else{if(m.mode!==Wt.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);p=new P(d,v)}Object.keys(p.geometry.morphAttributes).length>0&&nn(p,s),p.name=r.createUniqueName(s.name||"mesh_"+e),tn(p,s),m.extensions&&en(a,p,m),r.assignFinalMaterial(p),h.push(p)}for(var g=0,y=h.length;g<y;g++)r.associations.set(h[g],{meshes:e,primitives:g});if(1===h.length)return s.extensions&&en(a,h[0],s),h[0];var b=new O;s.extensions&&en(a,b,s),r.associations.set(b,{meshes:e});for(var S=0,k=h.length;S<k;S++)b.add(h[S]);return b}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new _(I.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new D(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),tn(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){for(var t=this.json.skins[e],n=[],i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){for(var n=e.pop(),i=e,r=[],o=[],a=0,s=i.length;a<s;a++){var l=i[a];if(l){r.push(l);var u=new f;null!==n&&u.fromArray(n.array,16*a),o.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}return new N(r,o)}))}},{key:"loadAnimation",value:function(e){for(var t=this.json,n=this,i=t.animations[e],r=i.name?i.name:"animation_"+e,o=[],a=[],s=[],l=[],u=[],h=0,c=i.channels.length;h<c;h++){var f=i.channels[h],d=i.samplers[f.sampler],m=f.target,p=m.node,v=void 0!==i.parameters?i.parameters[d.input]:d.input,g=void 0!==i.parameters?i.parameters[d.output]:d.output;void 0!==m.node&&(o.push(this.getDependency("node",p)),a.push(this.getDependency("accessor",v)),s.push(this.getDependency("accessor",g)),l.push(d),u.push(m))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(s),Promise.all(l),Promise.all(u)]).then((function(e){for(var t=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=[],u=0,h=t.length;u<h;u++){var c=t[u],f=i[u],d=o[u],m=a[u],p=s[u];if(void 0!==c){c.updateMatrix&&c.updateMatrix();var v=n._createAnimationTracks(c,f,d,m,p);if(v)for(var g=0;g<v.length;g++)l.push(v[g])}}return new z(r,void 0,l)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}},{key:"loadNode",value:function(e){for(var t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),r=[],o=n.children||[],a=0,s=o.length;a<s;a++)r.push(t.getDependency("node",o[a]));var l=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),l]).then((function(e){var t=e[0],n=e[1],i=e[2];null!==i&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(i,sn)}));for(var r=0,o=n.length;r<o;r++)t.add(n[r]);return t}))}},{key:"_loadNodeShallow",value:function(e){var t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];var r=t.nodes[e],o=r.name?i.createUniqueName(r.name):"",a=[],s=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&a.push(s),void 0!==r.camera&&a.push(i.getDependency("camera",r.camera).then((function(e){return i._getNodeRef(i.cameraCache,r.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){var a;if((a=!0===r.isBone?new H:t.length>1?new O:1===t.length?t[0]:new U)!==t[0])for(var s=0,l=t.length;s<l;s++)a.add(t[s]);if(r.name&&(a.userData.name=r.name,a.name=o),tn(a,r),r.extensions&&en(n,a,r),void 0!==r.matrix){var u=new f;u.fromArray(r.matrix),a.applyMatrix4(u)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=e,a})),this.nodeCache[e]}},{key:"loadScene",value:function(e){var t=this.extensions,n=this.json.scenes[e],i=this,r=new O;n.name&&(r.name=i.createUniqueName(n.name)),tn(r,n),n.extensions&&en(t,r,n);for(var o=n.nodes||[],a=[],s=0,l=o.length;s<l;s++)a.push(i.getDependency("node",o[s]));return Promise.all(a).then((function(e){for(var t=0,n=e.length;t<n;t++)r.add(e[t]);return i.associations=function(e){var t,n=new Map,r=Ze(i.associations);try{for(r.s();!(t=r.n()).done;){var o=ot(t.value,2),a=o[0],s=o[1];(a instanceof S||a instanceof ae)&&n.set(a,s)}}catch(e){r.e(e)}finally{r.f()}return e.traverse((function(e){var t=i.associations.get(e);null!=t&&n.set(e,t)})),n}(r),r}))}},{key:"_createAnimationTracks",value:function(e,t,n,i,r){var o,a=[],s=e.name?e.name:e.uuid,l=[];switch(qt[r.path]===qt.weights?e.traverse((function(e){e.morphTargetInfluences&&l.push(e.name?e.name:e.uuid)})):l.push(s),qt[r.path]){case qt.weights:o=le;break;case qt.rotation:o=ue;break;case qt.position:case qt.scale:o=se;break;default:if(1===n.itemSize)o=le;else o=se}for(var u=void 0!==i.interpolation?Qt[i.interpolation]:F,h=this._getArrayFromAccessor(n),c=0,f=l.length;c<f;c++){var d=new o(l[c]+"."+qt[r.path],t.array,h,u);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(d),a.push(d)}return a}},{key:"_getArrayFromAccessor",value:function(e){var t=e.array;if(e.normalized){for(var n=an(t.constructor),i=new Float32Array(t.length),r=0,o=t.length;r<o;r++)i[r]=t[r]*n;t=i}return t}},{key:"_createCubicSplineTrackInterpolant",value:function(e){e.createInterpolant=function(e){return new(this instanceof ue?jt:Ut)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}])}();function un(e,t,n){var i=t.attributes,r=[];function o(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(var a in i){var s=Kt[a]||a.toLowerCase();s in e.attributes||r.push(o(i[a],s))}if(void 0!==t.indices&&!e.index){var l=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(l)}return j.workingColorSpace!==u&&"COLOR_0"in i&&console.warn('THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "'.concat(j.workingColorSpace,'" not supported.')),tn(e,t),function(e,t,n){var i=t.attributes,r=new he;if(void 0!==i.POSITION){var o=n.json.accessors[i.POSITION],a=o.min,s=o.max;if(void 0!==a&&void 0!==s){if(r.set(new Y(a[0],a[1],a[2]),new Y(s[0],s[1],s[2])),o.normalized){var l=an(Gt[o.componentType]);r.min.multiplyScalar(l),r.max.multiplyScalar(l)}var u=t.targets;if(void 0!==u){for(var h=new Y,c=new Y,f=0,d=u.length;f<d;f++){var m=u[f];if(void 0!==m.POSITION){var p=n.json.accessors[m.POSITION],v=p.min,g=p.max;if(void 0!==v&&void 0!==g){if(c.setX(Math.max(Math.abs(v[0]),Math.abs(g[0]))),c.setY(Math.max(Math.abs(v[1]),Math.abs(g[1]))),c.setZ(Math.max(Math.abs(v[2]),Math.abs(g[2]))),p.normalized){var y=an(Gt[p.componentType]);c.multiplyScalar(y)}h.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(h)}e.boundingBox=r;var b=new ce;r.getCenter(b.center),b.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,n){for(var i=!1,r=!1,o=!1,a=0,s=t.length;a<s;a++){var l=t[a];if(void 0!==l.POSITION&&(i=!0),void 0!==l.NORMAL&&(r=!0),void 0!==l.COLOR_0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(e);for(var u=[],h=[],c=[],f=0,d=t.length;f<d;f++){var m=t[f];if(i){var p=void 0!==m.POSITION?n.getDependency("accessor",m.POSITION):e.attributes.position;u.push(p)}if(r){var v=void 0!==m.NORMAL?n.getDependency("accessor",m.NORMAL):e.attributes.normal;h.push(v)}if(o){var g=void 0!==m.COLOR_0?n.getDependency("accessor",m.COLOR_0):e.attributes.color;c.push(g)}}return Promise.all([Promise.all(u),Promise.all(h),Promise.all(c)]).then((function(t){var n=t[0],a=t[1],s=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=a),o&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}
/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var hn=Uint8Array,cn=Uint16Array,fn=Int32Array,dn=new hn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mn=new hn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),pn=new hn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vn=function(e,t){for(var n=new cn(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new fn(n[30]);for(i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)r[o]=o-n[i]<<5|i;return{b:n,r:r}},gn=vn(dn,2),yn=gn.b,bn=gn.r;yn[28]=258,bn[258]=28;for(var Sn=vn(mn,0).b,kn=new cn(32768),xn=0;xn<32768;++xn){var wn=(43690&xn)>>1|(21845&xn)<<1;wn=(61680&(wn=(52428&wn)>>2|(13107&wn)<<2))>>4|(3855&wn)<<4,kn[xn]=((65280&wn)>>8|(255&wn)<<8)>>1}var Rn=function(e,t,n){for(var i=e.length,r=0,o=new cn(t);r<i;++r)e[r]&&++o[e[r]-1];var a,s=new cn(t);for(r=1;r<t;++r)s[r]=s[r-1]+o[r-1]<<1;if(n){a=new cn(1<<t);var l=15-t;for(r=0;r<i;++r)if(e[r])for(var u=r<<4|e[r],h=t-e[r],c=s[e[r]-1]++<<h,f=c|(1<<h)-1;c<=f;++c)a[kn[c]>>l]=u}else for(a=new cn(i),r=0;r<i;++r)e[r]&&(a[r]=kn[s[e[r]-1]++]>>15-e[r]);return a},An=new hn(288);for(xn=0;xn<144;++xn)An[xn]=8;for(xn=144;xn<256;++xn)An[xn]=9;for(xn=256;xn<280;++xn)An[xn]=7;for(xn=280;xn<288;++xn)An[xn]=8;var Ln=new hn(32);for(xn=0;xn<32;++xn)Ln[xn]=5;var Bn=Rn(An,9,1),Tn=Rn(Ln,5,1),En=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Cn=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},Mn=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Pn=function(e){return(e+7)/8|0},On=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],_n=function e(t,n,i){var r=new Error(n||On[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,e),!i)throw r;return r},In=function(e,t,n,i){var r=e.length,o=i?i.length:0;if(!r||t.f&&!t.l)return n||new hn(0);var a=!n,s=a||2!=t.i,l=t.i;a&&(n=new hn(3*r));var u=function(e){var t=n.length;if(e>t){var i=new hn(Math.max(2*t,e));i.set(n),n=i}},h=t.f||0,c=t.p||0,f=t.b||0,d=t.l,m=t.d,p=t.m,v=t.n,g=8*r;do{if(!d){h=Cn(e,c,1);var y=Cn(e,c+1,3);if(c+=3,!y){var b=e[(C=Pn(c)+4)-4]|e[C-3]<<8,S=C+b;if(S>r){l&&_n(0);break}s&&u(f+b),n.set(e.subarray(C,S),f),t.b=f+=b,t.p=c=8*S,t.f=h;continue}if(1==y)d=Bn,m=Tn,p=9,v=5;else if(2==y){var k=Cn(e,c,31)+257,x=Cn(e,c+10,15)+4,w=k+Cn(e,c+5,31)+1;c+=14;for(var R=new hn(w),A=new hn(19),L=0;L<x;++L)A[pn[L]]=Cn(e,c+3*L,7);c+=3*x;var B=En(A),T=(1<<B)-1,E=Rn(A,B,1);for(L=0;L<w;){var C,M=E[Cn(e,c,T)];if(c+=15&M,(C=M>>4)<16)R[L++]=C;else{var P=0,O=0;for(16==C?(O=3+Cn(e,c,3),c+=2,P=R[L-1]):17==C?(O=3+Cn(e,c,7),c+=3):18==C&&(O=11+Cn(e,c,127),c+=7);O--;)R[L++]=P}}var _=R.subarray(0,k),I=R.subarray(k);p=En(_),v=En(I),d=Rn(_,p,1),m=Rn(I,v,1)}else _n(1);if(c>g){l&&_n(0);break}}s&&u(f+131072);for(var D=(1<<p)-1,N=(1<<v)-1,z=c;;z=c){var H=(P=d[Mn(e,c)&D])>>4;if((c+=15&P)>g){l&&_n(0);break}if(P||_n(2),H<256)n[f++]=H;else{if(256==H){z=c,d=null;break}var U=H-254;if(H>264){var F=dn[L=H-257];U=Cn(e,c,(1<<F)-1)+yn[L],c+=F}var j=m[Mn(e,c)&N],W=j>>4;j||_n(3),c+=15&j;I=Sn[W];if(W>3){F=mn[W];I+=Mn(e,c)&(1<<F)-1,c+=F}if(c>g){l&&_n(0);break}s&&u(f+131072);var G=f+U;if(f<I){var V=o-I,X=Math.min(I,G);for(V+f<0&&_n(3);f<X;++f)n[f]=i[V+f]}for(;f<G;++f)n[f]=n[f-I]}}t.l=d,t.p=z,t.b=f,t.f=h,d&&(h=1,t.m=p,t.d=m,t.n=v)}while(!h);return f!=n.length&&a?function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new hn(e.subarray(t,n))}(n,0,f):n.subarray(0,f)},Dn=new hn(0);function Nn(e,t){return In(e.subarray((n=e,i=t&&t.dictionary,(8!=(15&n[0])||n[0]>>4>7||(n[0]<<8|n[1])%31)&&_n(6,"invalid zlib data"),(n[1]>>5&1)==+!i&&_n(6,"invalid zlib data: "+(32&n[1]?"need":"unexpected")+" dictionary"),2+(n[1]>>3&4)),-4),{i:2},t&&t.out,t&&t.dictionary);var n,i}var zn="undefined"!=typeof TextDecoder&&new TextDecoder;try{zn.decode(Dn,{stream:!0}),1}catch(e){}var Hn=function(e){function t(e){var n;return Ye(this,t),(n=Xe(this,t,[e])).type=me,n}return tt(t,de),Qe(t,[{key:"parse",value:function(e){var t=65536,n=t>>3,i=14,r=65537,o=1<<i,a=o-1,s=32768,l=65535,h=59,c=63,f=2+c-h,d=4,m=4,p=2,v=1,g=0,y=1,b=0,S=2,k=Math.pow(2.7182818,2.2);var x={l:0,c:0,lc:0};function w(e,t,n,i,r){for(;n<e;)t=t<<8|ie(i,r),n+=8;n-=e,x.l=t>>n&(1<<e)-1,x.c=t,x.lc=n}var R=new Array(59);function A(e,t,n,i,o,a){for(var s=t,l=0,u=0;i<=o;i++){if(s.value-t.value>n)return!1;w(6,l,u,e,s);var d=x.l;if(l=x.c,u=x.lc,a[i]=d,d==c){if(s.value-t.value>n)throw new Error("Something wrong with hufUnpackEncTable");w(8,l,u,e,s);var m=x.l+f;if(l=x.c,u=x.lc,i+m>o+1)throw new Error("Something wrong with hufUnpackEncTable");for(;m--;)a[i++]=0;i--}else if(d>=h){var p=d-h+2;if(i+p>o+1)throw new Error("Something wrong with hufUnpackEncTable");for(;p--;)a[i++]=0;i--}}!function(e){for(var t=0;t<=58;++t)R[t]=0;for(var n=0;n<r;++n)R[e[n]]+=1;for(var i=0,o=58;o>0;--o){var a=i+R[o]>>1;R[o]=i,i=a}for(var s=0;s<r;++s){var l=e[s];l>0&&(e[s]=l|R[l]++<<6)}}(a)}function L(e){return 63&e}function B(e){return e>>6}var T={c:0,lc:0};function E(e,t,n,i){e=e<<8|ie(n,i),t+=8,T.c=e,T.lc=t}var C={c:0,lc:0};function M(e,t,n,i,r,o,a,s,l){if(e==t){i<8&&(E(n,i,r,o),n=T.c,i=T.lc);var u=n>>(i-=8);if(u=new Uint8Array([u])[0],s.value+u>l)return!1;for(var h=a[s.value-1];u-- >0;)a[s.value++]=h}else{if(!(s.value<l))return!1;a[s.value++]=e}C.c=n,C.lc=i}function P(e){return 65535&e}function O(e){var t=P(e);return t>32767?t-65536:t}var _={a:0,b:0};function I(e,t){var n=O(e),i=O(t),r=n+(1&i)+(i>>1),o=r,a=r-i;_.a=o,_.b=a}function D(e,t){var n=P(e),i=P(t),r=n-(i>>1)&l,o=i+r-s&l;_.a=o,_.b=r}function N(e,t,n,i,r,o,a){for(var s,l,u=a<16384,h=n>r?r:n,c=1;c<=h;)c<<=1;for(s=c>>=1,c>>=1;c>=1;){for(var f=(l=0)+o*(r-s),d=o*c,m=o*s,p=i*c,v=i*s,g=void 0,y=void 0,b=void 0,S=void 0;l<=f;l+=m){for(var k=l,x=l+i*(n-s);k<=x;k+=v){var w=k+p,R=k+d,A=R+p;u?(I(e[k+t],e[R+t]),g=_.a,b=_.b,I(e[w+t],e[A+t]),y=_.a,S=_.b,I(g,y),e[k+t]=_.a,e[w+t]=_.b,I(b,S),e[R+t]=_.a,e[A+t]=_.b):(D(e[k+t],e[R+t]),g=_.a,b=_.b,D(e[w+t],e[A+t]),y=_.a,S=_.b,D(g,y),e[k+t]=_.a,e[w+t]=_.b,D(b,S),e[R+t]=_.a,e[A+t]=_.b)}if(n&c){var L=k+d;u?I(e[k+t],e[L+t]):D(e[k+t],e[L+t]),g=_.a,e[L+t]=_.b,e[k+t]=g}}if(r&c)for(var B=l,T=l+i*(n-s);B<=T;B+=v){var E=B+p;u?I(e[B+t],e[E+t]):D(e[B+t],e[E+t]),g=_.a,e[E+t]=_.b,e[B+t]=g}s=c,c>>=1}return l}function z(e,t,n,s,l,u){var h=n.value,c=ne(t,n),f=ne(t,n);n.value+=4;var d=ne(t,n);if(n.value+=4,c<0||c>=r||f<0||f>=r)throw new Error("Something wrong with HUF_ENCSIZE");var m=new Array(r),p=new Array(o);if(function(e){for(var t=0;t<o;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(p),A(e,n,s-(n.value-h),c,f,m),d>8*(s-(n.value-h)))throw new Error("Something wrong with hufUncompress");!function(e,t,n,r){for(;t<=n;t++){var o=B(e[t]),a=L(e[t]);if(o>>a)throw new Error("Invalid table entry");if(a>i){var s=r[o>>a-i];if(s.len)throw new Error("Invalid table entry");if(s.lit++,s.p){var l=s.p;s.p=new Array(s.lit);for(var u=0;u<s.lit-1;++u)s.p[u]=l[u]}else s.p=new Array(1);s.p[s.lit-1]=t}else if(a)for(var h=0,c=1<<i-a;c>0;c--){var f=r[(o<<i-a)+h];if(f.len||f.p)throw new Error("Invalid table entry");f.len=a,f.lit=t,h++}}}(m,c,f,p),function(e,t,n,r,o,s,l,u,h){for(var c=0,f=0,d=l,m=Math.trunc(r.value+(o+7)/8);r.value<m;)for(E(c,f,n,r),c=T.c,f=T.lc;f>=i;){var p=t[c>>f-i&a];if(p.len)f-=p.len,M(p.lit,s,c,f,n,r,u,h,d),c=C.c,f=C.lc;else{if(!p.p)throw new Error("hufDecode issues");var v=void 0;for(v=0;v<p.lit;v++){for(var g=L(e[p.p[v]]);f<g&&r.value<m;)E(c,f,n,r),c=T.c,f=T.lc;if(f>=g&&B(e[p.p[v]])==(c>>f-g&(1<<g)-1)){f-=g,M(p.p[v],s,c,f,n,r,u,h,d),c=C.c,f=C.lc;break}}if(v==p.lit)throw new Error("hufDecode issues")}}var y=8-o&7;for(c>>=y,f-=y;f>0;){var b=t[c<<i-f&a];if(!b.len)throw new Error("hufDecode issues");f-=b.len,M(b.lit,s,c,f,n,r,u,h,d),c=C.c,f=C.lc}}(m,p,e,n,d,f,u,l,{value:0})}function H(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function U(e,t){for(var n=0,i=Math.floor((e.length+1)/2),r=0,o=e.length-1;!(r>o||(t[r++]=e[n++],r>o));)t[r++]=e[i++]}function F(e){for(var t=e.byteLength,n=new Array,i=0,r=new DataView(e);t>0;){var o=r.getInt8(i++);if(o<0){var a=-o;t-=a+1;for(var s=0;s<a;s++)n.push(r.getUint8(i++))}else{var l=o;t-=2;for(var u=r.getUint8(i++),h=0;h<l+1;h++)n.push(u)}}return n}function j(e,t,n){for(var i,r=1;r<64;)65280==(i=t[e.value])?r=64:i>>8==255?r+=255&i:(n[r]=i,r++),e.value++}function W(e,t){t[0]=le(e[0]),t[1]=le(e[1]),t[2]=le(e[5]),t[3]=le(e[6]),t[4]=le(e[14]),t[5]=le(e[15]),t[6]=le(e[27]),t[7]=le(e[28]),t[8]=le(e[2]),t[9]=le(e[4]),t[10]=le(e[7]),t[11]=le(e[13]),t[12]=le(e[16]),t[13]=le(e[26]),t[14]=le(e[29]),t[15]=le(e[42]),t[16]=le(e[3]),t[17]=le(e[8]),t[18]=le(e[12]),t[19]=le(e[17]),t[20]=le(e[25]),t[21]=le(e[30]),t[22]=le(e[41]),t[23]=le(e[43]),t[24]=le(e[9]),t[25]=le(e[11]),t[26]=le(e[18]),t[27]=le(e[24]),t[28]=le(e[31]),t[29]=le(e[40]),t[30]=le(e[44]),t[31]=le(e[53]),t[32]=le(e[10]),t[33]=le(e[19]),t[34]=le(e[23]),t[35]=le(e[32]),t[36]=le(e[39]),t[37]=le(e[45]),t[38]=le(e[52]),t[39]=le(e[54]),t[40]=le(e[20]),t[41]=le(e[22]),t[42]=le(e[33]),t[43]=le(e[38]),t[44]=le(e[46]),t[45]=le(e[51]),t[46]=le(e[55]),t[47]=le(e[60]),t[48]=le(e[21]),t[49]=le(e[34]),t[50]=le(e[37]),t[51]=le(e[47]),t[52]=le(e[50]),t[53]=le(e[56]),t[54]=le(e[59]),t[55]=le(e[61]),t[56]=le(e[35]),t[57]=le(e[36]),t[58]=le(e[48]),t[59]=le(e[49]),t[60]=le(e[57]),t[61]=le(e[58]),t[62]=le(e[62]),t[63]=le(e[63])}function G(e){for(var t=.5*Math.cos(.7853975),n=.5*Math.cos(3.14159/16),i=.5*Math.cos(3.14159/8),r=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(.981746875),a=.5*Math.cos(3*3.14159/8),s=.5*Math.cos(1.374445625),l=new Array(4),u=new Array(4),h=new Array(4),c=new Array(4),f=0;f<8;++f){var d=8*f;l[0]=i*e[d+2],l[1]=a*e[d+2],l[2]=i*e[d+6],l[3]=a*e[d+6],u[0]=n*e[d+1]+r*e[d+3]+o*e[d+5]+s*e[d+7],u[1]=r*e[d+1]-s*e[d+3]-n*e[d+5]-o*e[d+7],u[2]=o*e[d+1]-n*e[d+3]+s*e[d+5]+r*e[d+7],u[3]=s*e[d+1]-o*e[d+3]+r*e[d+5]-n*e[d+7],h[0]=t*(e[d+0]+e[d+4]),h[3]=t*(e[d+0]-e[d+4]),h[1]=l[0]+l[3],h[2]=l[1]-l[2],c[0]=h[0]+h[1],c[1]=h[3]+h[2],c[2]=h[3]-h[2],c[3]=h[0]-h[1],e[d+0]=c[0]+u[0],e[d+1]=c[1]+u[1],e[d+2]=c[2]+u[2],e[d+3]=c[3]+u[3],e[d+4]=c[3]-u[3],e[d+5]=c[2]-u[2],e[d+6]=c[1]-u[1],e[d+7]=c[0]-u[0]}for(var m=0;m<8;++m)l[0]=i*e[16+m],l[1]=a*e[16+m],l[2]=i*e[48+m],l[3]=a*e[48+m],u[0]=n*e[8+m]+r*e[24+m]+o*e[40+m]+s*e[56+m],u[1]=r*e[8+m]-s*e[24+m]-n*e[40+m]-o*e[56+m],u[2]=o*e[8+m]-n*e[24+m]+s*e[40+m]+r*e[56+m],u[3]=s*e[8+m]-o*e[24+m]+r*e[40+m]-n*e[56+m],h[0]=t*(e[m]+e[32+m]),h[3]=t*(e[m]-e[32+m]),h[1]=l[0]+l[3],h[2]=l[1]-l[2],c[0]=h[0]+h[1],c[1]=h[3]+h[2],c[2]=h[3]-h[2],c[3]=h[0]-h[1],e[0+m]=c[0]+u[0],e[8+m]=c[1]+u[1],e[16+m]=c[2]+u[2],e[24+m]=c[3]+u[3],e[32+m]=c[3]-u[3],e[40+m]=c[2]-u[2],e[48+m]=c[1]-u[1],e[56+m]=c[0]-u[0]}function V(e){for(var t=0;t<64;++t){var n=e[0][t],i=e[1][t],r=e[2][t];e[0][t]=n+1.5747*r,e[1][t]=n-.1873*i-.4682*r,e[2][t]=n+1.8556*i}}function X(e,t,n){for(var i=0;i<64;++i)t[n+i]=be.toHalfFloat(Y(e[i]))}function Y(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(k,Math.abs(e)-1)}function K(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function q(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),n=new Uint8Array(F(t)),i=new Uint8Array(n.length);return H(n),U(n,i),new DataView(i.buffer)}function Q(e){var t=Nn(e.array.slice(e.offset.value,e.offset.value+e.size)),n=new Uint8Array(t.length);return H(t),U(t,n),new DataView(n.buffer)}function Z(e){for(var i=e.viewer,r={value:e.offset.value},o=new Uint16Array(e.columns*e.lines*(e.inputChannels.length*e.type)),a=new Uint8Array(n),s=0,l=new Array(e.inputChannels.length),u=0,h=e.inputChannels.length;u<h;u++)l[u]={},l[u].start=s,l[u].end=l[u].start,l[u].nx=e.columns,l[u].ny=e.lines,l[u].size=e.type,s+=l[u].nx*l[u].ny*l[u].size;var c=ue(i,r),f=ue(i,r);if(f>=n)throw new Error("Something is wrong with PIZ_COMPRESSION BITMAP_SIZE");if(c<=f)for(var d=0;d<f-c+1;d++)a[d+c]=re(i,r);var m=new Uint16Array(t),v=function(e,n){for(var i=0,r=0;r<t;++r)(0==r||e[r>>3]&1<<(7&r))&&(n[i++]=r);for(var o=i-1;i<t;)n[i++]=0;return o}(a,m),g=ne(i,r);z(e.array,i,r,g,o,s);for(var y=0;y<e.inputChannels.length;++y)for(var b=l[y],S=0;S<l[y].size;++S)N(o,b.start+S,b.nx,b.size,b.ny,b.nx*b.size,v);!function(e,t,n){for(var i=0;i<n;++i)t[i]=e[t[i]]}(m,o,s);for(var k=0,x=new Uint8Array(o.buffer.byteLength),w=0;w<e.lines;w++)for(var R=0;R<e.inputChannels.length;R++){var A=l[R],L=A.nx*A.size,B=new Uint8Array(o.buffer,A.end*p,L*p);x.set(B,k),k+=L*p,A.end+=L}return new DataView(x.buffer)}function J(e){for(var t=Nn(e.array.slice(e.offset.value,e.offset.value+e.size)),n=e.inputChannels.length*e.lines*e.columns*e.totalBytes,i=new ArrayBuffer(n),r=new DataView(i),o=0,a=0,s=new Array(4),l=0;l<e.lines;l++)for(var u=0;u<e.inputChannels.length;u++){var h=0;switch(e.inputChannels[u].pixelType){case 1:s[0]=o,s[1]=s[0]+e.columns,o=s[1]+e.columns;for(var c=0;c<e.columns;++c){h+=t[s[0]++]<<8|t[s[1]++],r.setUint16(a,h,!0),a+=2}break;case 2:s[0]=o,s[1]=s[0]+e.columns,s[2]=s[1]+e.columns,o=s[2]+e.columns;for(var f=0;f<e.columns;++f){h+=t[s[0]++]<<24|t[s[1]++]<<16|t[s[2]++]<<8,r.setUint32(a,h,!0),a+=4}}}return r}function $(e){var t=e.viewer,n={value:e.offset.value},i=new Uint8Array(e.columns*e.lines*(e.inputChannels.length*e.type*p)),r={version:oe(t,n),unknownUncompressedSize:oe(t,n),unknownCompressedSize:oe(t,n),acCompressedSize:oe(t,n),dcCompressedSize:oe(t,n),rleCompressedSize:oe(t,n),rleUncompressedSize:oe(t,n),rleRawSize:oe(t,n),totalAcUncompressedCount:oe(t,n),totalDcUncompressedCount:oe(t,n),acCompression:oe(t,n)};if(r.version<2)throw new Error("EXRLoader.parse: "+Ae.compression+" version "+r.version+" is unsupported");for(var o=new Array,a=ue(t,n)-p;a>0;){var s=ee(t.buffer,n),l=re(t,n),u=l>>2&3,h=new Int8Array([(l>>4)-1])[0],c=re(t,n);o.push({name:s,index:h,type:c,compression:u}),a-=s.length+3}for(var f=Ae.channels,d=new Array(e.inputChannels.length),m=0;m<e.inputChannels.length;++m){var v=d[m]={},k=f[m];v.name=k.name,v.compression=b,v.decoded=!1,v.type=k.pixelType,v.pLinear=k.pLinear,v.width=e.columns,v.height=e.lines}for(var x,w,R,A={idx:new Array(3)},L=0;L<e.inputChannels.length;++L)for(var B=d[L],T=0;T<o.length;++T){var E=o[T];B.name==E.name&&(B.compression=E.compression,E.index>=0&&(A.idx[E.index]=L),B.offset=L)}if(r.acCompressedSize>0)switch(r.acCompression){case g:x=new Uint16Array(r.totalAcUncompressedCount),z(e.array,t,n,r.acCompressedSize,x,r.totalAcUncompressedCount);break;case y:var C=Nn(e.array.slice(n.value,n.value+r.totalAcUncompressedCount));x=new Uint16Array(C.buffer),n.value+=r.totalAcUncompressedCount}if(r.dcCompressedSize>0){var M={array:e.array,offset:n,size:r.dcCompressedSize};w=new Uint16Array(Q(M).buffer),n.value+=r.dcCompressedSize}r.rleRawSize>0&&(R=F(Nn(e.array.slice(n.value,n.value+r.rleCompressedSize)).buffer),n.value+=r.rleCompressedSize);for(var P=0,O=new Array(d.length),_=0;_<O.length;++_)O[_]=new Array;for(var I=0;I<e.lines;++I)for(var D=0;D<d.length;++D)O[D].push(P),P+=d[D].width*e.type*p;!function(e,t,n,i,r,o){for(var a=new DataView(o.buffer),s=n[e.idx[0]].width,l=n[e.idx[0]].height,u=Math.floor(s/8),h=Math.ceil(s/8),c=Math.ceil(l/8),f=s-8*(h-1),d=l-8*(c-1),m={value:0},v=new Array(3),g=new Array(3),y=new Array(3),b=new Array(3),S=new Array(3),k=0;k<3;++k)S[k]=t[e.idx[k]],v[k]=k<1?0:v[k-1]+h*c,g[k]=new Float32Array(64),y[k]=new Uint16Array(64),b[k]=new Uint16Array(64*h);for(var x=0;x<c;++x){var w=8;x==c-1&&(w=d);for(var R=8,A=0;A<h;++A){A==h-1&&(R=f);for(var L=0;L<3;++L)y[L].fill(0),y[L][0]=r[v[L]++],j(m,i,y[L]),W(y[L],g[L]),G(g[L]);V(g);for(var B=0;B<3;++B)X(g[B],b[B],64*A)}for(var T=0,E=0;E<3;++E){for(var C=n[e.idx[E]].type,M=8*x;M<8*x+w;++M){T=S[E][M];for(var P=0;P<u;++P){var O=64*P+8*(7&M);a.setUint16(T+0*p*C,b[E][O+0],!0),a.setUint16(T+1*p*C,b[E][O+1],!0),a.setUint16(T+2*p*C,b[E][O+2],!0),a.setUint16(T+3*p*C,b[E][O+3],!0),a.setUint16(T+4*p*C,b[E][O+4],!0),a.setUint16(T+5*p*C,b[E][O+5],!0),a.setUint16(T+6*p*C,b[E][O+6],!0),a.setUint16(T+7*p*C,b[E][O+7],!0),T+=8*p*C}}if(u!=h)for(var _=8*x;_<8*x+w;++_)for(var I=S[E][_]+8*u*p*C,D=64*u+8*(7&_),N=0;N<R;++N)a.setUint16(I+N*p*C,b[E][D+N],!0)}}var z=new Uint16Array(s);a=new DataView(o.buffer);for(var H=0;H<3;++H){n[e.idx[H]].decoded=!0;var U=n[e.idx[H]].type;if(2==n[H].type)for(var F=0;F<l;++F){for(var Y=S[H][F],K=0;K<s;++K)z[K]=a.getUint16(Y+K*p*U,!0);for(var q=0;q<s;++q)a.setFloat32(Y+q*p*U,le(z[q]),!0)}}}(A,O,d,x,w,i);for(var N=0;N<d.length;++N){var H=d[N];if(!H.decoded){if(H.compression!==S)throw new Error("EXRLoader.parse: unsupported channel compression");for(var U=0,Y=0,K=0;K<e.lines;++K){for(var q=O[N][U],Z=0;Z<H.width;++Z){for(var J=0;J<p*H.type;++J)i[q++]=R[Y+J*H.width*H.height];Y++}U++}}}return new DataView(i.buffer)}function ee(e,t){for(var n=new Uint8Array(e),i=0;0!=n[t.value+i];)i+=1;var r=(new TextDecoder).decode(n.slice(t.value,t.value+i));return t.value=t.value+i+1,r}function te(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+m,n}function ne(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+m,n}function ie(e,t){var n=e[t.value];return t.value=t.value+v,n}function re(e,t){var n=e.getUint8(t.value);return t.value=t.value+v,n}var oe=function(e,t){var n;return n="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function ae(e,t){var n=e.getFloat32(t.value,!0);return t.value+=d,n}function se(e,t){return be.toHalfFloat(ae(e,t))}function le(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function ue(e,t){var n=e.getUint16(t.value,!0);return t.value+=p,n}function he(e,t){return le(ue(e,t))}function ce(e,t,n,i,r){return"string"===i||"stringvector"===i||"iccProfile"===i?function(e,t,n){var i=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,i}(t,n,r):"chlist"===i?function(e,t,n,i){for(var r=n.value,o=[];n.value<r+i-1;){var a=ee(t,n),s=te(e,n),l=re(e,n);n.value+=3;var u=te(e,n),h=te(e,n);o.push({name:a,pixelType:s,pLinear:l,xSampling:u,ySampling:h})}return n.value+=1,o}(e,t,n,r):"chromaticities"===i?function(e,t){return{redX:ae(e,t),redY:ae(e,t),greenX:ae(e,t),greenY:ae(e,t),blueX:ae(e,t),blueY:ae(e,t),whiteX:ae(e,t),whiteY:ae(e,t)}}(e,n):"compression"===i?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][re(e,t)]}(e,n):"box2i"===i?function(e,t){return{xMin:te(e,t),yMin:te(e,t),xMax:te(e,t),yMax:te(e,t)}}(e,n):"envmap"===i?function(e,t){return["ENVMAP_LATLONG","ENVMAP_CUBE"][re(e,t)]}(e,n):"tiledesc"===i?function(e,t){var n=ne(e,t),i=ne(e,t),r=re(e,t);return{xSize:n,ySize:i,levelMode:["ONE_LEVEL","MIPMAP_LEVELS","RIPMAP_LEVELS"][15&r],roundingMode:["ROUND_DOWN","ROUND_UP"][r>>4]}}(e,n):"lineOrder"===i?function(e,t){return["INCREASING_Y","DECREASING_Y","RANDOM_Y"][re(e,t)]}(e,n):"float"===i?ae(e,n):"v2f"===i?function(e,t){return[ae(e,t),ae(e,t)]}(e,n):"v3f"===i?function(e,t){return[ae(e,t),ae(e,t),ae(e,t)]}(e,n):"int"===i?te(e,n):"rational"===i?function(e,t){return[te(e,t),ne(e,t)]}(e,n):"timecode"===i?function(e,t){return[ne(e,t),ne(e,t)]}(e,n):"preview"===i?(n.value+=r,"skipped"):void(n.value+=r)}function fe(e,t,n){var i=0;switch(e.levelMode){case"ONE_LEVEL":i=1;break;case"MIPMAP_LEVELS":i=function(e,t){var n=Math.log2(e);return"ROUND_DOWN"==t?Math.floor(n):Math.ceil(n)}(Math.max(t,n),e.roundingMode)+1;break;case"RIPMAP_LEVELS":throw new Error("THREE.EXRLoader: RIPMAP_LEVELS tiles currently unsupported.")}return i}function de(e,t,n,i){for(var r=new Array(e),o=0;o<e;o++){var a=1<<o,s=t/a|0;"ROUND_UP"==i&&s*a<t&&(s+=1);var l=Math.max(s,1);r[o]=(l+n-1)/n|0}return r}function Se(){for(var e=this,t=e.offset,n={value:0},i=0;i<e.tileCount;i++){var r=te(e.viewer,t),o=te(e.viewer,t);t.value+=8,e.size=ne(e.viewer,t);var a=r*e.blockWidth,s=o*e.blockHeight;e.columns=a+e.blockWidth>e.width?e.width-a:e.blockWidth,e.lines=s+e.blockHeight>e.height?e.height-s:e.blockHeight;var l=e.columns*e.totalBytes,u=e.size<e.lines*l?e.uncompress(e):K(e);t.value+=e.size;for(var h=0;h<e.lines;h++)for(var c=h*e.columns*e.totalBytes,f=0;f<e.inputChannels.length;f++){var d=Ae.channels[f].name,m=e.channelByteOffsets[d]*e.columns,p=e.decodeChannels[d];if(void 0!==p){n.value=c+m;for(var v=(e.height-(1+s+h))*e.outLineWidth,g=0;g<e.columns;g++){var y=v+(g+a)*e.outputChannels+p;e.byteArray[y]=e.getter(u,n)}}}}}function ke(){for(var e=this,t=e.offset,n={value:0},i=0;i<e.height/e.blockHeight;i++){var r=te(e.viewer,t)-Ae.dataWindow.yMin;e.size=ne(e.viewer,t),e.lines=r+e.blockHeight>e.height?e.height-r:e.blockHeight;var o=e.columns*e.totalBytes,a=e.size<e.lines*o?e.uncompress(e):K(e);t.value+=e.size;for(var s=0;s<e.blockHeight;s++){var l=i*e.blockHeight,u=s+e.scanOrder(l);if(!(u>=e.height))for(var h=s*o,c=(e.height-1-u)*e.outLineWidth,f=0;f<e.inputChannels.length;f++){var d=Ae.channels[f].name,m=e.channelByteOffsets[d]*e.columns,p=e.decodeChannels[d];if(void 0!==p){n.value=h+m;for(var v=0;v<e.columns;v++){var g=c+v*e.outputChannels+p;e.byteArray[g]=e.getter(a,n)}}}}}}var xe={value:0},we=new DataView(e),Re=new Uint8Array(e),Ae=function(e,t,n){var i={};if(20000630!=e.getUint32(0,!0))throw new Error("THREE.EXRLoader: Provided file doesn't appear to be in OpenEXR format.");i.version=e.getUint8(4);var r=e.getUint8(5);i.spec={singleTile:!!(2&r),longName:!!(4&r),deepFormat:!!(8&r),multiPart:!!(16&r)},n.value=8;for(var o=!0;o;){var a=ee(t,n);if(0==a)o=!1;else{var s=ee(t,n),l=ce(e,t,n,s,ne(e,n));void 0===l?console.warn("THREE.EXRLoader: Skipped unknown header attribute type '".concat(s,"'.")):i[a]=l}}if(-7&r)throw console.error("THREE.EXRHeader:",i),new Error("THREE.EXRLoader: Provided file is currently unsupported.");return i}(we,e,xe),Le=function(e,t,n,i,r){var o={size:0,viewer:t,array:n,offset:i,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,inputChannels:e.channels,channelByteOffsets:{},scanOrder:null,totalBytes:null,columns:null,lines:null,type:null,uncompress:null,getter:null,format:null,colorSpace:u};switch(e.compression){case"NO_COMPRESSION":o.blockHeight=1,o.uncompress=K;break;case"RLE_COMPRESSION":o.blockHeight=1,o.uncompress=q;break;case"ZIPS_COMPRESSION":o.blockHeight=1,o.uncompress=Q;break;case"ZIP_COMPRESSION":o.blockHeight=16,o.uncompress=Q;break;case"PIZ_COMPRESSION":o.blockHeight=32,o.uncompress=Z;break;case"PXR24_COMPRESSION":o.blockHeight=16,o.uncompress=J;break;case"DWAA_COMPRESSION":o.blockHeight=32,o.uncompress=$;break;case"DWAB_COMPRESSION":o.blockHeight=256,o.uncompress=$;break;default:throw new Error("EXRLoader.parse: "+e.compression+" is unsupported")}var a,s={},l=Ze(e.channels);try{for(l.s();!(a=l.n()).done;){var h=a.value;switch(h.name){case"Y":case"R":case"G":case"B":case"A":s[h.name]=!0,o.type=h.pixelType}}}catch(e){l.e(e)}finally{l.f()}var c=!1;if(s.R&&s.G&&s.B)c=!s.A,o.outputChannels=4,o.decodeChannels={R:0,G:1,B:2,A:3};else{if(!s.Y)throw new Error("EXRLoader.parse: file contains unsupported data channels.");o.outputChannels=1,o.decodeChannels={Y:0}}if(1==o.type)switch(r){case pe:o.getter=he;break;case me:o.getter=ue}else{if(2!=o.type)throw new Error("EXRLoader.parse: unsupported pixelType "+o.type+" for "+e.compression+".");switch(r){case pe:o.getter=ae;break;case me:o.getter=se}}o.columns=o.width;var f=o.width*o.height*o.outputChannels;switch(r){case pe:o.byteArray=new Float32Array(f),c&&o.byteArray.fill(1,0,f);break;case me:o.byteArray=new Uint16Array(f),c&&o.byteArray.fill(15360,0,f);break;default:console.error("THREE.EXRLoader: unsupported type: ",r)}var d,m=0,p=Ze(e.channels);try{for(p.s();!(d=p.n()).done;){var v=d.value;void 0!==o.decodeChannels[v.name]&&(o.channelByteOffsets[v.name]=m),m+=2*v.pixelType}}catch(e){p.e(e)}finally{p.f()}if(o.totalBytes=m,o.outLineWidth=o.width*o.outputChannels,"INCREASING_Y"===e.lineOrder?o.scanOrder=function(e){return e}:o.scanOrder=function(e){return o.height-1-e},4==o.outputChannels?(o.format=ve,o.colorSpace=u):(o.format=ge,o.colorSpace=ye),e.spec.singleTile){o.blockHeight=e.tiles.ySize,o.blockWidth=e.tiles.xSize;var g=fe(e.tiles,o.width,o.height),y=de(g,o.width,e.tiles.xSize,e.tiles.roundingMode),b=de(g,o.height,e.tiles.ySize,e.tiles.roundingMode);o.tileCount=y[0]*b[0];for(var S=0;S<g;S++)for(var k=0;k<b[S];k++)for(var x=0;x<y[S];x++)oe(t,i);o.decode=Se.bind(o)}else{o.blockWidth=o.width;for(var w=Math.ceil(o.height/o.blockHeight),R=0;R<w;R++)oe(t,i);o.decode=ke.bind(o)}return o}(Ae,we,Re,xe,this.type);return Le.decode(),{header:Ae,width:Le.width,height:Le.height,data:Le.byteArray,format:Le.format,colorSpace:Le.colorSpace,type:this.type}}},{key:"setDataType",value:function(e){return this.type=e,this}},{key:"load",value:function(e,n,i,r){return $e(et(t.prototype),"load",this).call(this,e,(function(e,t){e.colorSpace=t.colorSpace,e.minFilter=v,e.magFilter=v,e.generateMipmaps=!1,e.flipY=!1,n&&n(e,t)}),i,r)}}])}(),Un={type:"change"},Fn={type:"start"},jn={type:"end"},Wn=function(t){function n(t,i){var r,o,a,s,l,u,h;Ye(this,n),r=Xe(this,n),void 0===i&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),i===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.object=t,r.domElement=i,r.domElement.style.touchAction="none",r.enabled=!0,r.target=new e.Vector3,r.minDistance=0,r.maxDistance=1/0,r.minZoom=0,r.maxZoom=1/0,r.minPolarAngle=0,r.maxPolarAngle=Math.PI,r.minAzimuthAngle=-1/0,r.maxAzimuthAngle=1/0,r.enableDamping=!1,r.dampingFactor=.05,r.enableZoom=!0,r.zoomSpeed=1,r.enableRotate=!0,r.rotateSpeed=1,r.enablePan=!0,r.panSpeed=1,r.screenSpacePanning=!0,r.keyPanSpeed=7,r.autoRotate=!1,r.autoRotateSpeed=2,r.resetRotate=!1,r.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},r.mouseButtons={LEFT:e.MOUSE.ROTATE,MIDDLE:e.MOUSE.DOLLY,RIGHT:e.MOUSE.PAN},r.touches={ONE:e.TOUCH.ROTATE,TWO:e.TOUCH.DOLLY_PAN},r.target0=r.target.clone(),r.position0=r.object.position.clone(),r.zoom0=r.object.zoom,r._domElementKeyEvents=null,r.getPolarAngle=function(){return p.phi},r.getAzimuthalAngle=function(){return p.theta},r.getDistance=function(){return this.object.position.distanceTo(this.target)},r.listenToKeyEvents=function(e){e.addEventListener("keydown",$),this._domElementKeyEvents=e},r.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},r.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(Un),c.update(),d=f.NONE},r.update=(o=new e.Vector3,a=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),s=a.clone().invert(),l=new e.Vector3,u=new e.Quaternion,h=2*Math.PI,function(){var e=c.object.position;if(o.copy(e).sub(c.target),o.applyQuaternion(a),p.setFromVector3(o),c.autoRotate&&d===f.NONE&&O(M()),c.resetRotate){var t=M();Math.abs(p.theta)>.01?p.theta>0?O(t):p.theta<0&&O(-t):(c.resetRotate=!1,p.theta=0,c.reset())}c.enableDamping?(p.theta+=v.theta*c.dampingFactor,p.phi+=v.phi*c.dampingFactor):(p.theta+=v.theta,p.phi+=v.phi);var n=c.minAzimuthAngle,i=c.maxAzimuthAngle;return isFinite(n)&&isFinite(i)&&(n<-Math.PI?n+=h:n>Math.PI&&(n-=h),i<-Math.PI?i+=h:i>Math.PI&&(i-=h),p.theta=n<=i?Math.max(n,Math.min(i,p.theta)):p.theta>(n+i)/2?Math.max(n,p.theta):Math.min(i,p.theta)),p.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,p.phi)),p.makeSafe(),p.radius*=g,p.radius=Math.max(c.minDistance,Math.min(c.maxDistance,p.radius)),!0===c.enableDamping?c.target.addScaledVector(y,c.dampingFactor):c.target.add(y),o.setFromSpherical(p),o.applyQuaternion(s),e.copy(c.target).add(o),c.object.lookAt(c.target),!0===c.enableDamping?(v.theta*=1-c.dampingFactor,v.phi*=1-c.dampingFactor,y.multiplyScalar(1-c.dampingFactor)):(v.set(0,0,0),y.set(0,0,0)),g=1,!!(b||l.distanceToSquared(c.object.position)>m||8*(1-u.dot(c.object.quaternion))>m)&&(c.dispatchEvent(Un),l.copy(c.object.position),u.copy(c.object.quaternion),b=!1,!0)}),r.dispose=function(){c.domElement.removeEventListener("contextmenu",ee),c.domElement.removeEventListener("pointerdown",K),c.domElement.removeEventListener("pointercancel",Z),c.domElement.removeEventListener("wheel",J),c.domElement.removeEventListener("pointermove",q),c.domElement.removeEventListener("pointerup",Q),null!==c._domElementKeyEvents&&c._domElementKeyEvents.removeEventListener("keydown",$)};var c=r,f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=f.NONE,m=1e-6,p=new e.Spherical,v=new e.Spherical,g=1,y=new e.Vector3,b=!1,S=new e.Vector2,k=new e.Vector2,x=new e.Vector2,w=new e.Vector2,R=new e.Vector2,A=new e.Vector2,L=new e.Vector2,B=new e.Vector2,T=new e.Vector2,E=[],C={};function M(){return 2*Math.PI/60/60*c.autoRotateSpeed}function P(){return Math.pow(.95,c.zoomSpeed)}function O(e){v.theta-=e}function _(e){v.phi-=e}var I=function(){var t=new e.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),y.add(t)}}(),D=function(){var t=new e.Vector3;return function(e,n){!0===c.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(c.object.up,t)),t.multiplyScalar(e),y.add(t)}}(),N=function(){var t=new e.Vector3;return function(e,n){var i=c.domElement;if(c.object.isPerspectiveCamera){var r=c.object.position;t.copy(r).sub(c.target);var o=t.length();o*=Math.tan(c.object.fov/2*Math.PI/180),I(2*e*o/i.clientHeight,c.object.matrix),D(2*n*o/i.clientHeight,c.object.matrix)}else c.object.isOrthographicCamera?(I(e*(c.object.right-c.object.left)/c.object.zoom/i.clientWidth,c.object.matrix),D(n*(c.object.top-c.object.bottom)/c.object.zoom/i.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}}();function z(e){c.object.isPerspectiveCamera?g/=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function H(e){c.object.isPerspectiveCamera?g*=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function U(e){S.set(e.clientX,e.clientY)}function F(e){w.set(e.clientX,e.clientY)}function j(){if(1===E.length)S.set(E[0].pageX,E[0].pageY);else{var e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);S.set(e,t)}}function W(){if(1===E.length)w.set(E[0].pageX,E[0].pageY);else{var e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);w.set(e,t)}}function G(){var e=E[0].pageX-E[1].pageX,t=E[0].pageY-E[1].pageY,n=Math.sqrt(e*e+t*t);L.set(0,n)}function V(e){if(1==E.length)k.set(e.pageX,e.pageY);else{var t=ie(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);k.set(n,i)}x.subVectors(k,S).multiplyScalar(c.rotateSpeed);var r=c.domElement;O(2*Math.PI*x.x/r.clientHeight),_(2*Math.PI*x.y/r.clientHeight),S.copy(k)}function X(e){if(1===E.length)R.set(e.pageX,e.pageY);else{var t=ie(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);R.set(n,i)}A.subVectors(R,w).multiplyScalar(c.panSpeed),N(A.x,A.y),w.copy(R)}function Y(e){var t=ie(e),n=e.pageX-t.x,i=e.pageY-t.y,r=Math.sqrt(n*n+i*i);B.set(0,r),T.set(0,Math.pow(B.y/L.y,c.zoomSpeed)),z(T.y),L.copy(B)}function K(t){!1!==c.enabled&&(0===E.length&&(c.domElement.setPointerCapture(t.pointerId),c.domElement.addEventListener("pointermove",q),c.domElement.addEventListener("pointerup",Q)),function(e){E.push(e)}(t),"touch"===t.pointerType?function(t){switch(ne(t),E.length){case 1:switch(c.touches.ONE){case e.TOUCH.ROTATE:if(!1===c.enableRotate)return;j(),d=f.TOUCH_ROTATE;break;case e.TOUCH.PAN:if(!1===c.enablePan)return;W(),d=f.TOUCH_PAN;break;default:d=f.NONE}break;case 2:switch(c.touches.TWO){case e.TOUCH.DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;c.enableZoom&&G(),c.enablePan&&W(),d=f.TOUCH_DOLLY_PAN;break;case e.TOUCH.DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;c.enableZoom&&G(),c.enableRotate&&j(),d=f.TOUCH_DOLLY_ROTATE;break;default:d=f.NONE}break;default:d=f.NONE}d!==f.NONE&&c.dispatchEvent(Fn)}(t):function(t){var n;switch(t.button){case 0:n=c.mouseButtons.LEFT;break;case 1:n=c.mouseButtons.MIDDLE;break;case 2:n=c.mouseButtons.RIGHT;break;default:n=-1}switch(n){case e.MOUSE.DOLLY:if(!1===c.enableZoom)return;!function(e){L.set(e.clientX,e.clientY)}(t),d=f.DOLLY;break;case e.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey){if(!1===c.enablePan)return;F(t),d=f.PAN}else{if(!1===c.enableRotate)return;U(t),d=f.ROTATE}break;case e.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===c.enableRotate)return;U(t),d=f.ROTATE}else{if(!1===c.enablePan)return;F(t),d=f.PAN}break;default:d=f.NONE}d!==f.NONE&&c.dispatchEvent(Fn)}(t))}function q(e){!1!==c.enabled&&("touch"===e.pointerType?function(e){switch(ne(e),d){case f.TOUCH_ROTATE:if(!1===c.enableRotate)return;V(e),c.update();break;case f.TOUCH_PAN:if(!1===c.enablePan)return;X(e),c.update();break;case f.TOUCH_DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&Y(e),c.enablePan&&X(e)}(e),c.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&Y(e),c.enableRotate&&V(e)}(e),c.update();break;default:d=f.NONE}}(e):function(e){if(!1===c.enabled)return;switch(d){case f.ROTATE:if(!1===c.enableRotate)return;!function(e){k.set(e.clientX,e.clientY),x.subVectors(k,S).multiplyScalar(c.rotateSpeed);var t=c.domElement;O(2*Math.PI*x.x/t.clientHeight),_(2*Math.PI*x.y/t.clientHeight),S.copy(k),c.update()}(e);break;case f.DOLLY:if(!1===c.enableZoom)return;!function(e){B.set(e.clientX,e.clientY),T.subVectors(B,L),T.y>0?z(P()):T.y<0&&H(P()),L.copy(B),c.update()}(e);break;case f.PAN:if(!1===c.enablePan)return;!function(e){R.set(e.clientX,e.clientY),A.subVectors(R,w).multiplyScalar(c.panSpeed),N(A.x,A.y),w.copy(R),c.update()}(e)}}(e))}function Q(e){te(e),0===E.length&&(c.domElement.releasePointerCapture(e.pointerId),c.domElement.removeEventListener("pointermove",q),c.domElement.removeEventListener("pointerup",Q)),c.dispatchEvent(jn),d=f.NONE}function Z(e){te(e)}function J(e){!1!==c.enabled&&!1!==c.enableZoom&&d===f.NONE&&(e.preventDefault(),c.dispatchEvent(Fn),function(e){e.deltaY<0?H(P()):e.deltaY>0&&z(P()),c.update()}(e),c.dispatchEvent(jn))}function $(e){!1!==c.enabled&&!1!==c.enablePan&&function(e){var t=!1;switch(e.code){case c.keys.UP:N(0,c.keyPanSpeed),t=!0;break;case c.keys.BOTTOM:N(0,-c.keyPanSpeed),t=!0;break;case c.keys.LEFT:N(c.keyPanSpeed,0),t=!0;break;case c.keys.RIGHT:N(-c.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),c.update())}(e)}function ee(e){!1!==c.enabled&&e.preventDefault()}function te(e){delete C[e.pointerId];for(var t=0;t<E.length;t++)if(E[t].pointerId==e.pointerId)return void E.splice(t,1)}function ne(t){var n=C[t.pointerId];void 0===n&&(n=new e.Vector2,C[t.pointerId]=n),n.set(t.pageX,t.pageY)}function ie(e){var t=e.pointerId===E[0].pointerId?E[1]:E[0];return C[t.pointerId]}return c.domElement.addEventListener("contextmenu",ee),c.domElement.addEventListener("pointerdown",K),c.domElement.addEventListener("pointercancel",Z),c.domElement.addEventListener("wheel",J,{passive:!1}),r.update(),r}return tt(n,e.EventDispatcher),Qe(n)}(),Gn=!!document.createElement("canvas").getContext("webgl2"),Vn=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Xn=navigator.userAgent;Xn.indexOf("Android")>-1||Xn.indexOf("Adr");var Yn=!!Xn.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);Xn.indexOf("XiaoMi"),navigator.vendor.match(/apple/i)&&!Xn.match(/crios/i)&&!Xn.match(/fxios/i)&&Xn.match(/Opera|OPT\//);var Kn=new Y,qn=new Y,Qn=new Se,Zn=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16711680;Ye(this,t);var o=new L,a=e.geometry.attributes.normal.count,s=new ke(2*a*3,3);return o.setAttribute("position",s),(n=Xe(this,t,[o,new k({color:r,toneMapped:!1})])).object=e,n.size=i,n.type="VertexNormalsHelper",n.matrixAutoUpdate=!1,n.update(),n}return tt(t,E),Qe(t,[{key:"update",value:function(){this.object.updateMatrixWorld(!0),Qn.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry;if(n)for(var i=n.attributes.position,r=n.attributes.normal,o=0,a=0,s=i.count;a<s;a++)Kn.fromBufferAttribute(i,a).applyMatrix4(e),qn.fromBufferAttribute(r,a),qn.applyMatrix3(Qn).normalize().multiplyScalar(this.size).add(Kn),t.setXYZ(o,Kn.x,Kn.y,Kn.z),o+=1,t.setXYZ(o,qn.x,qn.y,qn.z),o+=1;t.needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(),Jn=function e(){var t=0,n=document.createElement("div");function i(e){return n.appendChild(e.dom),e}function r(e){for(var i=0;i<n.children.length;i++)n.children[i].style.display=i===e?"block":"none";t=e}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(e){e.preventDefault(),r(++t%n.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,l=i(new e.Panel("FPS","#0ff","#002")),u=i(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=i(new e.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:n,addPanel:i,showPanel:r,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(u.update(e-o,200),e>=a+1e3&&(l.update(1e3*s/(e-a),100),a=e,s=0,h)){var t=performance.memory;h.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:n,setMode:r}};Jn.Panel=function(e,t,n){var i=1/0,r=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,u=3*a,h=2*a,c=3*a,f=15*a,d=74*a,m=30*a,p=document.createElement("canvas");p.width=s,p.height=l,p.style.cssText="width:80px;height:48px";var v=p.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,s,l),v.fillStyle=t,v.fillText(e,u,h),v.fillRect(c,f,d,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(c,f,d,m),{dom:p,update:function(l,g){i=Math.min(i,l),r=Math.max(r,l),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,s,f),v.fillStyle=t,v.fillText(o(l)+" "+e+" ("+o(i)+"-"+o(r)+")",u,h),v.drawImage(p,c+a,f,d-a,m,c,f,d-a,m),v.fillRect(c+d-a,f,a,m),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(c+d-a,f,a,o((1-l/g)*m))}}};var $n=Jn,ei=Qe((function e(){Ye(this,e)})),ti=function(e){function t(){return Ye(this,t),Xe(this,t)}return tt(t,ei),Qe(t,[{key:"write",value:function(e,t){var n=new Image;n.src=t,n.onload=function(){var t=document.createElement("canvas");t.style.display="none",document.body.appendChild(t),t.getContext("2d").drawImage(n,0,0);var i=t.toDataURL("image/jpeg");localStorage.setItem(e,i)}}},{key:"read",value:function(e){return localStorage.getItem(e)}},{key:"isExist",value:function(e){return!!this.read(e)}}])}(),ni={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"},ii=function(){return Qe((function e(){Ye(this,e),this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}),[{key:"setSize",value:function(){}},{key:"render",value:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},{key:"dispose",value:function(){}}])}(),ri=new D(-1,1,1,-1,0,1),oi=new(function(e){function t(){var e;return Ye(this,t),(e=Xe(this,t)).setAttribute("position",new ke([-1,3,0,-1,-1,0,3,-1,0],3)),e.setAttribute("uv",new ke([0,2,0,0,2,0],2)),e}return tt(t,L),Qe(t)}()),ai=function(){return Qe((function e(t){Ye(this,e),this._mesh=new T(oi,t)}),[{key:"dispose",value:function(){this._mesh.geometry.dispose()}},{key:"render",value:function(e){e.render(this._mesh,ri)}},{key:"material",get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}])}(),si=function(e){function t(e,n){var i;return Ye(this,t),(i=Xe(this,t)).textureID=void 0!==n?n:"tDiffuse",e instanceof xe?(i.uniforms=e.uniforms,i.material=e):e&&(i.uniforms=we.clone(e.uniforms),i.material=new xe({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:i.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),i.fsQuad=new ai(i.material),i}return tt(t,ii),Qe(t,[{key:"render",value:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}},{key:"dispose",value:function(){this.material.dispose(),this.fsQuad.dispose()}}])}(),li=function(e){function t(e,n){var i;return Ye(this,t),(i=Xe(this,t)).scene=e,i.camera=n,i.clear=!0,i.needsSwap=!1,i.inverse=!1,i}return tt(t,ii),Qe(t,[{key:"render",value:function(e,t,n){var i,r,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(i=0,r=1):(i=1,r=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,i,4294967295),a.buffers.stencil.setClear(r),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.color.setMask(!0),a.buffers.depth.setMask(!0),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}}])}(),ui=function(e){function t(){var e;return Ye(this,t),(e=Xe(this,t)).needsSwap=!1,e}return tt(t,ii),Qe(t,[{key:"render",value:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}])}(),hi=function(){return Qe((function e(t,n){if(Ye(this,e),this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===n){var i=t.getSize(new R);this._width=i.width,this._height=i.height,(n=new Re(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:me})).texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new si(ni),this.copyPass.material.blending=Ae,this.clock=new Le}),[{key:"swapBuffers",value:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}},{key:"addPass",value:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"insertPass",value:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"removePass",value:function(e){var t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}},{key:"isLastEnabledPass",value:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}},{key:"render",value:function(e){void 0===e&&(e=this.clock.getDelta());for(var t=this.renderer.getRenderTarget(),n=!1,i=0,r=this.passes.length;i<r;i++){var o=this.passes[i];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),o.needsSwap){if(n){var a=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==li&&(o instanceof li?n=!0:o instanceof ui&&(n=!1))}}this.renderer.setRenderTarget(t)}},{key:"reset",value:function(e){if(void 0===e){var t=this.renderer.getSize(new R);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}},{key:"setSize",value:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(n,i)}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}},{key:"dispose",value:function(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}])}(),ci=function(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Ye(this,t),(i=Xe(this,t)).scene=e,i.camera=n,i.overrideMaterial=r,i.clearColor=o,i.clearAlpha=a,i.clear=!0,i.clearDepth=!1,i.needsSwap=!1,i._oldClearColor=new l,i}return tt(t,ii),Qe(t,[{key:"render",value:function(e,t,n){var i,r,o=e.autoClear;e.autoClear=!1,null!==this.overrideMaterial&&(r=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),null!==this.clearAlpha&&(i=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(i),null!==this.overrideMaterial&&(this.scene.overrideMaterial=r),e.autoClear=o}}])}(),fi={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new l(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"},di=function(e){function t(e,n,i,r){var o;Ye(this,t),(o=Xe(this,t)).strength=void 0!==n?n:1,o.radius=i,o.threshold=r,o.resolution=void 0!==e?new R(e.x,e.y):new R(256,256),o.clearColor=new l(0,0,0),o.renderTargetsHorizontal=[],o.renderTargetsVertical=[],o.nMips=5;var a=Math.round(o.resolution.x/2),u=Math.round(o.resolution.y/2);o.renderTargetBright=new Re(a,u,{type:me}),o.renderTargetBright.texture.name="UnrealBloomPass.bright",o.renderTargetBright.texture.generateMipmaps=!1;for(var h=0;h<o.nMips;h++){var c=new Re(a,u,{type:me});c.texture.name="UnrealBloomPass.h"+h,c.texture.generateMipmaps=!1,o.renderTargetsHorizontal.push(c);var f=new Re(a,u,{type:me});f.texture.name="UnrealBloomPass.v"+h,f.texture.generateMipmaps=!1,o.renderTargetsVertical.push(f),a=Math.round(a/2),u=Math.round(u/2)}var d=fi;o.highPassUniforms=we.clone(d.uniforms),o.highPassUniforms.luminosityThreshold.value=r,o.highPassUniforms.smoothWidth.value=.01,o.materialHighPassFilter=new xe({uniforms:o.highPassUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}),o.separableBlurMaterials=[];var m=[3,5,7,9,11];a=Math.round(o.resolution.x/2),u=Math.round(o.resolution.y/2);for(var p=0;p<o.nMips;p++)o.separableBlurMaterials.push(o.getSeperableBlurMaterial(m[p])),o.separableBlurMaterials[p].uniforms.invSize.value=new R(1/a,1/u),a=Math.round(a/2),u=Math.round(u/2);o.compositeMaterial=o.getCompositeMaterial(o.nMips),o.compositeMaterial.uniforms.blurTexture1.value=o.renderTargetsVertical[0].texture,o.compositeMaterial.uniforms.blurTexture2.value=o.renderTargetsVertical[1].texture,o.compositeMaterial.uniforms.blurTexture3.value=o.renderTargetsVertical[2].texture,o.compositeMaterial.uniforms.blurTexture4.value=o.renderTargetsVertical[3].texture,o.compositeMaterial.uniforms.blurTexture5.value=o.renderTargetsVertical[4].texture,o.compositeMaterial.uniforms.bloomStrength.value=n,o.compositeMaterial.uniforms.bloomRadius.value=.1;o.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],o.bloomTintColors=[new Y(1,1,1),new Y(1,1,1),new Y(1,1,1),new Y(1,1,1),new Y(1,1,1)],o.compositeMaterial.uniforms.bloomTintColors.value=o.bloomTintColors;var v=ni;return o.copyUniforms=we.clone(v.uniforms),o.blendMaterial=new xe({uniforms:o.copyUniforms,vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,blending:Be,depthTest:!1,depthWrite:!1,transparent:!0}),o.enabled=!0,o.needsSwap=!1,o._oldClearColor=new l,o.oldClearAlpha=1,o.basic=new s,o.fsQuad=new ai(null),o}return tt(t,ii),Qe(t,[{key:"dispose",value:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(var t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose();for(var n=0;n<this.separableBlurMaterials.length;n++)this.separableBlurMaterials[n].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}},{key:"setSize",value:function(e,t){var n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(var r=0;r<this.nMips;r++)this.renderTargetsHorizontal[r].setSize(n,i),this.renderTargetsVertical[r].setSize(n,i),this.separableBlurMaterials[r].uniforms.invSize.value=new R(1/n,1/i),n=Math.round(n/2),i=Math.round(i/2)}},{key:"render",value:function(e,n,i,r,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();var a=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var s=this.renderTargetBright,l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=s.texture,this.separableBlurMaterials[l].uniforms.direction.value=t.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=t.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this.fsQuad.render(e),s=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=a}},{key:"getSeperableBlurMaterial",value:function(e){for(var t=[],n=0;n<e;n++)t.push(.39894*Math.exp(-.5*n*n/(e*e))/e);return new xe({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new R(.5,.5)},direction:{value:new R(.5,.5)},gaussianCoefficients:{value:t}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 invSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float gaussianCoefficients[KERNEL_RADIUS];\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tfloat weightSum = gaussianCoefficients[0];\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianCoefficients[i];\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}},{key:"getCompositeMaterial",value:function(e){return new xe({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}])}();di.BlurDirectionX=new R(1,0),di.BlurDirectionY=new R(0,1);var mi,pi,vi,gi,yi,bi={name:"OutputShader",uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:"\n\t\tprecision highp float;\n\n\t\tuniform mat4 modelViewMatrix;\n\t\tuniform mat4 projectionMatrix;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\t\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\t#include <tonemapping_pars_fragment>\n\t\t#include <colorspace_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\n\t\t\t// tone mapping\n\n\t\t\t#ifdef LINEAR_TONE_MAPPING\n\n\t\t\t\tgl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( REINHARD_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( CINEON_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = OptimizedCineonToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( ACES_FILMIC_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( AGX_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );\n\n\t\t\t#elif defined( NEUTRAL_TONE_MAPPING )\n\n\t\t\t\tgl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );\n\n\t\t\t#endif\n\n\t\t\t// color space\n\n\t\t\t#ifdef SRGB_TRANSFER\n\n\t\t\t\tgl_FragColor = sRGBTransferOETF( gl_FragColor );\n\n\t\t\t#endif\n\n\t\t}"},Si=function(e){function t(){var e;Ye(this,t),e=Xe(this,t);var n=bi;return e.uniforms=we.clone(n.uniforms),e.material=new Ie({name:n.name,uniforms:e.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}),e.fsQuad=new ai(e.material),e._outputColorSpace=null,e._toneMapping=null,e}return tt(t,ii),Qe(t,[{key:"render",value:function(e,t,n){this.uniforms.tDiffuse.value=n.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,this._outputColorSpace===e.outputColorSpace&&this._toneMapping===e.toneMapping||(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},j.getTransfer(this._outputColorSpace)===Te&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===Ee?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===Ce?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===Me?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===Pe?this.material.defines.ACES_FILMIC_TONE_MAPPING="":this._toneMapping===Oe?this.material.defines.AGX_TONE_MAPPING="":this._toneMapping===_e&&(this.material.defines.NEUTRAL_TONE_MAPPING=""),this.material.needsUpdate=!0),!0===this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}},{key:"dispose",value:function(){this.material.dispose(),this.fsQuad.dispose()}}])}(),ki={name:"SMAAEdgesShader",defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new R(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvoid SMAAEdgeDetectionVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAAEdgeDetectionVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {\n\t\t\tvec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );\n\n\t\t\t// Calculate color deltas:\n\t\t\tvec4 delta;\n\t\t\tvec3 C = texture2D( colorTex, texcoord ).rgb;\n\n\t\t\tvec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;\n\t\t\tvec3 t = abs( C - Cleft );\n\t\t\tdelta.x = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;\n\t\t\tt = abs( C - Ctop );\n\t\t\tdelta.y = max( max( t.r, t.g ), t.b );\n\n\t\t\t// We do the usual threshold:\n\t\t\tvec2 edges = step( threshold, delta.xy );\n\n\t\t\t// Then discard if there is no edge:\n\t\t\tif ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )\n\t\t\t\tdiscard;\n\n\t\t\t// Calculate right and bottom deltas:\n\t\t\tvec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;\n\t\t\tt = abs( C - Cright );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;\n\t\t\tt = abs( C - Cbottom );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the maximum delta in the direct neighborhood:\n\t\t\tfloat maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );\n\n\t\t\t// Calculate left-left and top-top deltas:\n\t\t\tvec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;\n\t\t\tt = abs( C - Cleftleft );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;\n\t\t\tt = abs( C - Ctoptop );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the final maximum delta:\n\t\t\tmaxDelta = max( max( maxDelta, delta.z ), delta.w );\n\n\t\t\t// Local contrast adaptation in action:\n\t\t\tedges.xy *= step( 0.5 * maxDelta, delta.xy );\n\n\t\t\treturn vec4( edges, 0.0, 0.0 );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );\n\n\t\t}"},xi={name:"SMAAWeightsShader",defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new R(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\t\tvarying vec2 vPixcoord;\n\n\t\tvoid SMAABlendingWeightCalculationVS( vec2 texcoord ) {\n\t\t\tvPixcoord = texcoord / resolution;\n\n\t\t\t// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components\n\n\t\t\t// And these for the searches, they indicate the ends of the loops:\n\t\t\tvOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAABlendingWeightCalculationVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tArea;\n\t\tuniform sampler2D tSearch;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[3];\n\t\tvarying vec2 vPixcoord;\n\n\t\t#if __VERSION__ == 100\n\t\tvec2 round( vec2 x ) {\n\t\t\treturn sign( x ) * floor( abs( x ) + 0.5 );\n\t\t}\n\t\t#endif\n\n\t\tfloat SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {\n\t\t\t// Not required if searchTex accesses are set to point:\n\t\t\t// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);\n\t\t\t// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +\n\t\t\t//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\n\t\t\te.r = bias + e.r * scale;\n\t\t\treturn 255.0 * texture2D( searchTex, e, 0.0 ).r;\n\t\t}\n\n\t\tfloat SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\t/**\n\t\t\t\t* @PSEUDO_GATHER4\n\t\t\t\t* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to\n\t\t\t\t* sample between edge, thus fetching four edges in a row.\n\t\t\t\t* Sampling with different offsets in each direction allows to disambiguate\n\t\t\t\t* which edges are active from the four fetched ones.\n\t\t\t\t*/\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\t// We correct the previous (-0.25, -0.125) offset we applied:\n\t\t\ttexcoord.x += 0.25 * resolution.x;\n\n\t\t\t// The searches are bias by 1, so adjust the coords accordingly:\n\t\t\ttexcoord.x += resolution.x;\n\n\t\t\t// Disambiguate the length added by the last step:\n\t\t\ttexcoord.x += 2.0 * resolution.x; // Undo last step\n\t\t\ttexcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.x -= 0.25 * resolution.x;\n\t\t\ttexcoord.x -= resolution.x;\n\t\t\ttexcoord.x -= 2.0 * resolution.x;\n\t\t\ttexcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tfloat SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tvec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {\n\t\t\t// Rounding prevents precision errors of bilinear filtering:\n\t\t\tvec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;\n\n\t\t\t// We do a scale and bias for mapping to texel space:\n\t\t\ttexcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );\n\n\t\t\t// Move to proper place, according to the subpixel offset:\n\t\t\ttexcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\n\n\t\t\treturn texture2D( areaTex, texcoord, 0.0 ).rg;\n\t\t}\n\n\t\tvec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {\n\t\t\tvec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\t\t\tvec2 e = texture2D( edgesTex, texcoord ).rg;\n\n\t\t\tif ( e.g > 0.0 ) { // Edge at north\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the left:\n\t\t\t\tvec2 coords;\n\t\t\t\tcoords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );\n\t\t\t\tcoords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)\n\t\t\t\td.x = coords.x;\n\n\t\t\t\t// Now fetch the left crossing edges, two at a time using bilinear\n\t\t\t\t// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to\n\t\t\t\t// discern what value each edge has:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).r;\n\n\t\t\t\t// Find the distance to the right:\n\t\t\t\tcoords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );\n\t\t\t\td.y = coords.x;\n\n\t\t\t\t// We want the distances to be in pixel units (doing this here allow to\n\t\t\t\t// better interleave arithmetic and memory accesses):\n\t\t\t\td = d / resolution.x - pixcoord.x;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the right crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;\n\n\t\t\t\t// Ok, we know how this pattern looks like, now it is time for getting\n\t\t\t\t// the actual area:\n\t\t\t\tweights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );\n\t\t\t}\n\n\t\t\tif ( e.r > 0.0 ) { // Edge at west\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the top:\n\t\t\t\tvec2 coords;\n\n\t\t\t\tcoords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );\n\t\t\t\tcoords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;\n\t\t\t\td.x = coords.y;\n\n\t\t\t\t// Fetch the top crossing edges:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).g;\n\n\t\t\t\t// Find the distance to the bottom:\n\t\t\t\tcoords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );\n\t\t\t\td.y = coords.y;\n\n\t\t\t\t// We want the distances to be in pixel units:\n\t\t\t\td = d / resolution.y - pixcoord.y;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the bottom crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;\n\n\t\t\t\t// Get the area for this direction:\n\t\t\t\tweights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );\n\t\t\t}\n\n\t\t\treturn weights;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );\n\n\t\t}"},wi={name:"SMAABlendShader",uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new R(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvoid SMAANeighborhoodBlendingVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAANeighborhoodBlendingVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tColor;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {\n\t\t\t// Fetch the blending weights for current pixel:\n\t\t\tvec4 a;\n\t\t\ta.xz = texture2D( blendTex, texcoord ).xz;\n\t\t\ta.y = texture2D( blendTex, offset[ 1 ].zw ).g;\n\t\t\ta.w = texture2D( blendTex, offset[ 1 ].xy ).a;\n\n\t\t\t// Is there any blending weight with a value greater than 0.0?\n\t\t\tif ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {\n\t\t\t\treturn texture2D( colorTex, texcoord, 0.0 );\n\t\t\t} else {\n\t\t\t\t// Up to 4 lines can be crossing a pixel (one through each edge). We\n\t\t\t\t// favor blending by choosing the line with the maximum weight for each\n\t\t\t\t// direction:\n\t\t\t\tvec2 offset;\n\t\t\t\toffset.x = a.a > a.b ? a.a : -a.b; // left vs. right\n\t\t\t\toffset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs\n\n\t\t\t\t// Then we go in the direction that has the maximum weight:\n\t\t\t\tif ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical\n\t\t\t\t\toffset.y = 0.0;\n\t\t\t\t} else {\n\t\t\t\t\toffset.x = 0.0;\n\t\t\t\t}\n\n\t\t\t\t// Fetch the opposite color and lerp by hand:\n\t\t\t\tvec4 C = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\ttexcoord += sign( offset ) * resolution;\n\t\t\t\tvec4 Cop = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\tfloat s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );\n\n\t\t\t\t// WebGL port note: Added gamma correction\n\t\t\t\tC.xyz = pow(C.xyz, vec3(2.2));\n\t\t\t\tCop.xyz = pow(Cop.xyz, vec3(2.2));\n\t\t\t\tvec4 mixed = mix(C, Cop, s);\n\t\t\t\tmixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));\n\n\t\t\t\treturn mixed;\n\t\t\t}\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );\n\n\t\t}"},Ri=function(e){function t(e,n){var i;Ye(this,t),(i=Xe(this,t)).edgesRT=new Re(e,n,{depthBuffer:!1,type:me}),i.edgesRT.texture.name="SMAAPass.edges",i.weightsRT=new Re(e,n,{depthBuffer:!1,type:me}),i.weightsRT.texture.name="SMAAPass.weights";var r=i,o=new Image;o.src=i.getAreaTexture(),o.onload=function(){r.areaTexture.needsUpdate=!0},i.areaTexture=new ae,i.areaTexture.name="SMAAPass.area",i.areaTexture.image=o,i.areaTexture.minFilter=v,i.areaTexture.generateMipmaps=!1,i.areaTexture.flipY=!1;var a=new Image;return a.src=i.getSearchTexture(),a.onload=function(){r.searchTexture.needsUpdate=!0},i.searchTexture=new ae,i.searchTexture.name="SMAAPass.search",i.searchTexture.image=a,i.searchTexture.magFilter=Q,i.searchTexture.minFilter=Q,i.searchTexture.generateMipmaps=!1,i.searchTexture.flipY=!1,i.uniformsEdges=we.clone(ki.uniforms),i.uniformsEdges.resolution.value.set(1/e,1/n),i.materialEdges=new xe({defines:Object.assign({},ki.defines),uniforms:i.uniformsEdges,vertexShader:ki.vertexShader,fragmentShader:ki.fragmentShader}),i.uniformsWeights=we.clone(xi.uniforms),i.uniformsWeights.resolution.value.set(1/e,1/n),i.uniformsWeights.tDiffuse.value=i.edgesRT.texture,i.uniformsWeights.tArea.value=i.areaTexture,i.uniformsWeights.tSearch.value=i.searchTexture,i.materialWeights=new xe({defines:Object.assign({},xi.defines),uniforms:i.uniformsWeights,vertexShader:xi.vertexShader,fragmentShader:xi.fragmentShader}),i.uniformsBlend=we.clone(wi.uniforms),i.uniformsBlend.resolution.value.set(1/e,1/n),i.uniformsBlend.tDiffuse.value=i.weightsRT.texture,i.materialBlend=new xe({uniforms:i.uniformsBlend,vertexShader:wi.vertexShader,fragmentShader:wi.fragmentShader}),i.fsQuad=new ai(null),i}return tt(t,ii),Qe(t,[{key:"render",value:function(e,t,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}},{key:"setSize",value:function(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}},{key:"getAreaTexture",value:function(){return"data:image/png;base64,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"}},{key:"getSearchTexture",value:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}},{key:"dispose",value:function(){this.edgesRT.dispose(),this.weightsRT.dispose(),this.areaTexture.dispose(),this.searchTexture.dispose(),this.materialEdges.dispose(),this.materialWeights.dispose(),this.materialBlend.dispose(),this.fsQuad.dispose()}}])}(),Ai={name:"FXAAShader",uniforms:{tDiffuse:{value:null},resolution:{value:new R(1/1024,1/512)}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t\t//----------------------------------------------------------------------------------\n\t\t// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n\t\t// SDK Version: v3.00\n\t\t// Email:       gameworks@nvidia.com\n\t\t// Site:        http://developer.nvidia.com/\n\t\t//\n\t\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t\t//\n\t\t// Redistribution and use in source and binary forms, with or without\n\t\t// modification, are permitted provided that the following conditions\n\t\t// are met:\n\t\t//  * Redistributions of source code must retain the above copyright\n\t\t//    notice, this list of conditions and the following disclaimer.\n\t\t//  * Redistributions in binary form must reproduce the above copyright\n\t\t//    notice, this list of conditions and the following disclaimer in the\n\t\t//    documentation and/or other materials provided with the distribution.\n\t\t//  * Neither the name of NVIDIA CORPORATION nor the names of its\n\t\t//    contributors may be used to endorse or promote products derived\n\t\t//    from this software without specific prior written permission.\n\t\t//\n\t\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t\t// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t\t//\n\t\t//----------------------------------------------------------------------------------\n\n\t\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t//     For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t\t#endif\n\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t\t/*--------------------------------------------------------------------------*/\n\n\t\t#define NUM_SAMPLES 5\n\n\t\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\t\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t\t}\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t\t============================================================================*/\n\n\t\t/*--------------------------------------------------------------------------*/\n\t\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t// locate the edge\n\t\t\t\tvec2 dirToEdge;\n\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t// . 2 .      . 1 .\n\t\t\t\t// 1 0 2  ~=  0 0 1\n\t\t\t\t// . 1 .      . 0 .\n\n\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t// . 1 .\n\t\t\t\t// 0 0 1\n\t\t\t\t// . 0 H\n\n\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t// V 1 .\n\t\t\t\t// 0 0 1\n\t\t\t\t// . 0 .\n\n\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t// 1 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t// do a simple blur\n\t\t\t\t\treturn mix(\n\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t.4\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 .      1\n\t\t\t// 1 0 1  ->  0\n\t\t\t// . 0 .      1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\titerationsUsed = i;\n\n\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\tif(!doneN) {\n\t\t\t\t\tnDist += increment;\n\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t}\n\n\t\t\t\tif(!doneP) {\n\t\t\t\t\tpDist += increment;\n\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t}\n\n\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\trgbaM,\n\t\t\t\trgbaN,\n\t\t\t\tdist * .5\n\t\t\t);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\tvUv,\n\t\t\t\ttDiffuse,\n\t\t\t\tresolution,\n\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t\t}\n\t"},Li=function(e){function t(e,n,i,r){var o;Ye(this,t),(o=Xe(this,t)).scene=e,o.camera=n,o.sampleLevel=4,o.unbiased=!0,o.clearColor=void 0!==i?i:0,o.clearAlpha=void 0!==r?r:0,o._oldClearColor=new l;var a=ni;return o.copyUniforms=we.clone(a.uniforms),o.copyMaterial=new xe({uniforms:o.copyUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,premultipliedAlpha:!0,blending:Be}),o.fsQuad=new ai(o.copyMaterial),o}return tt(t,ii),Qe(t,[{key:"dispose",value:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null),this.copyMaterial.dispose(),this.fsQuad.dispose()}},{key:"setSize",value:function(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)}},{key:"render",value:function(e,t,n){this.sampleRenderTarget||(this.sampleRenderTarget=new Re(n.width,n.height,{type:me}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");var i=Bi[Math.max(0,Math.min(this.sampleLevel,5))],r=e.autoClear;e.autoClear=!1,e.getClearColor(this._oldClearColor);var o=e.getClearAlpha(),a=1/i.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;var s={fullWidth:n.width,fullHeight:n.height,offsetX:0,offsetY:0,width:n.width,height:n.height},l=Object.assign({},this.camera.view);l.enabled&&Object.assign(s,l);for(var u=0;u<i.length;u++){var h=i[u];this.camera.setViewOffset&&this.camera.setViewOffset(s.fullWidth,s.fullHeight,s.offsetX+.0625*h[0],s.offsetY+.0625*h[1],s.width,s.height);var c=a;if(this.unbiased)c+=.03125*((u+.5)/i.length-.5);this.copyUniforms.opacity.value=c,e.setClearColor(this.clearColor,this.clearAlpha),e.setRenderTarget(this.sampleRenderTarget),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.renderToScreen?null:t),0===u&&(e.setClearColor(0,0),e.clear()),this.fsQuad.render(e)}this.camera.setViewOffset&&l.enabled?this.camera.setViewOffset(l.fullWidth,l.fullHeight,l.offsetX,l.offsetY,l.width,l.height):this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=r,e.setClearColor(this._oldClearColor,o)}}])}(),Bi=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]],Ti=function(e){function t(e,n,i,r){var o;return Ye(this,t),(o=Xe(this,t,[e,n,i,r])).sampleLevel=0,o.accumulate=!1,o.accumulateIndex=-1,o}return tt(t,Li),Qe(t,[{key:"render",value:function(e,n,i,r){if(!1===this.accumulate)return $e(et(t.prototype),"render",this).call(this,e,n,i,r),void(this.accumulateIndex=-1);var o=Ei[5];void 0===this.sampleRenderTarget&&(this.sampleRenderTarget=new Re(i.width,i.height,{type:me}),this.sampleRenderTarget.texture.name="TAARenderPass.sample"),void 0===this.holdRenderTarget&&(this.holdRenderTarget=new Re(i.width,i.height,{type:me}),this.holdRenderTarget.texture.name="TAARenderPass.hold"),-1===this.accumulateIndex&&($e(et(t.prototype),"render",this).call(this,e,this.holdRenderTarget,i,r),this.accumulateIndex=0);var a=e.autoClear;e.autoClear=!1,e.getClearColor(this._oldClearColor);var s=e.getClearAlpha(),l=1/o.length;if(this.accumulateIndex>=0&&this.accumulateIndex<o.length){this.copyUniforms.opacity.value=l,this.copyUniforms.tDiffuse.value=n.texture;for(var u=Math.pow(2,this.sampleLevel),h=0;h<u;h++){var c=o[this.accumulateIndex];if(this.camera.setViewOffset&&this.camera.setViewOffset(i.width,i.height,.0625*c[0],.0625*c[1],i.width,i.height),e.setRenderTarget(n),e.setClearColor(this.clearColor,this.clearAlpha),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.sampleRenderTarget),0===this.accumulateIndex&&(e.setClearColor(0,0),e.clear()),this.fsQuad.render(e),this.accumulateIndex++,this.accumulateIndex>=o.length)break}this.camera.clearViewOffset&&this.camera.clearViewOffset()}e.setClearColor(this.clearColor,this.clearAlpha);var f=this.accumulateIndex*l;f>0&&(this.copyUniforms.opacity.value=1,this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture,e.setRenderTarget(n),e.clear(),this.fsQuad.render(e)),f<1&&(this.copyUniforms.opacity.value=1-f,this.copyUniforms.tDiffuse.value=this.holdRenderTarget.texture,e.setRenderTarget(n),this.fsQuad.render(e)),e.autoClear=a,e.setClearColor(this._oldClearColor,s)}},{key:"dispose",value:function(){$e(et(t.prototype),"dispose",this).call(this),this.holdRenderTarget&&this.holdRenderTarget.dispose()}}])}(),Ei=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]],Ci={name:"GammaCorrectionShader",uniforms:{tDiffuse:{value:null}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 tex = texture2D( tDiffuse, vUv );\n\n\t\t\tgl_FragColor = sRGBTransferOETF( tex );\n\n\t\t}"},Mi={debug:!0,player:{startPoint:[0,0,3],startDirection:[0,0,-1]},agent:{startPoint:[0,0,0],startDirection:[0,0,1]},cameraHeight:1.2,distCamera2Player:5,bloom:{exposure:2.2},mirror:{color:5468294},host:"api.stone.techbrood.com",port:3001,assetsPath:"assets/models/",animateLibrary:"https://techbrood.com/myavatar/assets/anis/readyplayer/v1/masculine/glb/",gui:{app:"app",engine:"myavatar"},llm:"spark",tts:"axure",asr:"",spark:{chatUrl:"https://spark-api.xf-yun.com/v3.5/chat",APPID:"55f553c7",API_SECRET:"YmUyOGIzOTk0NGE2ZDMyYmFhNTcwMGQ0",API_KEY:"c93cc1397fa9a6179d8d6a6c04e7b1c7",tts:{url:"wss://tts-api.xfyun.cn/v2/tts",voice:50,speed:50},SEPERATORS:["。","；","！","？",";","!","?"]},axure:{host:"https://api.stone.techbrood.com:5443"}},Pi=function(){return Qe((function e(t){Ye(this,e),this._name=t,this.components={},this.handlers={},this._parent=null,this.dead=!1,this._position=new Y,this._rotation=new c,this.isEntity=!0}),[{key:"init",value:function(){for(var e in this.components)this.components[e].init()}},{key:"dispose",value:function(){for(var e in this.components)this.components[e].dispose();this.components=null,this.parent=null,this.handlers=null}},{key:"registerHandler",value:function(e,t){e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t)}},{key:"setParent",value:function(e){this._parent=e}},{key:"manager",get:function(){return this._parent}},{key:"setName",value:function(e){this._name=e}},{key:"name",get:function(){return this._name}},{key:"parent",get:function(){return this._parent}},{key:"position",get:function(){return this._position}},{key:"quaternion",get:function(){return this._rotation}},{key:"setPosition",value:function(e){Array.isArray(e)&&(e=(new Y).fromArray(e)),this._position.copy(e),this.broadcast({topic:"update.position",value:this._position})}},{key:"setRotation",value:function(e){Array.isArray(e)&&(e=(new De).fromArray(e)),e=(new c).setFromEuler(e),this._rotation.copy(e),this.broadcast({topic:"update.rotation",value:this._rotation})}},{key:"setQuaternion",value:function(e){Array.isArray(e)&&(e=c.fromArray(e)),this._rotation.copy(e),this.broadcast({topic:"update.rotation",value:this._rotation})}},{key:"setActive",value:function(e){this._parent.setActive(this,e)}},{key:"setDead",value:function(){this.dead=!0}},{key:"addComponent",value:(e=Ve(it().mark((function e(t,n){return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setParent(this),this.components[t]=n,e.next=4,n.init();case 4:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"getComponent",value:function(e){return this.components[e]}},{key:"find",value:function(e){return this._parent.get(e)}},{key:"broadcast",value:function(e){if(e.topic in this.handlers){var t,n=Ze(this.handlers[e.topic]);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"update",value:function(e){for(var t in this.components)this.components[t].update(e)}}]);var e}(),Oi=new Le,_i=function e(){var t=Oi.getDelta();null!=ht.stats&&ht.stats.update(),Ss.update(t),mi=requestAnimationFrame(e)},Ii="perspective",Di=2.5,Ni=1,zi=null,Hi="fx",Ui=null,Fi=null,ji=null;function Wi(){if("orthographic"===Ii?(Ni=zi.offsetWidth/zi.offsetHeight,pi.left=-Di*Ni/2,pi.right=Di*Ni/2,pi.top=Di/2,pi.bottom=-Di/2,pi.aspect=Ni):pi.aspect=zi.offsetWidth/zi.offsetHeight,pi.updateProjectionMatrix(),gi.setSize(zi.offsetWidth,zi.offsetHeight),vi&&vi.background&&yi){var e=pi.aspect,t=yi.image.naturalWidth/yi.image.naturalHeight/e;vi.background.offset.x=t>1?(1-1/t)/2:0,vi.background.repeat.x=t>1?1/t:1,vi.background.offset.y=t>1?0:(1-t)/2,vi.background.repeat.y=t>1?1:t}}function Gi(){Yn&&mi&&cancelAnimationFrame(mi)}function Vi(){Yn&&requestAnimationFrame(_i)}var Xi,Yi=function(t){function n(e,t){var i,r,o;return Ye(this,n),(o=Xe(this,n,[e])).opts=t||{},o.container=null!==(i=t.container)&&void 0!==i?i:null,o.scene=null!==(r=t.scene)&&void 0!==r?r:null,o.camera=null,o.renderer=null,o.orbitControls=null,o.lights=[],o.ground=null,o.bg=null,o.pmremGenerator=null,ht.stage=o,o}return tt(n,Pi),Qe(n,[{key:"init",value:function(){var e,t=null!==(e=this.opts.containerId)&&void 0!==e?e:"myavatar";return zi=document.getElementById(t),ht.container=zi,ht.useInnerScene&&(this.initCamera(),this.initRender(),this.initStats(),this.setLights(),this.setControls(),window.onresize=Wi,window.onpagehide=Gi,window.onpageshow=Vi),this}},{key:"render",value:function(){"fx"==Hi?Fi.render():gi.render(vi,pi)}},{key:"loadSceneData",value:(i=Ve(it().mark((function e(){var t;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("scene.json",{cors:!0});case 2:return t=e.sent,e.next=5,t.json();case 5:ht.sceneData=e.sent;case 6:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"getObjectByName",value:function(e){return this.scene.getObjectByName(e)}},{key:"update",value:function(e){ht.useInnerScene&&($e(et(n.prototype),"update",this).call(this,e),this.render(),null!=ji&&ji.update())}},{key:"initRender",value:function(){var t,n,i;zi||(zi=document.body),this.container=zi;var r=null!==(t=this.opts.precision)&&void 0!==t?t:"highp",o=null!==(n=this.opts.antialias)&&void 0!==n?n:"fxaa";if("fx"===(Hi=null!==(i=this.opts.pipeline)&&void 0!==i?i:"fx")){var a;(gi=new e.WebGLRenderer({alpha:!0})).setPixelRatio(window.devicePixelRatio),gi.setSize(zi.offsetWidth,zi.offsetHeight),gi.toneMapping=e.NoToneMapping,zi.appendChild(gi.domElement),vi=this.scene=new e.Scene;var s=new ci(vi,pi),l=new Si,u=gi.getDrawingBufferSize(new e.Vector2),h=new e.WebGLRenderTarget(u.width,u.height,{samples:null!==(a=Mi.samples)&&void 0!==a?a:2,type:e.HalfFloatType});if(Fi=new hi(gi,h),"taa"===o){var c=new Ti(vi,pi);c.unbiased=!1,Fi.addPass(c)}if(Fi.addPass(s),this.opts.bloom){var f,d,m,p,v,g,y=new di(new e.Vector2(zi.offsetWidth,zi.offsetHeight));y.renderTargetsHorizontal.forEach((function(t){t.texture.type=e.HalfFloatType})),y.renderTargetsVertical.forEach((function(t){t.texture.type=e.HalfFloatType})),y.threshold=null!==(f=null===(d=Mi.bloom)||void 0===d?void 0:d.threshold)&&void 0!==f?f:.1,y.strength=null!==(m=null===(p=Mi.bloom)||void 0===p?void 0:p.strength)&&void 0!==m?m:.1,y.radius=null!==(v=null===(g=Mi.bloom)||void 0===g?void 0:g.radius)&&void 0!==v?v:.1,Fi.addPass(y)}if(Fi.addPass(l),"ssaa"===o){var b=new Li(vi,pi);b.sampleLevel=4,b.unbiased=!1,Fi.addPass(b);var S=new Ri(zi.offsetWidth*gi.getPixelRatio(),zi.offsetHeight*gi.getPixelRatio());Fi.addPass(S)}var k=new si(Ci);if(Fi.addPass(k),"fxaa"===o){var x=new si(Ai),w=gi.getPixelRatio();x.material.uniforms.resolution.value.x=1/(zi.offsetWidth*w),x.material.uniforms.resolution.value.y=1/(zi.offsetHeight*w),Fi.addPass(x)}}else{var R;if((gi=new e.WebGLRenderer({antialias:!0,precision:r,alpha:!0})).setPixelRatio(window.devicePixelRatio),gi.setSize(zi.offsetWidth,zi.offsetHeight),gi.outputColorSpace=e.SRGBColorSpace,this.opts.shadow)gi.shadowMap.type=e.PCFSoftShadowMap,gi.shadowMap.enabled=!0,gi.shadowMap.autoUpdate=null===(R=this.opts.dynamicShadow)||void 0===R||R;gi.toneMappingExposure=Mi.bloom.exposure,gi.toneMapping=e.NoToneMapping,zi.appendChild(gi.domElement),this.renderer=gi,vi=this.scene=new e.Scene}this.pmremGenerator=new e.PMREMGenerator(gi),this.pmremGenerator.compileEquirectangularShader()}},{key:"initStats",value:function(){Ui=ht.stats=new $n,document.body.appendChild(Ui.dom)}},{key:"initCamera",value:function(){var t,n;(Ni=zi.offsetWidth/zi.offsetHeight,"perspective"===(Ii=null!==(t=ht.stage.camera)&&void 0!==t?t:"perspective"))?(pi=new e.PerspectiveCamera(40,Ni,.1,100)).position.y=Mi.cameraHeight:(Di=null!==(n=this.opts.frustumSize)&&void 0!==n?n:2.5,pi=new e.OrthographicCamera(Di*Ni/-2,Di*Ni/2,Di/2,Di/-2,-10,10));this.camera=pi}},{key:"setLights",value:function(){var t=this,n=new e.AmbientLight(new e.Color(1,1,1),1);this.lights.push(n),vi.add(n);var i=new e.HemisphereLight(new e.Color(1,1,1),new e.Color(.8,.8,.8),.6);this.lights.push(i),vi.add(i);var r=new e.DirectionalLight(new e.Color(1,1,1),1.5);r.position.set(-1,2,4),r.lookAt(-.1,1.5,0),this.lights.push(r),vi.add(r),!1!==this.opts.shadow&&this.lights.forEach((function(e){if(e.isDirectionalLight){e.castShadow=!0;var n=t.opts.shadowMapSize||2048;e.shadow.mapSize.set(n,n),e.shadow.camera.near=.1,e.shadow.camera.far=100,e.shadow.radius=2,e.shadow.blurSamples=8,e.shadow.bias=0,e.shadow.normalBias=.01}}))}},{key:"toggleLights",value:function(){this.lights.forEach((function(e){return e.visible=!e.visible}))}},{key:"toggleShadow",value:function(){this.lights.forEach((function(e){e.isDirectionalLight&&(e.castShadow=!e.castShadow)}))}},{key:"toggleNormals",value:function(e){if(e){var t=vi.getObjectByName("helper_normals");t?vi.remove(t):((t=new Zn(e,.1,16776960)).name="helper_normals",vi.add(t))}}},{key:"drawHalfDirHelper",value:function(t){var n=this.lights.find((function(e){return!0===e.isDirectionalLight})),i=n.position.clone().sub(n.target.position).normalize(),r=new e.Vector3(0,0,1),o=i.clone().add(r).normalize(),a=new e.ArrowHelper(o,null!=t?t:new Vector3,1,16711680);a.name="helper_half",vi.add(a);var s=new e.ArrowHelper(r,null!=t?t:new Vector3,1,65280);s.name="helper_view",vi.add(s);var l=new e.ArrowHelper(i,null!=t?t:new Vector3,1,255);l.name="helper_light",vi.add(l)}},{key:"setToneMapping",value:function(t,n){gi.toneMapping="linear"===t?e.LinearToneMapping:e.ACESFilmicToneMapping,n&&(render.toneMappingExposure=n)}},{key:"setControls",value:function(){var e,t,n;(ji=new Wn(pi,gi.domElement)).enableDamping=!0,ji.enableZoom=null===(e=this.opts.zoom)||void 0===e||e,ji.autoRotate=null!==(t=this.opts.rotate)&&void 0!==t&&t,ji.enablePan=null!==(n=this.opts.pan)&&void 0!==n&&n,ji.minPolarAngle=Math.PI/2.3,ji.maxPolarAngle=Math.PI/2.3,this.orbitControls=ji,ji.startTheta=0}},{key:"setBackground2D",value:function(e){(new re).load(e,(function(e){yi=e,vi.background=e,Wi()}))}},{key:"clearBackgroundImage",value:function(){vi.background=null}},{key:"setEnvironment",value:function(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"png",o=arguments.length>3?arguments[3]:void 0;if(arguments.length>4&&void 0!==arguments[4]&&arguments[4]){var a=new ti,s=a.read("envMap");s?t=s:a.write("envMap",t)}"exr"===r?(new Hn).load(t,(function(t,r){t.mapping=e.EquirectangularReflectionMapping;var a=i.pmremGenerator.fromEquirectangular(t).texture;a.flipY=!0,vi.environment=a,i.pmremGenerator.dispose(),n&&(vi.environmentRotation=(new e.Euler).fromArray(n)),o&&o()})):(new re).load(t,(function(t){t.mapping=e.EquirectangularReflectionMapping,t.colorSpace=e.SRGBColorSpace,t=i.pmremGenerator.fromEquirectangular(t).texture,i.pmremGenerator.dispose(),t.flipY=!0,vi.environment=t,n&&(vi.environmentRotation=(new e.Euler).fromArray(n)),o&&o()}))}},{key:"setEnvironmentRotation",value:function(t){t&&(vi.environmentRotation=(new e.Euler).fromArray(t))}},{key:"setEnvironmentIntensity",value:function(e){vi.traverse((function(t){t.isMesh&&(t.material.envMapIntensity=e)}))}},{key:"clearLights",value:function(){this.lights.forEach((function(e){e&&vi.remove(e)})),this.lights=[]}},{key:"loadLights",value:function(t,n){var i=this;n=n||{},this.clearLights(),t.object.children.forEach((function(t){var r,o=t.color,a=(new e.Color).setHex(o,e.SRGBColorSpace);if("DirectionalLight"===t.type?r=new e.DirectionalLight(a,t.intensity):"AmbientLight"===t.type?r=new e.AmbientLight(a,t.intensity):"HemisphereLight"===t.type?r=new e.HemisphereLight(a,t.groundColor,t.intensity):"PointLight"===t.type&&(r=new e.PointLight(a,t.intensity,t.distance,t.decay)),r){if(i.lights.push(r),t.matrix&&(r.position.set(0,0,0),r.rotation.set(0,0,0),r.updateMatrix(),r.applyMatrix4((new e.Matrix4).fromArray(t.matrix))),n.castShadow&&r.isDirectionalLight){var s;r.castShadow=!0;var l=null!==(s=i.opts.shadowMapSize)&&void 0!==s?s:2048;r.shadow.mapSize.set(l,l),r.shadow.camera.near=.1,r.shadow.camera.far=100,r.shadow.radius=2,r.shadow.blurSamples=25,r.shadow.bias=0,r.shadow.normalBias=.01}vi.add(r)}}))}},{key:"loadCameras",value:function(t,n){Ni=zi.offsetWidth/zi.offsetHeight;var i=t.scene[0],r=i.camera[i.default_camera_idx];if(r){if("perspective"===r.camera_type){var o,a,s=r.fov,l=1;if(r.sensor_size){var u=(new e.Vector2).fromArray(r.sensor_size);l=u.x/u.y}"horizontal"===r.field_of_view_axis&&(s=360*Math.atan(Math.tan(s*Math.PI/360)/l)/Math.PI);var h=null!==(o=r.near)&&void 0!==o?o:.1,c=null!==(a=r.far)&&void 0!==a?a:1e3;(pi=new e.PerspectiveCamera(s,Ni,h,c)).position.fromArray(r.translate),pi.position.multiplyScalar(.01),pi.rotation.fromArray(r.rotate),r.focal_length}pi.updateProjectionMatrix(),this.camera=pi,this.setControls()}}},{key:"defaultScene",value:function(){vi.remove.apply(vi,vi.children);var t=new e.BoxGeometry(1,1,1),n=new e.MeshStandardMaterial,i=new e.Mesh(t,n);vi.add(i),t=new e.SphereGeometry(1,32,16);var r=new e.Mesh(t,n);r.position.y=1.5,vi.add(r)}},{key:"zoom",value:function(e){e>0&&("orthographic"===Ii&&(Di/=e,pi.left=-Di*Ni/2,pi.right=Di*Ni/2,pi.top=Di/2,pi.bottom=-Di/2),pi.updateProjectionMatrix())}},{key:"zoomTo",value:function(e){"orthographic"===Ii&&(Di=e,pi.left=-Di*Ni/2,pi.right=Di*Ni/2,pi.top=Di/2,pi.bottom=-Di/2),pi.updateProjectionMatrix()}},{key:"remove",value:function(e){"pinch"===e?this.orbitControls.enableZoom=!1:"rotate"===e?this.orbitControls.enableRotate=!1:"pan"===e&&(this.orbitControls.enablePan=!1)}},{key:"reset",value:function(){ji.reset(),this.zoomTo(2.5)}},{key:"resetSmooth",value:function(e,t,n){ji&&(ji.enableDamping=!1,ji.autoRotateSpeed=null!=e?e:10,ji.resetRotate=!0,ji.resetZoom=!0,ji.resetZoomSpeed=null!=t?t:.01,ji.resetPan=!0,ji.resetPanSpeed=null!=n?n:.01)}},{key:"dispose",value:function(e){!0!==e&&gi.domElement&&zi.removeChild(gi.domElement)}}]);var i}(),Ki=(Xi="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(Xi=Xi||__filename),function(e){var t,n,i=void 0!==(e=e||{})?e:{};i.ready=new Promise((function(e,i){t=e,n=i}));var r,o={};for(r in i)i.hasOwnProperty(r)&&(o[r]=i[r]);var a,s,l=!1,u=!1;l="object"===("undefined"==typeof window?"undefined":lt(window)),u="function"==typeof importScripts,a="object"===("undefined"==typeof process?"undefined":lt(process))&&"object"===lt(process.versions)&&"string"==typeof process.versions.node,s=!l&&!a&&!u;var h,c,f,d,m="";a?(m=u?require("path").dirname(m)+"/":__dirname+"/",h=function(e,t){return f||(f=require("fs")),d||(d=require("path")),e=d.normalize(e),f.readFileSync(e,t?null:"utf8")},c=function(e){var t=h(e,!0);return t.buffer||(t=new Uint8Array(t)),b(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Rt))throw e})),process.on("unhandledRejection",G),i.inspect=function(){return"[Emscripten Module object]"}):s?("undefined"!=typeof read&&(h=function(e){return read(e)}),c=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(b("object"===lt(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(l||u)&&(u?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),Xi&&(m=Xi),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",h=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(c=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})),i.print||console.log.bind(console);var p,v,g=i.printErr||console.warn.bind(console);for(r in o)o.hasOwnProperty(r)&&(i[r]=o[r]);o=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit,i.wasmBinary&&(p=i.wasmBinary),i.noExitRuntime&&i.noExitRuntime,"object"!==("undefined"==typeof WebAssembly?"undefined":lt(WebAssembly))&&G("no native wasm support detected");var y=!1;function b(e,t){e||G("Assertion failed: "+t)}var S="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(e,t){return e?function(e,t,n){for(var i=t+n,r=t;e[r]&&!(r>=i);)++r;if(r-t>16&&e.subarray&&S)return S.decode(e.subarray(t,r));for(var o="";t<r;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var l=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|l:(7&a)<<18|s<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}(R,e,t):""}var x,w,R,A,L,B,T,E,C,M="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function P(e,t){for(var n=e,i=n>>1,r=i+t/2;!(i>=r)&&L[i];)++i;if((n=i<<1)-e>32&&M)return M.decode(R.subarray(e,n));for(var o="",a=0;!(a>=t/2);++a){var s=A[e+2*a>>1];if(0==s)break;o+=String.fromCharCode(s)}return o}function O(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var i=t,r=(n-=2)<2*e.length?n/2:e.length,o=0;o<r;++o){var a=e.charCodeAt(o);A[t>>1]=a,t+=2}return A[t>>1]=0,t-i}function _(e){return 2*e.length}function I(e,t){for(var n=0,i="";!(n>=t/4);){var r=B[e+4*n>>2];if(0==r)break;if(++n,r>=65536){var o=r-65536;i+=String.fromCharCode(55296|o>>10,56320|1023&o)}else i+=String.fromCharCode(r)}return i}function D(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var i=t,r=i+n-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),B[t>>2]=a,(t+=4)+4>r)break}return B[t>>2]=0,t-i}function N(e){for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=55296&&i<=57343&&++n,t+=4}return t}i.INITIAL_MEMORY;var z=[],H=[],U=[],F=[],j=0,W=null;function G(e){i.onAbort&&i.onAbort(e),g(e+=""),y=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function V(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}i.preloadedImages={},i.preloadedAudios={};var X="data:application/octet-stream;base64,";function Y(e){return V(e,X)}var K="file://";function q(e){return V(e,K)}var Q,Z="mywaycore.wasm";function J(e){try{if(e==Z&&p)return new Uint8Array(p);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){G(e)}}function $(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?wt.call(null,n):(r=t.arg,kt.apply(null,[n,r])):n(void 0===t.arg?null:t.arg)}else t(i)}var r}function ee(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}Y(Z)||(Q=Z,Z=i.locateFile?i.locateFile(Q,m):m+Q);var te=void 0;function ne(e){for(var t="",n=e;R[n];)t+=te[R[n++]];return t}var ie={},re={},oe={},ae=48,se=57;function le(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=ae&&t<=se?"_"+e:e}function ue(e,t){return e=le(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function he(e,t){var n=ue(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var ce=void 0;function fe(e){throw new ce(e)}var de=void 0;function me(e){throw new de(e)}function pe(e,t,n){function i(t){var i=n(t);i.length!==e.length&&me("Mismatched type converter count");for(var r=0;r<e.length;++r)ve(e[r],i[r])}e.forEach((function(e){oe[e]=t}));var r=new Array(t.length),o=[],a=0;t.forEach((function(e,t){re.hasOwnProperty(e)?r[t]=re[e]:(o.push(e),ie.hasOwnProperty(e)||(ie[e]=[]),ie[e].push((function(){r[t]=re[e],++a===o.length&&i(r)})))})),0===o.length&&i(r)}function ve(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=t.name;if(e||fe('type "'+i+'" must have a positive integer typeid pointer'),re.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;fe("Cannot register type '"+i+"' twice")}if(re[e]=t,delete oe[e],ie.hasOwnProperty(e)){var r=ie[e];delete ie[e],r.forEach((function(e){e()}))}}function ge(e){if(!(this instanceof Ce))return!1;if(!(e instanceof Ce))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,i=e.$$.ptrType.registeredClass,r=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;i.baseClass;)r=i.upcast(r),i=i.baseClass;return t===i&&n===r}function ye(e){fe(e.$$.ptrType.registeredClass.name+" instance already deleted")}var be=!1;function Se(e){}function ke(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function xe(e){return"undefined"==typeof FinalizationGroup?(xe=function(e){return e},e):(be=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?ke(n):console.warn("object already deleted: "+n.ptr)}})),xe=function(e){return be.register(e,e.$$,e.$$),e},Se=function(e){be.unregister(e.$$)},xe(e))}function we(){if(this.$$.ptr||ye(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=xe(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function Re(){this.$$.ptr||ye(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&fe("Object already scheduled for deletion"),Se(this),ke(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ae(){return!this.$$.ptr}var Le=void 0,Be=[];function Te(){for(;Be.length;){var e=Be.pop();e.$$.deleteScheduled=!1,e.delete()}}function Ee(){return this.$$.ptr||ye(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&fe("Object already scheduled for deletion"),Be.push(this),1===Be.length&&Le&&Le(Te),this.$$.deleteScheduled=!0,this}function Ce(){}var Me={};function Pe(e,t,n){if(void 0===e[t].overloadTable){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||fe("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}}function Oe(e,t,n,i,r,o,a,s){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=i,this.baseClass=r,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function _e(e,t,n){for(;t!==n;)t.upcast||fe("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Ie(e,t){if(null===t)return this.isReference&&fe("null is not a valid "+this.name),0;t.$$||fe('Cannot pass "'+ct(t)+'" as a '+this.name),t.$$.ptr||fe("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass;return _e(t.$$.ptr,n,this.registeredClass)}function De(e,t){var n;if(null===t)return this.isReference&&fe("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||fe('Cannot pass "'+ct(t)+'" as a '+this.name),t.$$.ptr||fe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&fe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var i=t.$$.ptrType.registeredClass;if(n=_e(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&fe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:fe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var r=t.clone();n=this.rawShare(n,ht((function(){r.delete()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:fe("Unsupporting sharing policy")}return n}function Ne(e,t){if(null===t)return this.isReference&&fe("null is not a valid "+this.name),0;t.$$||fe('Cannot pass "'+ct(t)+'" as a '+this.name),t.$$.ptr||fe("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&fe("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;return _e(t.$$.ptr,n,this.registeredClass)}function ze(e){return this.fromWireType(T[e>>2])}function He(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Ue(e){this.rawDestructor&&this.rawDestructor(e)}function Fe(e){null!==e&&e.delete()}function je(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var i=je(e,t,n.baseClass);return null===i?null:n.downcast(i)}function We(){return Object.keys(Xe).length}function Ge(){var e=[];for(var t in Xe)Xe.hasOwnProperty(t)&&e.push(Xe[t]);return e}function Ve(e){Le=e,Be.length&&Le&&Le(Te)}var Xe={};function Ye(e,t){return t=function(e,t){for(void 0===t&&fe("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),Xe[t]}function Ke(e,t){return t.ptrType&&t.ptr||me("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&me("Both smartPtrType and smartPtr must be specified"),t.count={value:1},xe(Object.create(e,{$$:{value:t}}))}function qe(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Ye(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var i=n.clone();return this.destructor(e),i}function r(){return this.isSmartPointer?Ke(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Ke(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,a=this.registeredClass.getActualType(t),s=Me[a];if(!s)return r.call(this);o=this.isConst?s.constPointerType:s.pointerType;var l=je(t,this.registeredClass,o.registeredClass);return null===l?r.call(this):this.isSmartPointer?Ke(o.registeredClass.instancePrototype,{ptrType:o,ptr:l,smartPtrType:this,smartPtr:e}):Ke(o.registeredClass.instancePrototype,{ptrType:o,ptr:l})}function Qe(e,t,n,i,r,o,a,s,l,u,h){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=i,this.isSmartPointer=r,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=l,this.rawShare=u,this.rawDestructor=h,r||void 0!==t.baseClass?this.toWireType=De:i?(this.toWireType=Ie,this.destructorFunction=null):(this.toWireType=Ne,this.destructorFunction=null)}function Ze(e,t,n){return function(e,t,n){return n&&n.length?i["dynCall_"+e].apply(null,[t].concat(n)):i["dynCall_"+e].call(null,t)}(e,t,n)}function Je(e,t){e=ne(e);var n,i,r,o=(n=e,i=t,r=[],function(){r.length=arguments.length;for(var e=0;e<arguments.length;e++)r[e]=arguments[e];return Ze(n,i,r)});return"function"!=typeof o&&fe("unknown function pointer with signature "+e+": "+t),o}var $e=void 0;function et(e){var t=yt(e),n=ne(t);return St(t),n}function tt(e,t){var n=[],i={};throw t.forEach((function e(t){i[t]||re[t]||(oe[t]?oe[t].forEach(e):(n.push(t),i[t]=!0))})),new $e(e+": "+n.map(et).join([", "]))}function nt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function it(e,t,n,i,r){var o=t.length;o<2&&fe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==n,s=!1,l=1;l<t.length;++l)if(null!==t[l]&&void 0===t[l].destructorFunction){s=!0;break}var u="void"!==t[0].name,h="",c="";for(l=0;l<o-2;++l)h+=(0!==l?", ":"")+"arg"+l,c+=(0!==l?", ":"")+"arg"+l+"Wired";var f="return function "+le(e)+"("+h+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";s&&(f+="var destructors = [];\n");var d=s?"destructors":"null",m=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],p=[fe,i,r,nt,t[0],t[1]];for(a&&(f+="var thisWired = classParam.toWireType("+d+", this);\n"),l=0;l<o-2;++l)f+="var arg"+l+"Wired = argType"+l+".toWireType("+d+", arg"+l+"); // "+t[l+2].name+"\n",m.push("argType"+l),p.push(t[l+2]);if(a&&(c="thisWired"+(c.length>0?", ":"")+c),f+=(u?"var rv = ":"")+"invoker(fn"+(c.length>0?", ":"")+c+");\n",s)f+="runDestructors(destructors);\n";else for(l=a?1:2;l<t.length;++l){var v=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==t[l].destructorFunction&&(f+=v+"_dtor("+v+"); // "+t[l].name+"\n",m.push(v+"_dtor"),p.push(t[l].destructorFunction))}return u&&(f+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),f+="}\n",m.push(f),function(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+lt(e)+" which is not a function");var n=ue(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var i=new n,r=e.apply(i,t);return r instanceof Object?r:i}(Function,m).apply(null,p)}var rt=[],ot=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function at(e){e>4&&0==--ot[e].refcount&&(ot[e]=void 0,rt.push(e))}function st(){for(var e=0,t=5;t<ot.length;++t)void 0!==ot[t]&&++e;return e}function ut(){for(var e=5;e<ot.length;++e)if(void 0!==ot[e])return ot[e];return null}function ht(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=rt.length?rt.pop():ot.length;return ot[t]={refcount:1,value:e},t}}function ct(e){if(null===e)return"null";var t=lt(e);return"object"===t||"array"===t||"function"===t?e.toString():""+e}function ft(e,t){switch(t){case 2:return function(e){return this.fromWireType(E[e>>2])};case 3:return function(e){return this.fromWireType(C[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function dt(e,t,n){switch(t){case 0:return n?function(e){return w[e]}:function(e){return R[e]};case 1:return n?function(e){return A[e>>1]}:function(e){return L[e>>1]};case 2:return n?function(e){return B[e>>2]}:function(e){return T[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function mt(e){try{return e()}catch(e){G(e)}}var pt={State:{Normal:0,Unwinding:1,Rewinding:2},state:0,StackSize:4096,currData:null,handleSleepReturnValue:0,exportCallStack:[],callStackNameToId:{},callStackIdToName:{},callStackId:0,afterUnwind:null,asyncFinalizers:[],sleepCallbacks:[],getCallStackId:function(e){var t=pt.callStackNameToId[e];return void 0===t&&(t=pt.callStackId++,pt.callStackNameToId[e]=t,pt.callStackIdToName[t]=e),t},instrumentWasmExports:function(e){var t={};for(var n in e)!function(n){var i=e[n];t[n]="function"==typeof i?function(){pt.exportCallStack.push(n);try{return i.apply(null,arguments)}finally{if(y)return;b(pt.exportCallStack.pop()===n),pt.maybeStopUnwind()}}:i}(n);return t},maybeStopUnwind:function(){pt.currData&&pt.state===pt.State.Unwinding&&0===pt.exportCallStack.length&&(pt.state=pt.State.Normal,mt(i._asyncify_stop_unwind),"undefined"!=typeof Fibers&&Fibers.trampoline())},allocateData:function(){var e=bt(12+pt.StackSize);return pt.setDataHeader(e,e+12,pt.StackSize),pt.setDataRewindFunc(e),e},setDataHeader:function(e,t,n){B[e>>2]=t,B[e+4>>2]=t+n},setDataRewindFunc:function(e){var t=pt.exportCallStack[0],n=pt.getCallStackId(t);B[e+8>>2]=n},getDataRewindFunc:function(e){var t=B[e+8>>2],n=pt.callStackIdToName[t];return i.asm[n]},handleSleep:function(e){if(!y){if(pt.state===pt.State.Normal){var t=!1,n=!1;e((function(e){if(!y&&(pt.handleSleepReturnValue=e||0,t=!0,n)){pt.state=pt.State.Rewinding,mt((function(){i._asyncify_start_rewind(pt.currData)})),"undefined"!=typeof Browser&&Browser.mainLoop.func&&Browser.mainLoop.resume();var r=pt.getDataRewindFunc(pt.currData)();if(!pt.currData){var o=pt.asyncFinalizers;pt.asyncFinalizers=[],o.forEach((function(e){e(r)}))}}})),n=!0,t||(pt.state=pt.State.Unwinding,pt.currData=pt.allocateData(),mt((function(){i._asyncify_start_unwind(pt.currData)})),"undefined"!=typeof Browser&&Browser.mainLoop.func&&Browser.mainLoop.pause())}else pt.state===pt.State.Rewinding?(pt.state=pt.State.Normal,mt(i._asyncify_stop_rewind),St(pt.currData),pt.currData=null,pt.sleepCallbacks.forEach((function(e){e()}))):G("invalid state: "+pt.state);return pt.handleSleepReturnValue}},handleAsync:function(e){return pt.handleSleep((function(t){e().then(t)}))}};!function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);te=e}(),ce=i.BindingError=he(Error,"BindingError"),de=i.InternalError=he(Error,"InternalError"),Ce.prototype.isAliasOf=ge,Ce.prototype.clone=we,Ce.prototype.delete=Re,Ce.prototype.isDeleted=Ae,Ce.prototype.deleteLater=Ee,Qe.prototype.getPointee=He,Qe.prototype.destructor=Ue,Qe.prototype.argPackAdvance=8,Qe.prototype.readValueFromPointer=ze,Qe.prototype.deleteObject=Fe,Qe.prototype.fromWireType=qe,i.getInheritedInstanceCount=We,i.getLiveInheritedInstances=Ge,i.flushPendingDeletes=Te,i.setDelayFunction=Ve,$e=i.UnboundTypeError=he(Error,"UnboundTypeError"),i.count_emval_handles=st,i.get_first_emval=ut,H.push({func:function(){gt()}});var vt={j:function(e,t,n,i,r){var o=ee(n);ve(e,{name:t=ne(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?i:r},argPackAdvance:8,readValueFromPointer:function(e){var i;if(1===n)i=w;else if(2===n)i=A;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);i=B}return this.fromWireType(i[e>>o])},destructorFunction:null})},p:function(e,t,n,r,o,a,s,l,u,h,c,f,d){c=ne(c),a=Je(o,a),l&&(l=Je(s,l)),h&&(h=Je(u,h)),d=Je(f,d);var m=le(c);!function(e,t,n){i.hasOwnProperty(e)?((void 0===n||void 0!==i[e].overloadTable&&void 0!==i[e].overloadTable[n])&&fe("Cannot register public name '"+e+"' twice"),Pe(i,e,e),i.hasOwnProperty(n)&&fe("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),i[e].overloadTable[n]=t):(i[e]=t,void 0!==n&&(i[e].numArguments=n))}(m,(function(){tt("Cannot construct "+c+" due to unbound types",[r])})),pe([e,t,n],r?[r]:[],(function(t){var n,o;t=t[0],o=r?(n=t.registeredClass).instancePrototype:Ce.prototype;var s=ue(m,(function(){if(Object.getPrototypeOf(this)!==u)throw new ce("Use 'new' to construct "+c);if(void 0===f.constructor_body)throw new ce(c+" has no accessible constructor");var e=f.constructor_body[arguments.length];if(void 0===e)throw new ce("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(f.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),u=Object.create(o,{constructor:{value:s}});s.prototype=u;var f=new Oe(c,s,u,d,n,a,l,h),p=new Qe(c,f,!0,!1,!1),v=new Qe(c+"*",f,!1,!1,!1),g=new Qe(c+" const*",f,!1,!0,!1);return Me[e]={pointerType:v,constPointerType:g},function(e,t,n){i.hasOwnProperty(e)||me("Replacing nonexistant public symbol"),void 0!==i[e].overloadTable&&void 0!==n?i[e].overloadTable[n]=t:(i[e]=t,i[e].argCount=n)}(m,s),[p,v,g]}))},d:function(e,t,n,i,r,o,a){var s=function(e,t){for(var n=[],i=0;i<e;i++)n.push(B[(t>>2)+i]);return n}(n,i);t=ne(t),o=Je(r,o),pe([],[e],(function(e){var i=(e=e[0]).name+"."+t;function r(){tt("Cannot call "+i+" due to unbound types",s)}var l=e.registeredClass.constructor;return void 0===l[t]?(r.argCount=n-1,l[t]=r):(Pe(l,t,i),l[t].overloadTable[n-1]=r),pe([],s,(function(e){var r=[e[0],null].concat(e.slice(1)),s=it(i,r,null,o,a);return void 0===l[t].overloadTable?(s.argCount=n-1,l[t]=s):l[t].overloadTable[n-1]=s,[]})),[]}))},m:function(e,t,n,i,r,o,a,s){t=ne(t),o=Je(r,o),pe([],[e],(function(e){var r=(e=e[0]).name+"."+t,l={get:function(){tt("Cannot access "+r+" due to unbound types",[n])},enumerable:!0,configurable:!0};return l.set=s?function(){tt("Cannot access "+r+" due to unbound types",[n])}:function(e){fe(r+" is a read-only property")},Object.defineProperty(e.registeredClass.constructor,t,l),pe([],[n],(function(n){n=n[0];var r={get:function(){return n.fromWireType(o(i))},enumerable:!0};return s&&(s=Je(a,s),r.set=function(e){var t=[];s(i,n.toWireType(t,e)),nt(t)}),Object.defineProperty(e.registeredClass.constructor,t,r),[]})),[]}))},i:function(e,t){ve(e,{name:t=ne(t),fromWireType:function(e){var t=ot[e].value;return at(e),t},toWireType:function(e,t){return ht(t)},argPackAdvance:8,readValueFromPointer:ze,destructorFunction:null})},h:function(e,t,n){var i=ee(n);ve(e,{name:t=ne(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+ct(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:ft(t,i),destructorFunction:null})},b:function(e,t,n,i,r){t=ne(t),-1===r&&(r=4294967295);var o=ee(n),a=function(e){return e};if(0===i){var s=32-8*n;a=function(e){return e<<s>>>s}}var l=-1!=t.indexOf("unsigned");ve(e,{name:t,fromWireType:a,toWireType:function(e,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+ct(n)+'" to '+this.name);if(n<i||n>r)throw new TypeError('Passing a number "'+ct(n)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+i+", "+r+"]!");return l?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:dt(t,o,0!==i),destructorFunction:null})},a:function(e,t,n){var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function r(e){var t=T,n=t[e>>=2],r=t[e+1];return new i(x,r,n)}ve(e,{name:n=ne(n),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},e:function(e,t){var n="std::string"===(t=ne(t));ve(e,{name:t,fromWireType:function(e){var t,i=T[e>>2];if(n)for(var r=e+4,o=0;o<=i;++o){var a=e+4+o;if(o==i||0==R[a]){var s=k(r,a-r);void 0===t?t=s:(t+=String.fromCharCode(0),t+=s),r=a+1}}else{var l=new Array(i);for(o=0;o<i;++o)l[o]=String.fromCharCode(R[e+4+o]);t=l.join("")}return St(e),t},toWireType:function(e,t){var i;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||fe("Cannot pass non-string to std::string"),i=n&&r?function(){return function(e){for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++n)),i<=127?++t:t+=i<=2047?2:i<=65535?3:4}return t}(t)}:function(){return t.length};var o=i(),a=bt(4+o+1);if(T[a>>2]=o,n&&r)!function(e,t,n,i){if(!(i>0))return 0;for(var r=n+i-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(n>=r)break;t[n++]=a}else if(a<=2047){if(n+1>=r)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=r)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=r)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}t[n]=0}(t,R,a+4,o+1);else if(r)for(var s=0;s<o;++s){var l=t.charCodeAt(s);l>255&&(St(a),fe("String has UTF-16 code units that do not fit in 8 bits")),R[a+4+s]=l}else for(s=0;s<o;++s)R[a+4+s]=t[s];return null!==e&&e.push(St,a),a},argPackAdvance:8,readValueFromPointer:ze,destructorFunction:function(e){St(e)}})},c:function(e,t,n){var i,r,o,a,s;n=ne(n),2===t?(i=P,r=O,a=_,o=function(){return L},s=1):4===t&&(i=I,r=D,a=N,o=function(){return T},s=2),ve(e,{name:n,fromWireType:function(e){for(var n,r=T[e>>2],a=o(),l=e+4,u=0;u<=r;++u){var h=e+4+u*t;if(u==r||0==a[h>>s]){var c=i(l,h-l);void 0===n?n=c:(n+=String.fromCharCode(0),n+=c),l=h+t}}return St(e),n},toWireType:function(e,i){"string"!=typeof i&&fe("Cannot pass non-string to C++ string type "+n);var o=a(i),l=bt(4+o+t);return T[l>>2]=o>>s,r(i,l+4,o+t),null!==e&&e.push(St,l),l},argPackAdvance:8,readValueFromPointer:ze,destructorFunction:function(e){St(e)}})},k:function(e,t){ve(e,{isVoid:!0,name:t=ne(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},f:at,l:function(e){e>4&&(ot[e].refcount+=1)},g:function(){G()},n:function(e,t,n){R.copyWithin(e,t,t+n)},o:function(e){G("OOM")}};!function(){var e={a:vt};function t(e,t){var n,r=e.exports;r=pt.instrumentWasmExports(r),i.asm=r,v=i.asm.q,n=v.buffer,x=n,i.HEAP8=w=new Int8Array(n),i.HEAP16=A=new Int16Array(n),i.HEAP32=B=new Int32Array(n),i.HEAPU8=R=new Uint8Array(n),i.HEAPU16=L=new Uint16Array(n),i.HEAPU32=T=new Uint32Array(n),i.HEAPF32=E=new Float32Array(n),i.HEAPF64=C=new Float64Array(n),i.asm.r,function(e){if(j--,i.monitorRunDependencies&&i.monitorRunDependencies(j),0==j&&W){var t=W;W=null,t()}}()}function r(e){t(e.instance)}function o(t){return(p||!l&&!u||"function"!=typeof fetch||q(Z)?Promise.resolve().then((function(){return J(Z)})):fetch(Z,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Z+"'";return e.arrayBuffer()})).catch((function(){return J(Z)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){g("failed to asynchronously prepare wasm: "+e),G(e)}))}if(j++,i.monitorRunDependencies&&i.monitorRunDependencies(j),i.instantiateWasm)try{var a=i.instantiateWasm(e,t);return a=pt.instrumentWasmExports(a)}catch(e){return g("Module.instantiateWasm callback failed with error: "+e),!1}(p||"function"!=typeof WebAssembly.instantiateStreaming||Y(Z)||q(Z)||"function"!=typeof fetch?o(r):fetch(Z,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return g("wasm streaming compile failed: "+e),g("falling back to ArrayBuffer instantiation"),o(r)}))}))).catch(n)}();var gt=i.___wasm_call_ctors=function(){return(gt=i.___wasm_call_ctors=i.asm.s).apply(null,arguments)},yt=i.___getTypeName=function(){return(yt=i.___getTypeName=i.asm.t).apply(null,arguments)};i.___embind_register_native_and_builtin_types=function(){return(i.___embind_register_native_and_builtin_types=i.asm.u).apply(null,arguments)};var bt=i._malloc=function(){return(bt=i._malloc=i.asm.v).apply(null,arguments)},St=i._free=function(){return(St=i._free=i.asm.w).apply(null,arguments)};i.dynCall_ii=function(){return(i.dynCall_ii=i.asm.x).apply(null,arguments)};var kt=i.dynCall_vi=function(){return(kt=i.dynCall_vi=i.asm.y).apply(null,arguments)};i.dynCall_iiii=function(){return(i.dynCall_iiii=i.asm.z).apply(null,arguments)},i.dynCall_iii=function(){return(i.dynCall_iii=i.asm.A).apply(null,arguments)};var xt,wt=i.dynCall_v=function(){return(wt=i.dynCall_v=i.asm.B).apply(null,arguments)};function Rt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function At(e){function n(){xt||(xt=!0,i.calledRun=!0,y||($(H),$(U),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),F.unshift(e);var e;$(F)}()))}j>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),z.unshift(e);var e;$(z)}(),j>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),n()}),1)):n()))}if(i.dynCall_vif=function(){return(i.dynCall_vif=i.asm.C).apply(null,arguments)},i.dynCall_vf=function(){return(i.dynCall_vf=i.asm.D).apply(null,arguments)},i.dynCall_vii=function(){return(i.dynCall_vii=i.asm.E).apply(null,arguments)},i.dynCall_viiiiii=function(){return(i.dynCall_viiiiii=i.asm.F).apply(null,arguments)},i.dynCall_viiiii=function(){return(i.dynCall_viiiii=i.asm.G).apply(null,arguments)},i.dynCall_viiii=function(){return(i.dynCall_viiii=i.asm.H).apply(null,arguments)},i._asyncify_start_unwind=function(){return(i._asyncify_start_unwind=i.asm.I).apply(null,arguments)},i._asyncify_stop_unwind=function(){return(i._asyncify_stop_unwind=i.asm.J).apply(null,arguments)},i._asyncify_start_rewind=function(){return(i._asyncify_start_rewind=i.asm.K).apply(null,arguments)},i._asyncify_stop_rewind=function(){return(i._asyncify_stop_rewind=i.asm.L).apply(null,arguments)},W=function e(){xt||At(),xt||(W=e)},i.run=At,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return At(),e.ready}),qi=function(){return Qe((function e(t,n){Ye(this,e),this.appId=t,this.appKey=n}),[{key:"init",value:function(e){this.auth(e)}},{key:"auth",value:function(e){var t=this;try{Ki().then((function(n){n.MywayCore.Init(t.appId,t.appKey)?e&&e():console.error("Invalid license, please contact techbrood.com")}))}catch(e){console.error("authorize failed: ",e)}}}])}(),Qi=function(){return Qe((function e(){Ye(this,e),this._ids=0,this._entitiesMap={},this._entities=[]}),[{key:"_generateName",value:function(){return this._ids+=1,"__name__"+this._ids}},{key:"get",value:function(e){return this._entitiesMap[e]}},{key:"filter",value:function(e){return this._entities.filter(e)}},{key:"add",value:(e=Ve(it().mark((function e(t,n){var i,r;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null!=n?n:null!==(i=t.name)&&void 0!==i?i:this._generateName(),this._entitiesMap[r]=t,this._entities.push(t),t.setParent(this),t.setName(r),e.next=7,t.init();case 7:case"end":return e.stop()}}),e,this)}))),function(t,n){return e.apply(this,arguments)})},{key:"setActive",value:function(e,t){var n=this._entities.indexOf(e);if(t){if(n>=0)return;this._entities.push(e)}else{if(n<0)return;this._entities.splice(n,1)}}},{key:"update",value:function(e){for(var t=[],n=[],i=0;i<this._entities.length;++i){var r=this._entities[i];r.update(e),r.dead_?t.push(r):n.push(r)}for(var o=0;o<t.length;++o){var a=t[o];delete this._entitiesMap[a.Name],a.Destroy()}this._entities=n}}]);var e}(),Zi=function(t){function n(t){var i;return Ye(this,n),Je(i=Xe(this,n,[t]),"_position",new e.Vector3),Je(i,"_rotation",new e.Euler),i}return tt(n,Pi),Qe(n,[{key:"setPosition",value:function(e){this._position.copy(e),this.broadcast({topic:"update.position",value:this.position})}},{key:"setQuaternion",value:function(e){this._rotation.copy(e),this.broadcast({topic:"update.rotation",value:this.rotation})}},{key:"position",get:function(){return this._position}},{key:"quaternion",get:function(){return this._rotation}}])}(),Ji=new WeakMap,$i=function(e){function t(e){var n;return Ye(this,t),(n=Xe(this,t,[e])).decoderPath="",n.decoderConfig={},n.decoderBinary=null,n.decoderPending=null,n.workerLimit=4,n.workerPool=[],n.workerNextTaskID=1,n.workerSourceURL="",n.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},n.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},n}return tt(t,a),Qe(t,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,i){var r=this,a=new o(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){r.parse(e,t,i)}),n,i)}},{key:"parse",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};this.decodeDracoFile(e,t,null,null,h,n).catch(n)}},{key:"decodeDracoFile",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:r};return this.decodeGeometry(e,a).then(t).catch(o)}},{key:"decodeGeometry",value:function(e,t){var n,i=this,r=JSON.stringify(t);if(Ji.has(e)){var o=Ji.get(e);if(o.key===r)return o.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var a=this.workerNextTaskID++,s=e.byteLength,l=this._getWorker(a,s).then((function(i){return n=i,new Promise((function(i,r){n._callbacks[a]={resolve:i,reject:r},n.postMessage({type:"decode",id:a,taskConfig:t,buffer:e},[e])}))})).then((function(e){return i._createGeometry(e.geometry)}));return l.catch((function(){return!0})).then((function(){n&&a&&i._releaseTask(n,a)})),Ji.set(e,{key:r,promise:l}),l}},{key:"_createGeometry",value:function(e){var t=new L;e.index&&t.setIndex(new d(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n],r=i.name,o=i.array,a=i.itemSize,s=new d(o,a);"color"===r&&(this._assignVertexColorSpace(s,i.vertexColorSpace),s.normalized=o instanceof Float32Array==!1),t.setAttribute(r,s)}return t}},{key:"_assignVertexColorSpace",value:function(e,t){if(t===h)for(var n=new l,i=0,r=e.count;i<r;i++)n.fromBufferAttribute(e,i).convertSRGBToLinear(),e.setXYZ(i,n.r,n.g,n.b)}},{key:"_loadLibrary",value:function(e,t){var n=new o(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,i){n.load(e,t,void 0,i)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==("undefined"==typeof WebAssembly?"undefined":lt(WebAssembly))||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var i=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var r=er.toString(),o=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([o]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var i=new Worker(n.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:n.decoderConfig}),i.onmessage=function(e){var t=e.data;switch(t.type){case"decode":i._callbacks[t.id].resolve(t);break;case"error":i._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(i)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var r=n.workerPool[n.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){this.workerPool.map((function(e){return e._taskLoad}))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}])}();function er(){var e,t;function n(e,t,n,i,r,o){var a=o.num_components(),s=n.num_points()*a,l=s*r.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),h=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,u,l,h);var c=new r(e.HEAPF32.buffer,h,s).slice();return e._free(h),{name:i,array:c,itemSize:a}}onmessage=function(i){var r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var o=r.buffer,a=r.taskConfig;t.then((function(e){var t=e.draco,i=new t.Decoder;try{var s=function(e,t,i,r){var o,a,s=r.attributeIDs,l=r.attributeTypes,u=t.GetEncodedGeometryType(i);if(u===e.TRIANGULAR_MESH)o=new e.Mesh,a=t.DecodeArrayToMesh(i,i.byteLength,o);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,a=t.DecodeArrayToPointCloud(i,i.byteLength,o)}if(!a.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());var h={index:null,attributes:[]};for(var c in s){var f=self[l[c]],d=void 0,m=void 0;if(r.useUniqueIDs)m=s[c],d=t.GetAttributeByUniqueId(o,m);else{if(-1===(m=t.GetAttributeId(o,e[s[c]])))continue;d=t.GetAttribute(o,m)}var p=n(e,t,o,c,f,d);"color"===c&&(p.vertexColorSpace=r.vertexColorSpace),h.attributes.push(p)}u===e.TRIANGULAR_MESH&&(h.index=function(e,t,n){var i=n.num_faces(),r=3*i,o=4*r,a=e._malloc(o);t.GetTrianglesUInt32Array(n,o,a);var s=new Uint32Array(e.HEAPF32.buffer,a,r).slice();return e._free(a),{array:s,itemSize:1}}(e,t,o));return e.destroy(o),h}(t,i,new Int8Array(o),a),l=s.attributes.map((function(e){return e.array.buffer}));s.index&&l.push(s.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:s},l)}catch(e){console.error(e),self.postMessage({type:"error",id:r.id,error:e.message})}finally{t.destroy(i)}}))}}}var tr,nr=function(){return Qe((function e(){Ye(this,e)}),null,[{key:"roundNumber",value:function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}},{key:"sample",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"distanceToSquared",value:function(e,t){var n=e.x-t.x,i=e.y-t.y,r=e.z-t.z;return n*n+i*i+r*r}},{key:"isPointInPoly",value:function(e,t){for(var n=!1,i=-1,r=e.length,o=r-1;++i<r;o=i)(e[i].z<=t.z&&t.z<e[o].z||e[o].z<=t.z&&t.z<e[i].z)&&t.x<(e[o].x-e[i].x)*(t.z-e[i].z)/(e[o].z-e[i].z)+e[i].x&&(n=!n);return n}},{key:"isVectorInPolygon",value:function(e,t,n){var i=1e5,r=-1e5,o=[];return t.vertexIds.forEach((function(e){i=Math.min(n[e].y,i),r=Math.max(n[e].y,r),o.push(n[e])})),!!(e.y<r+.5&&e.y>i-.5&&this.isPointInPoly(o,e))}},{key:"triarea2",value:function(e,t,n){return(n.x-e.x)*(t.z-e.z)-(t.x-e.x)*(n.z-e.z)}},{key:"vequal",value:function(e,t){return this.distanceToSquared(e,t)<1e-5}},{key:"mergeVertices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;t=Math.max(t,Number.EPSILON);for(var n={},i=e.getIndex(),r=e.getAttribute("position"),o=i?i.count:r.count,a=0,s=[],l=[],u=Math.log10(1/t),h=Math.pow(10,u),c=0;c<o;c++){var f=i?i.getX(c):c,m="";m+=~~(r.getX(f)*h)+",",m+=~~(r.getY(f)*h)+",",(m+=~~(r.getZ(f)*h)+",")in n?s.push(n[m]):(l.push(r.getX(f)),l.push(r.getY(f)),l.push(r.getZ(f)),n[m]=a,s.push(a),a++)}var p=new d(new Float32Array(l),r.itemSize,r.normalized),v=new L;return v.setAttribute("position",p),v.setIndex(s),v}}])}(),ir=function(){return Qe((function e(t){Ye(this,e),this.content=[],this.scoreFunction=t}),[{key:"push",value:function(e){this.content.push(e),this.sinkDown(this.content.length-1)}},{key:"pop",value:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e}},{key:"remove",value:function(e){var t=this.content.indexOf(e),n=this.content.pop();t!==this.content.length-1&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))}},{key:"size",value:function(){return this.content.length}},{key:"rescoreElement",value:function(e){this.sinkDown(this.content.indexOf(e))}},{key:"sinkDown",value:function(e){for(var t=this.content[e];e>0;){var n=(e+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(i)))break;this.content[n]=t,this.content[e]=i,e=n}}},{key:"bubbleUp",value:function(e){for(var t=this.content.length,n=this.content[e],i=this.scoreFunction(n);;){var r=e+1<<1,o=r-1,a=void 0,s=null;if(o<t&&((a=this.scoreFunction(this.content[o]))<i&&(s=o)),r<t&&this.scoreFunction(this.content[r])<(null===s?i:a)&&(s=r),null===s)break;this.content[e]=this.content[s],this.content[s]=n,e=s}}}])}(),rr=function(){return Qe((function e(){Ye(this,e),this.portals=[]}),[{key:"push",value:function(e,t){void 0===t&&(t=e),this.portals.push({left:e,right:t})}},{key:"stringPull",value:function(){var e,t,n,i=this.portals,r=[],o=0,a=0,s=0;e=i[0].left,t=i[0].left,n=i[0].right,r.push(e);for(var l=1;l<i.length;l++){var u=i[l].left,h=i[l].right;if(nr.triarea2(e,n,h)<=0){if(!(nr.vequal(e,n)||nr.triarea2(e,t,h)>0)){r.push(t),t=e=t,n=e,a=o=a,s=o,l=o;continue}n=h,s=l}if(nr.triarea2(e,t,u)>=0){if(!(nr.vequal(e,t)||nr.triarea2(e,n,u)<0)){r.push(n),t=e=n,n=e,a=o=s,s=o,l=o;continue}t=u,a=l}}return 0!==r.length&&nr.vequal(r[r.length-1],i[i.length-1].left)||r.push(i[i.length-1].left),this.path=r,r}}])}(),or=function(){return Qe((function e(){Ye(this,e),this.zones={}}),[{key:"setZoneData",value:function(e,t){this.zones[e]=t}},{key:"getRandomNode",value:function(e,t,n,i){if(!this.zones[e])return new Y;n=n||null,i=i||0;var r=[];return this.zones[e].groups[t].forEach((function(e){n&&i?nr.distanceToSquared(n,e.centroid)<i*i&&r.push(e.centroid):r.push(e.centroid)})),nr.sample(r)||new Y}},{key:"getClosestNode",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.zones[t].vertices,o=null,a=1/0;return this.zones[t].groups[n].forEach((function(t){var n=nr.distanceToSquared(t.centroid,e);n<a&&(!i||nr.isVectorInPolygon(e,t,r))&&(o=t,a=n)})),o}},{key:"findPath",value:function(e,t,n,i){var r=this.zones[n].groups[i],o=this.zones[n].vertices,a=this.getClosestNode(e,n,i,!0),s=this.getClosestNode(t,n,i,!0);if(!a||!s)return null;var l=function(){return Qe((function e(){Ye(this,e)}),null,[{key:"init",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.f=0,n.g=0,n.h=0,n.cost=1,n.visited=!1,n.closed=!1,n.parent=null}}},{key:"cleanUp",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];delete n.f,delete n.g,delete n.h,delete n.cost,delete n.visited,delete n.closed,delete n.parent}}},{key:"heap",value:function(){return new ir((function(e){return e.f}))}},{key:"search",value:function(e,t,n){this.init(e);var i=this.heap();for(i.push(t);i.size()>0;){var r=i.pop();if(r===n){for(var o=r,a=[];o.parent;)a.push(o),o=o.parent;return this.cleanUp(a),a.reverse()}r.closed=!0;for(var s=this.neighbours(e,r),l=0,u=s.length;l<u;l++){var h=s[l];if(!h.closed){var c=r.g+h.cost,f=h.visited;if(!f||c<h.g){if(h.visited=!0,h.parent=r,!h.centroid||!n.centroid)throw new Error("Unexpected state");h.h=h.h||this.heuristic(h.centroid,n.centroid),h.g=c,h.f=h.g+h.h,f?i.rescoreElement(h):i.push(h)}}}}return[]}},{key:"heuristic",value:function(e,t){return nr.distanceToSquared(e,t)}},{key:"neighbours",value:function(e,t){for(var n=[],i=0;i<t.neighbours.length;i++)n.push(e[t.neighbours[i]]);return n}}])}().search(r,a,s),u=function(e,t){for(var n=0;n<e.neighbours.length;n++)if(e.neighbours[n]===t.id)return e.portals[n]},h=new rr;h.push(e);for(var c=0;c<l.length;c++){var f=l[c],d=l[c+1];if(d){var m=u(f,d);h.push(o[m[0]],o[m[1]])}}h.push(t),h.stringPull();var p=h.path.map((function(e){return new Y(e.x,e.y,e.z)}));return p.shift(),p}}],[{key:"createZone",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;return function(){return Qe((function e(){Ye(this,e)}),null,[{key:"buildZone",value:function(e,t){var n=this,i=this._buildNavigationMesh(e,t),r={};i.vertices.forEach((function(e){e.x=nr.roundNumber(e.x,2),e.y=nr.roundNumber(e.y,2),e.z=nr.roundNumber(e.z,2)})),r.vertices=i.vertices;var o=this._buildPolygonGroups(i);return r.groups=new Array(o.length),o.forEach((function(e,t){var i=new Map;e.forEach((function(e,t){i.set(e,t)}));var o=new Array(e.length);e.forEach((function(e,t){var a=[];e.neighbours.forEach((function(e){return a.push(i.get(e))}));var s=[];e.neighbours.forEach((function(t){return s.push(n._getSharedVerticesInOrder(e,t))}));var l=new Y(0,0,0);l.add(r.vertices[e.vertexIds[0]]),l.add(r.vertices[e.vertexIds[1]]),l.add(r.vertices[e.vertexIds[2]]),l.divideScalar(3),l.x=nr.roundNumber(l.x,2),l.y=nr.roundNumber(l.y,2),l.z=nr.roundNumber(l.z,2),o[t]={id:t,neighbours:a,vertexIds:e.vertexIds,centroid:l,portals:s}})),r.groups[t]=o})),r}},{key:"_buildNavigationMesh",value:function(e,t){return e=nr.mergeVertices(e,t),this._buildPolygonsFromGeometry(e)}},{key:"_spreadGroupId",value:function(e){for(var t=new Set([e]);t.size>0;){var n=t;t=new Set,n.forEach((function(n){n.group=e.group,n.neighbours.forEach((function(e){void 0===e.group&&t.add(e)}))}))}}},{key:"_buildPolygonGroups",value:function(e){var t=this,n=[];return e.polygons.forEach((function(e){void 0!==e.group?n[e.group].push(e):(e.group=n.length,t._spreadGroupId(e),n.push([e]))})),n}},{key:"_buildPolygonNeighbours",value:function(e,t){var n=new Set,i=t[e.vertexIds[1]],r=t[e.vertexIds[2]];return t[e.vertexIds[0]].forEach((function(t){t!==e&&(i.includes(t)||r.includes(t))&&n.add(t)})),i.forEach((function(t){t!==e&&r.includes(t)&&n.add(t)})),n}},{key:"_buildPolygonsFromGeometry",value:function(e){for(var t=this,n=[],i=[],r=e.attributes.position,o=e.index,a=[],s=0;s<r.count;s++)i.push((new Y).fromBufferAttribute(r,s)),a[s]=[];for(var l=0;l<e.index.count;l+=3){var u=o.getX(l),h=o.getX(l+1),c=o.getX(l+2),f={vertexIds:[u,h,c],neighbours:null};n.push(f),a[u].push(f),a[h].push(f),a[c].push(f)}return n.forEach((function(e){e.neighbours=t._buildPolygonNeighbours(e,a)})),{polygons:n,vertices:i}}},{key:"_getSharedVerticesInOrder",value:function(e,t){var n=e.vertexIds,i=n[0],r=n[1],o=n[2],a=t.vertexIds,s=a.includes(i),l=a.includes(r),u=a.includes(o);return s&&l&&u?Array.from(n):s&&l?[i,r]:l&&u?[r,o]:s&&u?[o,i]:(console.warn("Error processing navigation mesh neighbors; neighbors with <2 shared vertices found."),[])}}])}().buildZone(e,t)}}])}();or.prototype.getGroup=(tr=new Ne,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.zones[e])return null;for(var i=null,r=Math.pow(50,2),o=this.zones[e],a=0;a<o.groups.length;a++){var s,l=Ze(o.groups[a]);try{for(l.s();!(s=l.n()).done;){var u=s.value;if(n&&(tr.setFromCoplanarPoints(o.vertices[u.vertexIds[0]],o.vertices[u.vertexIds[1]],o.vertices[u.vertexIds[2]]),Math.abs(tr.distanceToPoint(t))<.01)&&nr.isPointInPoly([o.vertices[u.vertexIds[0]],o.vertices[u.vertexIds[1]],o.vertices[u.vertexIds[2]]],t))return a;var h=nr.distanceToSquared(u.centroid,t);h<r&&(i=a,r=h)}}catch(e){l.e(e)}finally{l.f()}}return i}),or.prototype.clampStep=function(){var e,t,n=new Y,i=new Ne,r=new ze,o=new Y,a=new Y;return function(s,l,u,h,c,f){var d=this.zones[h].vertices,m=this.zones[h].groups[c],p=[u],v={};v[u.id]=0,e=void 0,a.set(0,0,0),t=1/0,i.setFromCoplanarPoints(d[u.vertexIds[0]],d[u.vertexIds[1]],d[u.vertexIds[2]]),i.projectPoint(l,n),o.copy(n);for(var g=p.pop();g;g=p.pop()){r.set(d[g.vertexIds[0]],d[g.vertexIds[1]],d[g.vertexIds[2]]),r.closestPointToPoint(o,n),n.distanceToSquared(o)<t&&(e=g,a.copy(n),t=n.distanceToSquared(o));var y=v[g.id];if(!(y>2))for(var b=0;b<g.neighbours.length;b++){var S=m[g.neighbours[b]];S.id in v||(p.push(S),v[S.id]=y+1)}}return f.copy(a),e}}(),new l(15631215).convertSRGBToLinear().getHex(),new l(14469912).convertSRGBToLinear().getHex(),new l(41903).convertSRGBToLinear().getHex(),new l(41903).convertSRGBToLinear().getHex(),new l(14472114).convertSRGBToLinear().getHex(),new l(4417387).convertSRGBToLinear().getHex();var ar=function(){return Qe((function e(){Ye(this,e),this.finder=new or,this.zone="levelFloor"}),[{key:"init",value:function(e,t){return!!e.isMesh&&(t&&(this.zone=t),this.finder.setZoneData(this.zone,or.createZone(e.geometry)),!0)}},{key:"getGroup",value:function(e){return this.finder.getGroup(this.zone,e,!0)}},{key:"find",value:function(e,t,n){var i=this.finder.findPath(e,t,this.zone,n);return i?(i=i.filter((function(e,t,n){return t===n.findIndex((function(t){return t.x===e.x&&t.y===e.y&&t.z===e.z}))})),i):null}}])}(),sr=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;return Ye(this,t),(n=Xe(this,t,[new L,new k({color:i,toneMapped:!1})])).octree=e,n.color=i,n.type="OctreeHelper",n.update(),n}return tt(t,E),Qe(t,[{key:"update",value:function(){var e=[];!function t(n){for(var i=0;i<n.length;i++){var r=n[i].box.min,o=n[i].box.max;e.push(o.x,o.y,o.z),e.push(r.x,o.y,o.z),e.push(r.x,o.y,o.z),e.push(r.x,r.y,o.z),e.push(r.x,r.y,o.z),e.push(o.x,r.y,o.z),e.push(o.x,r.y,o.z),e.push(o.x,o.y,o.z),e.push(o.x,o.y,r.z),e.push(r.x,o.y,r.z),e.push(r.x,o.y,r.z),e.push(r.x,r.y,r.z),e.push(r.x,r.y,r.z),e.push(o.x,r.y,r.z),e.push(o.x,r.y,r.z),e.push(o.x,o.y,r.z),e.push(o.x,o.y,o.z),e.push(o.x,o.y,r.z),e.push(r.x,o.y,o.z),e.push(r.x,o.y,r.z),e.push(r.x,r.y,o.z),e.push(r.x,r.y,r.z),e.push(o.x,r.y,o.z),e.push(o.x,r.y,r.z),t(n[i].subTrees)}}(this.octree.subTrees),this.geometry.dispose(),this.geometry=new L,this.geometry.setAttribute("position",new ke(e,3))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}])}(),lr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Y(0,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Y(0,1,0),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Ye(this,e),this.start=t,this.end=n,this.radius=i}return Qe(e,[{key:"clone",value:function(){return new e(this.start.clone(),this.end.clone(),this.radius)}},{key:"set",value:function(e,t,n){this.start.copy(e),this.end.copy(t),this.radius=n}},{key:"copy",value:function(e){this.start.copy(e.start),this.end.copy(e.end),this.radius=e.radius}},{key:"getCenter",value:function(e){return e.copy(this.end).add(this.start).multiplyScalar(.5)}},{key:"translate",value:function(e){this.start.add(e),this.end.add(e)}},{key:"checkAABBAxis",value:function(e,t,n,i,r,o,a,s,l){return(r-e<l||r-n<l)&&(e-o<l||n-o<l)&&(a-t<l||a-i<l)&&(t-s<l||i-s<l)}},{key:"intersectsBox",value:function(e){return this.checkAABBAxis(this.start.x,this.start.y,this.end.x,this.end.y,e.min.x,e.max.x,e.min.y,e.max.y,this.radius)&&this.checkAABBAxis(this.start.x,this.start.z,this.end.x,this.end.z,e.min.x,e.max.x,e.min.z,e.max.z,this.radius)&&this.checkAABBAxis(this.start.y,this.start.z,this.end.y,this.end.z,e.min.y,e.max.y,e.min.z,e.max.z,this.radius)}}])}(),ur=new Y,hr=new Y,cr=new Y,fr=new Y,dr=new Ne,mr=new He,pr=new He,vr=new ce,gr=new lr,yr=new Y,br=new Y,Sr=new Y;function kr(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=yr.copy(e.end).sub(e.start),s=br.copy(t.end).sub(t.start),l=Sr.copy(t.start).sub(e.start),u=a.dot(s),h=a.dot(a),c=s.dot(s),f=s.dot(l),d=a.dot(l),m=h*c-u*u;if(Math.abs(m)<1e-10){var p=-f/c,v=(u-f)/c;Math.abs(p-.5)<Math.abs(v-.5)?(n=0,i=p):(n=1,i=v)}else i=((n=(f*u+d*c)/m)*u-f)/c;i=Math.max(0,Math.min(1,i)),n=Math.max(0,Math.min(1,n)),r&&r.copy(a).multiplyScalar(n).add(e.start),o&&o.copy(s).multiplyScalar(i).add(t.start)}var xr=function(){function e(t){Ye(this,e),this.box=t,this.bounds=new he,this.subTrees=[],this.triangles=[],this.layers=new Ue}return Qe(e,[{key:"addTriangle",value:function(e){return this.bounds.min.x=Math.min(this.bounds.min.x,e.a.x,e.b.x,e.c.x),this.bounds.min.y=Math.min(this.bounds.min.y,e.a.y,e.b.y,e.c.y),this.bounds.min.z=Math.min(this.bounds.min.z,e.a.z,e.b.z,e.c.z),this.bounds.max.x=Math.max(this.bounds.max.x,e.a.x,e.b.x,e.c.x),this.bounds.max.y=Math.max(this.bounds.max.y,e.a.y,e.b.y,e.c.y),this.bounds.max.z=Math.max(this.bounds.max.z,e.a.z,e.b.z,e.c.z),this.triangles.push(e),this}},{key:"calcBox",value:function(){return this.box=this.bounds.clone(),this.box.min.x-=.01,this.box.min.y-=.01,this.box.min.z-=.01,this}},{key:"split",value:function(t){if(this.box){for(var n,i=[],r=hr.copy(this.box.max).sub(this.box.min).multiplyScalar(.5),o=0;o<2;o++)for(var a=0;a<2;a++)for(var s=0;s<2;s++){var l=new he,u=ur.set(o,a,s);l.min.copy(this.box.min).add(u.multiply(r)),l.max.copy(l.min).add(r),i.push(new e(l))}for(;n=this.triangles.pop();)for(var h=0;h<i.length;h++)i[h].box.intersectsTriangle(n)&&i[h].triangles.push(n);for(var c=0;c<i.length;c++){var f=i[c].triangles.length;f>8&&t<16&&i[c].split(t+1),0!==f&&this.subTrees.push(i[c])}return this}}},{key:"build",value:function(){return this.calcBox(),this.split(0),this}},{key:"getRayTriangles",value:function(e,t){for(var n=0;n<this.subTrees.length;n++){var i=this.subTrees[n];if(e.intersectsBox(i.box))if(i.triangles.length>0)for(var r=0;r<i.triangles.length;r++)-1===t.indexOf(i.triangles[r])&&t.push(i.triangles[r]);else i.getRayTriangles(e,t)}return t}},{key:"triangleCapsuleIntersect",value:function(e,t){t.getPlane(dr);var n=dr.distanceToPoint(e.start)-e.radius,i=dr.distanceToPoint(e.end)-e.radius;if(n>0&&i>0||n<-e.radius&&i<-e.radius)return!1;var r=Math.abs(n/(Math.abs(n)+Math.abs(i))),o=ur.copy(e.start).lerp(e.end,r);if(t.containsPoint(o))return{normal:dr.normal.clone(),point:o.clone(),depth:Math.abs(Math.min(n,i))};for(var a=e.radius*e.radius,s=mr.set(e.start,e.end),l=[[t.a,t.b],[t.b,t.c],[t.c,t.a]],u=0;u<l.length;u++){if(kr(s,pr.set(l[u][0],l[u][1]),cr,fr),cr.distanceToSquared(fr)<a)return{normal:cr.clone().sub(fr).normalize(),point:fr.clone(),depth:e.radius-cr.distanceTo(fr)}}return!1}},{key:"triangleSphereIntersect",value:function(e,t){if(t.getPlane(dr),!e.intersectsPlane(dr))return!1;var n=Math.abs(dr.distanceToSphere(e)),i=e.radius*e.radius-n*n,r=dr.projectPoint(e.center,ur);if(t.containsPoint(e.center))return{normal:dr.normal.clone(),point:r.clone(),depth:Math.abs(dr.distanceToSphere(e))};for(var o=[[t.a,t.b],[t.b,t.c],[t.c,t.a]],a=0;a<o.length;a++){mr.set(o[a][0],o[a][1]),mr.closestPointToPoint(r,!0,hr);var s=hr.distanceToSquared(e.center);if(s<i)return{normal:e.center.clone().sub(hr).normalize(),point:hr.clone(),depth:e.radius-Math.sqrt(s)}}return!1}},{key:"getSphereTriangles",value:function(e,t){for(var n=0;n<this.subTrees.length;n++){var i=this.subTrees[n];if(e.intersectsBox(i.box))if(i.triangles.length>0)for(var r=0;r<i.triangles.length;r++)-1===t.indexOf(i.triangles[r])&&t.push(i.triangles[r]);else i.getSphereTriangles(e,t)}}},{key:"getCapsuleTriangles",value:function(e,t){for(var n=0;n<this.subTrees.length;n++){var i=this.subTrees[n];if(e.intersectsBox(i.box))if(i.triangles.length>0)for(var r=0;r<i.triangles.length;r++)-1===t.indexOf(i.triangles[r])&&t.push(i.triangles[r]);else i.getCapsuleTriangles(e,t)}}},{key:"sphereIntersect",value:function(e){vr.copy(e);var t,n=[],i=!1;this.getSphereTriangles(e,n);for(var r=0;r<n.length;r++)(t=this.triangleSphereIntersect(vr,n[r]))&&(i=!0,vr.center.add(t.normal.multiplyScalar(t.depth)));if(i){var o=vr.center.clone().sub(e.center),a=o.length();return{normal:o.normalize(),depth:a}}return!1}},{key:"capsuleIntersect",value:function(e){gr.copy(e);var t,n=[],i=!1;this.getCapsuleTriangles(gr,n);for(var r=0;r<n.length;r++)(t=this.triangleCapsuleIntersect(gr,n[r]))&&(i=!0,gr.translate(t.normal.multiplyScalar(t.depth)));if(i){var o=gr.getCenter(new Y).sub(e.getCenter(ur)),a=o.length();return{normal:o.normalize(),depth:a}}return!1}},{key:"rayIntersect",value:function(e){if(0!==e.direction.length()){var t,n,i=[],r=1e100;this.getRayTriangles(e,i);for(var o=0;o<i.length;o++){var a=e.intersectTriangle(i[o].a,i[o].b,i[o].c,!0,ur);if(a){var s=a.sub(e.origin).length();r>s&&(n=a.clone().add(e.origin),r=s,t=i[o])}}return r<1e100&&{distance:r,triangle:t,position:n}}}},{key:"fromGraphNode",value:function(e){var t=this;return e.updateWorldMatrix(!0,!0),e.traverse((function(e){if(!0===e.isMesh&&t.layers.test(e.layers)){var n,i=!1;null!==e.geometry.index?(i=!0,n=e.geometry.toNonIndexed()):n=e.geometry;for(var r=n.getAttribute("position"),o=0;o<r.count;o+=3){var a=(new Y).fromBufferAttribute(r,o),s=(new Y).fromBufferAttribute(r,o+1),l=(new Y).fromBufferAttribute(r,o+2);a.applyMatrix4(e.matrixWorld),s.applyMatrix4(e.matrixWorld),l.applyMatrix4(e.matrixWorld),t.addTriangle(new ze(a,s,l))}i&&n.dispose()}})),this.build(),this}},{key:"clear",value:function(){return this.box=null,this.bounds.makeEmpty(),this.subTrees.length=0,this.triangles.length=0,this}}])}(),wr=function(){return Qe((function e(t,n){Ye(this,e),this.name=t||"system",this.opts=null!=n?n:{},this.state="init"}),[{key:"init",value:function(){}},{key:"update",value:function(e){}},{key:"dispose",value:function(){}}])}(),Rr={size:3,height:.2},Ar=function(e){function t(e){var n;return Ye(this,t),(n=Xe(this,t,[e])).options=null!=e?e:{},n.object=null,n.pathFinder=new ar,n.worldOctree=new xr,n}return tt(t,wr),Qe(t,[{key:"init",value:function(){}},{key:"build",value:function(e,t){var n=this,i=ht.stage.scene;if(i){if(this.options.showHelper){var r=new sr(this.worldOctree);i.add(r)}e&&this.worldOctree.fromGraphNode(e,Rr),t&&t.traverse((function(e){e.isMesh&&(e.position.y+=.3,n.pathFinder.init(e))}))}}},{key:"dispose",value:function(){this.pathFinder=null,this.worldOctree=null}}])}(),Lr=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ye(this,t),(n=Xe(this,t,[e])).type="Reflector",n.camera=new _;var r=n,o=void 0!==i.color?new l(i.color):new l(8355711),a=i.textureWidth||512,s=i.textureHeight||512,u=i.clipBias||0,h=i.reflectivity||1,c=i.shader||t.ReflectorShader,d=void 0!==i.multisample?i.multisample:4,m=new Ne,p=new Y,v=new Y,g=new Y,y=new f,b=new Y(0,0,-1),S=new Fe,k=new Y,x=new Y,w=new Fe,R=new f,A=n.camera,L=new Re(a,s,{samples:d}),B=new xe({uniforms:we.clone(c.uniforms),fragmentShader:c.fragmentShader,vertexShader:c.vertexShader});return B.uniforms.tDiffuse.value=L.texture,B.uniforms.color.value=o,B.uniforms.textureMatrix.value=R,B.uniforms.reflectivity.value=h,n.material=B,n.onBeforeRender=function(e,t,n){if(v.setFromMatrixPosition(r.matrixWorld),g.setFromMatrixPosition(n.matrixWorld),y.extractRotation(r.matrixWorld),p.set(0,0,1),p.applyMatrix4(y),k.subVectors(v,g),!(k.dot(p)>0)){k.reflect(p).negate(),k.add(v),y.extractRotation(n.matrixWorld),b.set(0,0,-1),b.applyMatrix4(y),b.add(g),x.subVectors(v,b),x.reflect(p).negate(),x.add(v),A.position.copy(k),A.up.set(0,1,0),A.up.applyMatrix4(y),A.up.reflect(p),A.lookAt(x),A.far=n.far,A.updateMatrixWorld(),A.projectionMatrix.copy(n.projectionMatrix),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(A.projectionMatrix),R.multiply(A.matrixWorldInverse),R.multiply(r.matrixWorld),m.setFromNormalAndCoplanarPoint(p,v),m.applyMatrix4(A.matrixWorldInverse),S.set(m.normal.x,m.normal.y,m.normal.z,m.constant);var i=A.projectionMatrix;w.x=(Math.sign(S.x)+i.elements[8])/i.elements[0],w.y=(Math.sign(S.y)+i.elements[9])/i.elements[5],w.z=-1,w.w=(1+i.elements[10])/i.elements[14],S.multiplyScalar(2/S.dot(w)),i.elements[2]=S.x,i.elements[6]=S.y,i.elements[10]=S.z+1-u,i.elements[14]=S.w,L.texture.colorSpace=e.outputColorSpace,r.visible=!1;var o=e.getRenderTarget(),a=e.xr.enabled,s=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(L),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,A),e.xr.enabled=a,e.shadowMap.autoUpdate=s,e.setRenderTarget(o);var l=n.viewport;void 0!==l&&e.state.viewport(l),r.visible=!0}},n.getRenderTarget=function(){return L},n.dispose=function(){L.dispose(),r.material.dispose()},n}return tt(t,T),Qe(t)}();Lr.prototype.isReflector=!0,Lr.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <encodings_fragment>\n\n\t\t}"};var Br,Tr,Er,Cr,Mr,Pr,Or,_r,Ir={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null},reflectivity:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n    uniform float reflectivity;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat bo( float base, float blend ) {\n\n\t\t\treturn (base * reflectivity + blend) / (1.0 + reflectivity);\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( bo( base.r, blend.r ), bo( base.g, blend.g ), bo( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <colorspace_fragment>\n\n\t\t}"},Dr=function(){return Qe((function e(t){Ye(this,e),this.opts=null!=t?t:{},this.reflector=null}),[{key:"enable",value:function(t){var n,i,r,o;if(!this.reflector){var a=null===(n=ht.stage)||void 0===n?void 0:n.scene;if(a){var s=a.getObjectByName(t);if(s){var l=null===(i=ht.stage)||void 0===i?void 0:i.container;if(l){s.material.transparent=!0,s.material.opacity=null!==(r=this.opts.opacity)&&void 0!==r?r:.5;var u=new e.PlaneGeometry(100,100);this.reflector=new Lr(u,{clipBias:.003,textureWidth:.3*l.clientWidth,textureHeight:.3*l.clientHeight,color:null!==(o=Mi.mirror.color)&&void 0!==o?o:5468294,shader:Ir,reflectivity:.7}),this.reflector.position.y=-.007,this.reflector.rotateX(-Math.PI/2),a.add(this.reflector)}}}}}},{key:"update",value:function(){}},{key:"disable",value:function(){var e;if(this.reflector){var t=null===(e=ht.stage)||void 0===e?void 0:e.scene;t&&(t.remove(this.reflector),this.reflector=null)}}}])}(),Nr=function(e){function t(e,n){var i;return Ye(this,t),Je(i=Xe(this,t,[e]),"world",void 0),Je(i,"model",void 0),Je(i,"mCollider",void 0),Je(i,"mNav",void 0),Je(i,"mirror",void 0),i.opts=n||{},i.world=new Ar,i}return tt(t,Zi),Qe(t,[{key:"init",value:function(e,t){var n,i,r=this;e=null!==(n=e)&&void 0!==n?n:Mi.assetsPath+"scenes";var o=null===(i=this.opts.stageless)||void 0===i||i,a=o?"default":this.name,s=[{type:"base",name:a,url:"".concat(e,"/").concat(a,".glb"),visible:!o},{type:"collider",name:a+"_collider",url:"".concat(e,"/").concat(a,"_c.glb"),visible:!1},{type:"nav",name:a+"_nav",url:"".concat(e,"/navmesh/").concat(a,".glb"),visible:!1}];this.load(s,!0,(function(){r.world.build(r.mCollider,r.mNav),o||(r.mirror=new Dr({opacity:.7}),r.mirror.enable("floor")),ht.space=r,t&&t()}))}},{key:"load",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=new ft,s=new $i;s.setDecoderPath("/draco/"),a.setDRACOLoader(s);var l,u=0,h=e.length,c=Ze(e);try{var f=function(){var e=l.value;if(!e.url)return console.warn("invalid model url: ",e),h--,1;a.load(e.url,(function(r){var o,a=r.scene;e.name&&(a.name=e.name),a.visible=null===(o=e.visible)||void 0===o||o,"collider"===e.type?(t.mCollider=a,t.mCollider.visible=!1):"nav"===e.type?(t.mNav=a,t.mNav.visible=!1):"base"===e.type&&(t.model=a),!1!==n&&ht.stage&&ht.stage.scene.add(a),a.traverse((function(e){e.isMesh&&(e.receiveShadow=!0)})),++u>=h&&i&&i()}),(function(t){var n=t.loaded/t.total*100;r&&r(n,e.url,u)}),(function(e){h--,o&&o(e)}))};for(c.s();!(l=c.n()).done;)f()}catch(e){c.e(e)}finally{c.f()}}},{key:"update",value:function(e){this.mirror&&this.mirror.update(e)}}])}(),zr=function(){return Qe((function e(){Ye(this,e),this._parent=null}),[{key:"destroy",value:function(){}},{key:"setParent",value:function(e){this._parent=e}},{key:"init",value:function(){}},{key:"setEntity",value:function(){}},{key:"getComponent",value:function(e){return this._parent.getComponent(e)}},{key:"manager",get:function(){return this._parent.manager}},{key:"parent",get:function(){return this._parent}},{key:"findEntity",value:function(e){return this._parent.find(e)}},{key:"broadcast",value:function(e){this._parent.broadcast(e)}},{key:"update",value:function(e){}},{key:"registerHandler",value:function(e,t){this._parent.registerHandler(e,t)}}])}(),Hr=function(e){function t(e){var n;return Ye(this,t),Je(n=Xe(this,t),"opts",void 0),n.opts=e||{},n}return tt(t,zr),Qe(t,[{key:"init",value:function(){}},{key:"update",value:function(){}},{key:"onMessage",value:function(e){}},{key:"dispose",value:function(){}}])}(),Ur=function(e){function t(e){var n;return Ye(this,t),(n=Xe(this,t)).opts=e||{},n.context=n.opts.context,n.playerId=null,n.setupSocket(),n}return tt(t,Hr),Qe(t,[{key:"randomName",value:function(){var e=["Aspiring","Nameless","Cautious","Excited","Modest","Lovely","Decadent","Sleepy","Passionate","Robust"],t=["Painter","Baker","Front","Backend","AI","Product","Designer","Typist","Manager","HR","Operator"];return e[Math.floor(Math.random()*e.length)]+" "+t[Math.floor(Math.random()*t.length)]}},{key:"setupSocket",value:function(){var e=this,t=Mi.host,n=Mi.port;this.socket=je("wss://".concat(t,":").concat(n),{reconnection:!1,transports:["websocket"],rejectUnauthorized:!1,timeout:1e4}),this.socket.on("connect",(function(){var t=e.randomName();e.socket.id,e.socket.emit("login.commit",t)})),this.socket.on("disconnect",(function(){e.socket.id})),this.socket.onAny((function(t,n){e.onMessage(t,n)}))}},{key:"sendChat",value:function(e){this.socket.emit("chat.message",e)}},{key:"sendTransform",value:function(e){this.socket.emit("world.update",e)}},{key:"sendAction",value:function(){this.socket.emit("action.attack")}},{key:"sendInventoryChange",value:function(e){this.socket.emit("world.inventory",e)}},{key:"sendAssetsChange",value:function(e){this.socket.emit("world.assets",e)}},{key:"getEntityId",value:function(e){return e==this.playerId?"player":"__npc__"+e}},{key:"onMessage",value:function(e,t){if("world.player"==e){t.desc;var n=this.findEntity("spawner");if(n){var i=n.getComponent("PlayerSpawner");if(!i)return;var r=i.spawn("player",t.desc);r.broadcast({topic:"network.update",transform:t.transform}),r.broadcast({topic:"network.inventory",inventory:t.desc.character.inventory}),t.id,this.playerId=t.id}}else if("world.ai"==e){var o=this.findEntity("spawner");if(o)o.getComponent("AiSpawner").spawn(t.id,t.desc)}else if("world.update"==e){var a=t,s=this.findEntity("spawner");if(s){var l=s.getComponent("NpcSpawner");if(!l)return;var u,h=Ze(a);try{for(h.s();!(u=h.n()).done;){var c=u.value,f=this.getEntityId(c.id),d=null;"desc"in c?(d=l.spawn(f,c.desc))&&d.broadcast({topic:"network.inventory",inventory:c.desc.character.inventory}):d=this.findEntity(f);var m=[];if(c.events){var p,v=Ze(c.events);try{for(v.s();!(p=v.n()).done;){var g=p.value;m.push({type:g.type,context:this.findEntity(this.getEntityId(g.context)),attacker:this.findEntity(this.getEntityId(g.attacker)),amount:g.amount})}}catch(e){v.e(e)}finally{v.f()}}d&&d.broadcast({topic:"network.update",transform:c.transform,stats:c.stats,events:m})}}catch(e){h.e(e)}finally{h.f()}}}else if("chat.message"==e){this.findEntity("ui")&&getComponent("UIControls").addChatMessage(t);var y=this.manager.filter((function(e){return e.isNpc}));y.forEach((function(e){e.getComponent("NpcControls").onChat(t)}))}else if("world.inventory"==e){var b=this.getEntityId(t[0]),S=this.findEntity(b);if(!S)return;S.broadcast({topic:"network.inventory",inventory:t[1]})}}}])}(),Fr={getTheme:(Br=Ve(it().mark((function e(t){var n,i;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("themes/".concat(t,".json"),{cors:!0});case 3:return n=e.sent,e.next=6,n.json();case 6:return i=e.sent,e.abrupt("return",i);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),function(e){return Br.apply(this,arguments)}),login:function(e){},logout:function(e){},getAnswers:function(e,t){}},jr=function(e){function t(){var e;return Ye(this,t),(e=Xe(this,t)).themeId=null,e.assets=null,e}return tt(t,Hr),Qe(t,[{key:"init",value:function(){var e=this;this.registerHandler("input.themeChanged",(function(t){return e.onThemeChanged(t)}))}},{key:"onThemeChanged",value:function(e){var t=this,n=e.themeId;n&&Fr.getTheme(n).then((function(e){t.assets=e,e.textures.forEach((function(e){var t=ht.stage.getObjectByName(e.name);if(t&&t.isMesh){var n=(new re).load(e.map);n.flipY=t.material.map.flipY,n.wrapS=y,n.wrapT=y,t.material.map=n,t.material.needsUpdate=!0}})),e.hotspots.forEach((function(e){t.findEntity("ui").infoCard.update({info:e})}))}))}},{key:"dispose",value:function(){}}])}(),Wr=function(e){function t(e,n){var i;return Ye(this,t),(i=Xe(this,t,[e])).opts=n||{},i.isMMO=!0,i}return tt(t,Pi),Qe(t,[{key:"init",value:function(){this.addComponent("MMOService",new Ur),this.addComponent("AssetsService",new jr)}},{key:"dispose",value:function(){}}])}(),Gr=function(){return Qe((function e(){Ye(this,e),this.states={},this.currentState=null}),[{key:"addState",value:function(e,t){e=Vn(e),this.states[e]=t}},{key:"setState",value:function(e){e=Vn(e);var t=this.currentState;if(t){if(t.name==e)return;t.exit()}if(this.states[e]){var n=new this.states[e](this);this.currentState=n,n.enter(t)}else console.error("Invalid state: "+e)}},{key:"getCurrentState",value:function(){return this.currentState}},{key:"update",value:function(e,t){this.currentState&&this.currentState.update(e,t)}}])}(),Vr=(Er=function(t){function n(e,t){var i;return Ye(this,n),(i=Xe(this,n,[e]))._name=t,i._action=null,i}return tt(n,t),Qe(n,[{key:"name",get:function(){return this._name}},{key:"action",get:function(){return this._action}},{key:"enter",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"once";if(this._action=this._parent.proxy.animations.get(this.name),this._action)if(this._action.reset(),"once"===n?this._action.setLoop(e.LoopOnce,1):"repeat"===n?this._action.setLoop(e.LoopRepeat):"pingpong"===n&&this._action.setLoop(e.LoopPingPong),this._action.clampWhenFinished=!0,t){var i=this._parent.proxy.animations.get(t.name);i||(i=this._parent.proxy.animations.get("Idle")),this._action.crossFadeFrom(i,.2,!0),this._action.play()}else this._action.play()}},{key:"exit",value:function(){this._action.stop()}},{key:"pause",value:function(){this._action.paused=!0}},{key:"resume",value:function(){this._action.paused=!1}}])}(Tr=function(){return Qe((function e(t){Ye(this,e),this._parent=t}),[{key:"enter",value:function(){}},{key:"exit",value:function(){}},{key:"update",value:function(){}}])}()),Cr=function(t){function n(e){var t;return Ye(this,n),(t=Xe(this,n,[e]))._action=null,t}return tt(n,t),Qe(n,[{key:"name",get:function(){return"Death"}},{key:"action",get:function(){return this._action}},{key:"enter",value:function(t){if(this._action=this._parent.proxy.animations.get(this.name),this._action)if(this._action.reset(),this._action.setLoop(e.LoopOnce,1),this._action.clampWhenFinished=!0,t){var n=this._parent.proxy.animations.get(t.name);n||(n=this._parent.proxy.animations.get("Idle")),this._action.crossFadeFrom(n,.2,!0),this._action.play()}else this._action.play()}},{key:"exit",value:function(){}},{key:"update",value:function(e,t){}}])}(Tr),Mr=function(t){function n(e){var t;return Ye(this,n),(t=Xe(this,n,[e]))._action=null,t._finishedCallback=function(){t._finished()},t}return tt(n,t),Qe(n,[{key:"name",get:function(){return"Dance"}},{key:"enter",value:function(t){if(this._action=this._parent.proxy.animations.get(this.name),this._action)if(this._action.getMixer().addEventListener("finished",this._finishedCallback),this._action.reset(),this._action.setLoop(e.LoopOnce,1),this._action.clampWhenFinished=!0,t){var n=this._parent.proxy.animations.get(t.name);n||(n=this._parent.proxy.animations.get("Idle")),this._action.crossFadeFrom(n,.2,!0),this._action.play()}else this._action.play()}},{key:"_finished",value:function(){this._cleanup(),this._parent.setState("Idle")}},{key:"_cleanup",value:function(){this._action&&this._action.getMixer().removeEventListener("finished",this._finishedCallback)}},{key:"exit",value:function(){this._cleanup()}},{key:"update",value:function(e,t){}}])}(Tr),Pr=function(t){function n(e){var t;return Ye(this,n),(t=Xe(this,n,[e]))._action=null,t._finishedCallback=function(){t._finished()},t}return tt(n,t),Qe(n,[{key:"name",get:function(){return"Attack"}},{key:"enter",value:function(t){if(this._action=this._parent.proxy.animations.get(this.name),this._action)if(this._action.getMixer().addEventListener("finished",this._finishedCallback),t){var n=this._parent.proxy.animations.get(t.name);n||(n=this._parent.proxy.animations.get("Idle")),this._action.reset(),this._action.setLoop(e.LoopOnce,1),this._action.clampWhenFinished=!0,this._action.crossFadeFrom(n,.4,!0),this._action.play()}else this._action.play()}},{key:"_finished",value:function(){this._cleanup(),this._parent.setState("Idle")}},{key:"_cleanup",value:function(){this._action&&this._action.getMixer().removeEventListener("finished",this._finishedCallback)}},{key:"exit",value:function(){this._cleanup()}},{key:"update",value:function(e,t){if(t){var n=t.keys;(n.forward||n.backward||n.left||n.right)&&(n.shift?this._parent.setState("Run"):this._parent.setState("Walk"))}}}])}(Tr),Or=function(t){function n(e){return Ye(this,n),Xe(this,n,[e])}return tt(n,t),Qe(n,[{key:"name",get:function(){return"Walk"}},{key:"enter",value:function(t){if(this._action=this._parent.proxy.animations.get(this.name),this._action)if(this._action.setLoop(e.LoopRepeat),t){var n=this._parent.proxy.animations.get(t.name);if(n||(n=this._parent.proxy.animations.get("Idle")),this._action.enabled=!0,"Run"==t.name){var i=this._action.getClip().duration/n.getClip().duration;this._action.time=n.time*i}else this._action.time=0;this._action.crossFadeFrom(n,.1,!0),this._action.play()}else this._action.play()}},{key:"exit",value:function(){}},{key:"update",value:function(e,t){if(t){var n=t.keys;n.forward||n.backward||n.left||n.right?n.shift&&this._parent.setState("Run"):this._parent.setState("Idle")}}}])}(Tr),_r=function(e){function t(e){return Ye(this,t),Xe(this,t,[e])}return tt(t,e),Qe(t,[{key:"name",get:function(){return"Run"}},{key:"enter",value:function(e){if(this._action=this._parent.proxy.animations.get(this.name),this._action)if(e){var t=this._parent.proxy.animations.get(e.name);if(t||(t=this._parent.proxy.animations.get("Idle")),this._action.enabled=!0,"Walk"==e.name){var n=this._action.getClip().duration/t.getClip().duration;this._action.time=t.time*n}else this._action.time=0;this._action.crossFadeFrom(t,.1,!0),this._action.play()}else this._action.play()}},{key:"exit",value:function(){}},{key:"update",value:function(e,t){if(t){var n=t.keys;n.forward||n.backward||n.left||n.right?n.shift||this._parent.setState("Walk"):this._parent.setState("Idle")}}}])}(Tr),{State:Tr,MotionState:Er,DanceState:Mr,AttackState:Pr,IdleState:function(e){function t(e){return Ye(this,t),Xe(this,t,[e])}return tt(t,e),Qe(t,[{key:"name",get:function(){return"Idle"}},{key:"enter",value:function(e){if(this._action=this._parent.proxy.animations.get(this.name),this._action)if(e){var t=this._parent.proxy.animations.get(e.name);if(!t)return;this._action.time=0,this._action.enabled=!0,this._action.setEffectiveTimeScale(1),this._action.setEffectiveWeight(1),this._action.crossFadeFrom(t,.25,!0),this._action.play()}else this._action.play()}},{key:"exit",value:function(){}},{key:"update",value:function(e,t){if(t){var n=t.keys;n.forward||n.backward||n.left||n.right?this._parent.setState("Walk"):n.space?this._parent.setState("Attack"):n.backspace&&this._parent.setState("Dance")}}}])}(Tr),WalkState:Or,RunState:_r,DeathState:Cr}),Xr=function(e){function t(e){var n;return Ye(this,t),(n=Xe(this,t)).proxy=e,n.init(),n}return tt(t,Gr),Qe(t,[{key:"init",value:function(){this.addState("Idle",Vr.IdleState),this.addState("Walk",Vr.WalkState),this.addState("Run",Vr.RunState),this.addState("Attack",Vr.AttackState),this.addState("Death",Vr.DeathState),this.addState("Dance",Vr.DanceState),this.addState("Motion",Vr.MotionState)}}])}(),Yr=.35,Kr=function(t){function n(t){var i;return Ye(this,n),Je(i=Xe(this,n),"mixer",void 0),Je(i,"fsm",void 0),Je(i,"animations",new Map),Je(i,"playerDirection",new e.Vector3),Je(i,"rotateAngle",new e.Vector3(0,1,0)),Je(i,"rotateQuarternion",new e.Quaternion),Je(i,"cameraTarget",new e.Vector3),Je(i,"fadeDuration",.2),Je(i,"runVelocity",5),Je(i,"walkVelocity",2),Je(i,"playerOnFloor",!1),Je(i,"playerCollider",null),Je(i,"playerVelocity",new e.Vector3),Je(i,"playerDirection",new e.Vector3),Je(i,"playerStart",new e.Vector3(0,Yr,0)),Je(i,"playerEnd",new e.Vector3(0,1,0)),i.opts=t||{},i.mixer=null,i.fsm=new Xr(i),i.orbitControls=ht.stage.orbitControls,i.camera=ht.stage.camera,i.group=new e.Group,i.move=new e.Vector3,i}return tt(n,zr),Qe(n,[{key:"init",value:function(){var e=this,t=Mi.assetsPath+"characters/capsule.glb";"third-person"===this.opts.view?t=Mi.assetsPath+"characters/"+this.opts.desc.character.class+".glb":this.group.visible=!1,ht.stage.scene.add(this.group),this.loadModels(t,(function(){e.playerStart.set(e.group.position.x,Yr,e.group.position.z),e.playerEnd.set(e.group.position.x,1,e.group.position.z),e.playerCollider=new lr(e.playerStart,e.playerEnd,Yr)}))}},{key:"loadModels",value:function(t,n){var i=this,r=new ft,o=new $i;o.setDecoderPath("/draco/"),r.setDRACOLoader(o),r.load(t,(function(t){var r=t.scene;r.traverse((function(e){e.isMesh&&(e.castShadow=!0)})),i.group.add(r),i.mixer=new e.AnimationMixer(r),t.animations.filter((function(e){return"TPose"!=e.name})).forEach((function(e){i.animations.set(e.name,i.mixer.clipAction(e))})),i.fsm.setState("Idle"),i.broadcast({topic:"load.character",model:i.group}),n&&n()}))}},{key:"toggle",value:function(){this.running=!this.running}},{key:"playerCollisions",value:function(){if(ht.space){var e=ht.space.world.worldOctree.capsuleIntersect(this.playerCollider);this.playerOnFloor=!1,e&&(this.playerOnFloor=e.normal.y>0,this.playerOnFloor||this.playerVelocity.addScaledVector(e.normal,-e.normal.dot(this.playerVelocity)),this.playerCollider.translate(e.normal.multiplyScalar(e.depth)))}}},{key:"update",value:function(e){if(this.fsm.currentState){var t=ht.input.keys;if(this.fsm&&this.fsm.update(e,ht.input),this.mixer&&this.mixer.update(e),this.broadcast({topic:"player.action",action:this.fsm.currentState.name}),"Run"==this.fsm.currentState.name||"Walk"==this.fsm.currentState.name){var n=Math.atan2(this.camera.position.x-this.group.position.x,this.camera.position.z-this.group.position.z),i=this.directionOffset(t);this.rotateQuarternion.setFromAxisAngle(this.rotateAngle,n+i),this.group.quaternion.rotateTowards(this.rotateQuarternion,.2),this.camera.getWorldDirection(this.playerDirection),this.playerDirection.y=0,this.playerDirection.normalize(),this.playerDirection.applyAxisAngle(this.rotateAngle,i);var r="Run"==this.fsm.currentState.name?this.runVelocity:this.walkVelocity;this.playerVelocity=this.playerDirection.clone().multiplyScalar(r),this.updatePlayer(e)}else this.playerVelocity.set(0,0,0),this.move.set(0,0,0)}}},{key:"updatePlayer",value:function(e){var t=Math.exp(-4*e)-1;this.playerOnFloor||(this.playerVelocity.y-=30*e,t*=.1),this.playerVelocity.addScaledVector(this.playerVelocity,t);var n=this.playerVelocity.clone().multiplyScalar(e);this.playerCollider.translate(n),this.playerCollisions();var i=this.playerCollider.end.clone();i.y-=1,this.move=i.sub(this.group.position),this.group.position.copy(this.playerCollider.end),this.group.position.y-=1,this.parent.setPosition(this.group.position),this.parent.setQuaternion(this.group.quaternion)}},{key:"directionOffset",value:function(){var e=ht.input.keys,t=0;return e.forward?e.left?t=Math.PI/4:e.right&&(t=-Math.PI/4):e.backward?t=e.left?Math.PI/4+Math.PI/2:e.right?-Math.PI/4-Math.PI/2:Math.PI:e.left?t=Math.PI/2:e.right&&(t=-Math.PI/2),t}}])}(),qr=function(t){function n(e){var t;return Ye(this,n),(t=Xe(this,n)).opts=null!=e?e:{},t}return tt(n,zr),Qe(n,[{key:"init",value:function(){var t=this;this._keys={forward:!1,backward:!1,left:!1,right:!1,space:!1,shift:!1,backspace:!1},this.raycaster=new e.Raycaster,document.addEventListener("keydown",(function(e){return t.onKeyDown(e)}),!1),document.addEventListener("keyup",(function(e){return t.onKeyUp(e)}),!1),document.addEventListener("pointerup",(function(e){return t.onMouseUp(e)}),!1)}},{key:"onMouseUp",value:function(e){var t,n=ht.stage.container.getBoundingClientRect(),i={x:(e.clientX-n.left)/n.width*2-1,y:(e.clientY-n.top)/n.height*-2+1},r=ht.stage.camera;if(r){this.raycaster.setFromCamera(i,r);var o=[],a=null===(t=this.findEntity("mmo").getComponent("AssetsService").assets)||void 0===t?void 0:t.hotspots;if(a)for(var s=0;s<a.length;s++){var l=a[s],u=ht.stage.getObjectByName(l.name);u&&o.push(u)}var h=this.raycaster.intersectObjects(o,!0);if(h.length>0){var c=h[0];this.findEntity("ui").broadcast({topic:"input.picked",object:c})}}}},{key:"onKeyDown",value:function(e){if(e.currentTarget.activeElement==ht.container){switch(e.keyCode){case 87:this._keys.forward=!0;break;case 65:this._keys.left=!0;break;case 83:this._keys.backward=!0;break;case 68:this._keys.right=!0;break;case 32:this._keys.space=!0;break;case 16:this._keys.shift=!0;break;case 8:this._keys.backspace=!0}var t=this.findEntity("ui");if(t)t.keyDisplay.down(e.key)}}},{key:"onKeyUp",value:function(e){if(e.currentTarget.activeElement==ht.container){switch(e.keyCode){case 87:this._keys.forward=!1;break;case 65:this._keys.left=!1;break;case 83:this._keys.backward=!1;break;case 68:this._keys.right=!1;break;case 32:this._keys.space=!1;break;case 16:this._keys.shift=!1;break;case 8:this._keys.backspace=!1}var t=this.findEntity("ui");if(t)t.keyDisplay.up(e.key)}}},{key:"keys",get:function(){return this._keys}}])}(),Qr=function(t){function n(t){var i;return Ye(this,n),(i=Xe(this,n)).opts=t,i.target=t.target,i.camera=ht.stage.camera,i.orbitControls=ht.stage.orbitControls,i.position=new e.Vector3,i.lookAt=new e.Vector3,i}return tt(n,zr),Qe(n,[{key:"init",value:function(){var t=(new e.Vector3).fromArray(Mi.player.startPoint),n=Mi.distCamera2Player,i=(new e.Vector3).fromArray(Mi.player.startDirection).multiplyScalar(-n);this.camera.position.copy(t.clone().add(i))}},{key:"update",value:function(e){var t=this.target.group;if(t){if(e){var n=this.target.move;this.camera.position.add(n)}this.lookAt.x=t.position.x,this.lookAt.y=t.position.y+1.3,this.lookAt.z=t.position.z,this.orbitControls&&(this.orbitControls.target=this.lookAt)}}}])}(),Zr=function(t){function n(t){var i;return Ye(this,n),(i=Xe(this,n)).opts=t,i.target=t.target,i.camera=ht.stage.camera,i.orbitControls=ht.stage.orbitControls,i.position=new e.Vector3,i.lookAt=new e.Vector3,i}return tt(n,zr),Qe(n,[{key:"init",value:function(){var t=(new e.Vector3).fromArray(Mi.player.startPoint);this.camera.position.copy(t),this.camera.position.y=Mi.cameraHeight}},{key:"update",value:function(e){var t=this.target.group;if(t){if(e){var n=this.target.move;this.camera.position.add(n)}this.lookAt.x=t.position.x,this.lookAt.y=t.position.y+Mi.cameraHeight,this.lookAt.z=t.position.z,this.orbitControls&&(this.orbitControls.target=this.lookAt)}}}])}(),Jr=function(t){function n(){var e;return Ye(this,n),(e=Xe(this,n)).updateTimer=0,e.loaded=!1,e.service=null,e}return tt(n,zr),Qe(n,[{key:"init",value:function(){var e=this;this.registerHandler("load.character",(function(t){e.onLoad(t)})),this.registerHandler("network.update",(function(t){e.onNetworkUpdate(t)})),this.service=this.findEntity("mmo").getComponent("MMOService")}},{key:"onNetworkUpdate",value:function(t){t.transform&&(this.parent.setPosition(Ke(e.Vector3,at(t.transform[1]))),this.parent.setQuaternion(Ke(e.Quaternion,at(t.transform[2])))),t.stats&&this.broadcast({topic:"stats.network",value:t.stats}),t.events&&t.events.length>0&&this.broadcast({topic:"events.network",value:t.events})}},{key:"onLoad",value:function(){this.loaded=!0}},{key:"createTransformPacket",value:function(){return[this.getComponent("BasicCharacterControls").fsm.currentState.name,this.parent.position.toArray(),this.parent.quaternion.toArray()]}},{key:"update",value:function(e){this.updateTimer-=e,this.updateTimer<=0&&this.loaded&&(this.updateTimer=.1,this.service.sendTransform(this.createTransformPacket()))}}])}(),$r=function(e){function t(e,n){var i;return Ye(this,t),Je(i=Xe(this,t,[e]),"controls",void 0),i.opts=n||{},i.isPlayer=!0,i}return tt(t,Pi),Qe(t,[{key:"init",value:function(){ht.input=new qr(this.opts),this.addComponent("CharacterControllerInput",ht.input),this.controls=new Kr(this.opts),this.addComponent("BasicCharacterControls",this.controls),"third-person"===this.opts.view?(this.cameraMan=new Qr({target:this.controls}),this.addComponent("ThirdPersonCamera",this.cameraMan)):(this.cameraMan=new Zr({target:this.controls}),this.addComponent("FirstPersonCamera",this.cameraMan)),this.addComponent("PlayerService",new Jr({target:this})),this.updateTimer=0}},{key:"dispose",value:function(){}}])}(),eo=[{k:"Idle",v:"idle/F_Standing_Idle_001"},{k:"Walk",v:"locomotion/F_Walk_002"},{k:"Run",v:"locomotion/F_Run_001"},{k:"Express",v:"expression/M_Standing_Expressions_001"},{k:"Dance",v:"dance/F_Dances_001"}],to={A:"viseme_PP",B:"viseme_kk",C:"viseme_I",D:"viseme_AA",E:"viseme_O",F:"viseme_U",G:"viseme_FF",H:"viseme_TH",X:"viseme_PP"},no=["eyeBlinkLeft","eyeLookDownLeft","eyeLookInLeft","eyeLookOutLeft","eyeLookUpLeft","eyeSquintLeft","eyeWideLeft","eyeBlinkRight","eyeLookDownRight","eyeLookInRight","eyeLookOutRight","eyeLookUpRight","eyeSquintRight","eyeWideRight","jawForward","jawLeft","jawRight","jawOpen","mouthClose","mouthFunnel","mouthPucker","mouthLeft","mouthRight","mouthSmileLeft","mouthSmileRight","mouthFrownLeft","mouthFrownRight","mouthDimpleLeft","mouthDimpleRight","mouthStretchLeft","mouthStretchRight","mouthRollLower","mouthRollUpper","mouthShrugLower","mouthShrugUpper","mouthPressLeft","mouthPressRight","mouthLowerDownLeft","mouthLowerDownRight","mouthUpperUpLeft","mouthUpperUpRight","browDownLeft","browDownRight","browInnerUp","browOuterUpLeft","browOuterUpRight","cheekPuff","cheekSquintLeft","cheekSquintRight","noseSneerLeft","noseSneerRight","tongueOut","headRoll","leftEyeRoll","rightEyeRoll"],io=function(t){function n(e){var t;return Ye(this,n),(t=Xe(this,n)).opts=e,t.visible=!0,t}return tt(n,zr),Qe(n,[{key:"dispose",value:function(){this.sprite?(this.sprite.traverse((function(e){if(e.material){var t=e.material;e.material instanceof Array||(t=[e.material]);var n,i=Ze(t);try{for(i.s();!(n=i.n()).done;){n.value.dispose()}}catch(e){i.e(e)}finally{i.f()}}e.geometry&&e.geometry.dispose()})),this.sprite.parent&&this.sprite.parent.remove(this.sprite)):this.visible=!1}},{key:"init",value:function(){var e=this;this.registerHandler("load.character",(function(t){e.createSprite(t)})),this.registerHandler("health.death",(function(t){e.onDeath(t)}))}},{key:"onDeath",value:function(){this.destroy()}},{key:"createSprite",value:function(t){if(this.visible){this.element=document.createElement("canvas"),this.context=this.element.getContext("2d"),this.context.canvas.width=1024,this.context.canvas.height=512,this.context.fillStyle="#FFF",this.context.font="18pt Helvetica",this.context.shadowOffsetX=3,this.context.shadowOffsetY=3,this.context.shadowColor="rgba(0,0,0,0.3)",this.context.shadowBlur=4,this.context.textAlign="center",this.context.fillText(this.opts.desc.nickname,512,256);var n=new e.CanvasTexture(this.context.canvas);this.sprite=new e.Sprite(new e.SpriteMaterial({map:n,color:16777215,fog:!1})),this.sprite.scale.set(4,2,2),this.sprite.position.y+=1.85,t.model.add(this.sprite)}}}])}(),ro={animations:[{k:"Idle",v:"idle/F_Standing_Idle_001"},{k:"Express",v:"expression/M_Standing_Expressions_001"},{k:"Walk",v:"locomotion/F_Walk_002"}]},oo=function(){return Qe((function e(t,n){Ye(this,e),n=n||{},this.text=t,this.role=n.role,this.style=n.style,this.styledegree=n.styledegree,this.lipsync=n.lipsync,this.motions=n.motions,this.state="init"}),[{key:"dispose",value:function(){this.text=null,this.opts=null}}])}();var ao=function(){return Qe((function e(){Ye(this,e)}),[{key:"createAnimation",value:function(e,t){if(t){var n=t.morphTargetDictionary,i=t.name;if(0!=e.length){for(var r=[],o=0;o<Object.keys(n).length;o++)r.push([]);var a=[],s=0;e.forEach((function(e,t){Object.entries(e.blendshapes).forEach((function(e){var t=ot(e,2),i=t[0],o=t[1];i in n&&("mouthShrugUpper"==i&&(o+=.4),r[n[i]].push(o))})),a.push(s/30),s++}));var l=[];return Object.entries(e[0].blendshapes).forEach((function(e){var t=ot(e,2),o=t[0];if(t[1],o in n){var s=n[o],u=new le("".concat(i,".morphTargetInfluences[").concat(s,"]"),a,r[s]);l.push(u)}})),new z("animation",-1,l)}return null}}}])}(),so=function(){return Qe((function e(t,n){Ye(this,e),this.index=0,this.start=null!=t?t:new Y,this.end=null!=n?n:new Y,this.dir=new Y,this.dist=0,this.offset=0,this.theta=0,this.tbTheta=0,this.stayTime=0,this.fixed=!1,this.isNpcPhase=!0}),[{key:"getDirection",value:function(){return this.dir=this.end.clone().sub(this.start).normalize(),this.dir}},{key:"getDistance",value:function(){return this.dist=this.end.distanceTo(this.start),this.dist}}])}(),lo=new Y(0,0,1),uo=function(e){function t(e){var n;return Ye(this,t),(n=Xe(this,t,[e])).phases=[],n.phaseIndex=0,n.phaseTurnTime=1,n.object=null,n.onEnd=null,n.startDirection=lo,n.speedFactor=1,n}return tt(t,wr),Qe(t,[{key:"init",value:function(e,t,n,i){var r;if(e&&t&&!(t.length<2)){this.object=e,this.onEnd=n,(i=i||{}).startDirection&&this.startDirection.fromArray(i.startDirection),this.speedFactor=null!==(r=i.speedFactor)&&void 0!==r?r:1;for(var o=0;o<t.length;o+=2){var a=(new Y).fromArray(t[o]),s=(new Y).fromArray(t[o+1]),l=new so(a,s);l.getDirection(),this.phases.push(l)}}}},{key:"update",value:function(e){if(this.object){var t=this.phases[this.phaseIndex];if(t){var n=this.phases[this.phaseIndex-1];if(t.offset<=0)if(this.phaseTurnTime-=e,this.phaseTurnTime<=0)t.offset+=e,this.phaseTurnTime=1;else{var i=0;i=n?t.dir.angleTo(n.dir):t.dir.angleTo(lo),this.object.rotateY(i*e/1)}else{if(t.offset+=e*this.speedFactor,t.offset>=1)return this.phaseIndex++,void(this.phaseIndex>=this.phases.length&&this.onEnd&&this.onEnd());var r=t.start,o=t.end,a=t.offset;this.object.position.copy(r).lerp(o,a)}}}}},{key:"stop",value:function(){this.phases=[],this.phaseIndex=0}},{key:"dispose",value:function(){}}])}(),ho={"male.default":"zh-CN-YunfengNeural","male.yunfeng":"zh-CN-YunfengNeural","female.default":"zh-CN-XiaohanNeural","female.xiaohan":"zh-CN-XiaohanNeural","female.xiaomo":"zh-CN-XiaomoNeural"},co=[{time:.7666666666666674,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.7833333333333341,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.8000000000000008,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.8166666666666675,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.8333333333333343,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.850000000000001,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.8666666666666677,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.8833333333333344,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.9000000000000011,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.9166666666666679,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.9333333333333346,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.9500000000000013,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.966666666666668,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:.9833333333333347,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.0000000000000013,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.016666666666668,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.0333333333333345,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.0500000000000012,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.0666666666666678,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.0833333333333344,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.100000000000001,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.1166666666666676,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.1333333333333342,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.1500000000000008,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.1666666666666674,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.183333333333334,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.2000000000000006,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.2166666666666672,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.2333333333333338,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.2500000000000004,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.266666666666667,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.2833333333333337,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.3000000000000003,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.3166666666666669,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.3333333333333335,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.35,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.3666666666666667,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.3833333333333333,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.4,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.4166666666666665,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.4333333333333331,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.4499999999999997,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.4666666666666663,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.483333333333333,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.4999999999999996,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.5166666666666662,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.5333333333333328,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.5499999999999994,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.566666666666666,blendshapes:{eyeBlinkLeft:.004,eyeBlinkRight:.004,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.5833333333333326,blendshapes:{eyeBlinkLeft:.174,eyeBlinkRight:.174,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.5999999999999992,blendshapes:{eyeBlinkLeft:.391,eyeBlinkRight:.391,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.6166666666666658,blendshapes:{eyeBlinkLeft:.581,eyeBlinkRight:.58,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.6333333333333324,blendshapes:{eyeBlinkLeft:.848,eyeBlinkRight:.848,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.649999999999999,blendshapes:{eyeBlinkLeft:.87,eyeBlinkRight:.869,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.6666666666666656,blendshapes:{eyeBlinkLeft:.628,eyeBlinkRight:.628,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.6833333333333322,blendshapes:{eyeBlinkLeft:.454,eyeBlinkRight:.454,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.6999999999999988,blendshapes:{eyeBlinkLeft:.339,eyeBlinkRight:.339,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.7166666666666655,blendshapes:{eyeBlinkLeft:.227,eyeBlinkRight:.227,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.733333333333332,blendshapes:{eyeBlinkLeft:.154,eyeBlinkRight:.154,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.7499999999999987,blendshapes:{eyeBlinkLeft:.104,eyeBlinkRight:.104,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.7666666666666653,blendshapes:{eyeBlinkLeft:.076,eyeBlinkRight:.076,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.7833333333333319,blendshapes:{eyeBlinkLeft:.039,eyeBlinkRight:.039,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.7999999999999985,blendshapes:{eyeBlinkLeft:.019,eyeBlinkRight:.019,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.816666666666665,blendshapes:{eyeBlinkLeft:.01,eyeBlinkRight:.01,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.8333333333333317,blendshapes:{eyeBlinkLeft:.005,eyeBlinkRight:.005,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.8499999999999983,blendshapes:{eyeBlinkLeft:.002,eyeBlinkRight:.002,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.866666666666665,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.8833333333333315,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.8999999999999981,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.9166666666666647,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.9333333333333313,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.949999999999998,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.9666666666666646,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.9833333333333312,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:1.9999999999999978,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.0166666666666644,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.033333333333331,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.0499999999999976,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.066666666666664,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.083333333333331,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.0999999999999974,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.116666666666664,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.1333333333333306,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.1499999999999972,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.166666666666664,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.1833333333333305,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.199999999999997,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.2166666666666637,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.2333333333333303,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.249999999999997,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.2666666666666635,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.28333333333333,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.2999999999999967,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.3166666666666633,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.33333333333333,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.3499999999999965,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.366666666666663,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.3833333333333298,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.3999999999999964,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.416666666666663,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.4333333333333296,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.449999999999996,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.466666666666663,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.4833333333333294,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.499999999999996,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.5166666666666626,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.533333333333329,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.549999999999996,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.5666666666666624,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.583333333333329,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.5999999999999956,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.6166666666666623,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.633333333333329,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.6499999999999955,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.666666666666662,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.6833333333333287,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.6999999999999953,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.716666666666662,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.7333333333333285,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.749999999999995,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.7666666666666617,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.7833333333333283,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.799999999999995,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.8166666666666615,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.833333333333328,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.8499999999999948,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.8666666666666614,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.883333333333328,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.8999999999999946,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.916666666666661,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.933333333333328,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.9499999999999944,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.966666666666661,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.9833333333333276,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:2.9999999999999942,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.016666666666661,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.0333333333333274,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.049999999999994,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.0666666666666607,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.0833333333333273,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.099999999999994,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.1166666666666605,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.133333333333327,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.1499999999999937,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.1666666666666603,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.183333333333327,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.1999999999999935,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.21666666666666,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.2333333333333267,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.2499999999999933,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.26666666666666,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.2833333333333266,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.299999999999993,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.3166666666666598,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.3333333333333264,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.349999999999993,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.3666666666666596,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.383333333333326,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.399999999999993,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.4166666666666594,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.433333333333326,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.4499999999999926,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.4666666666666592,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.483333333333326,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.4999999999999925,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.516666666666659,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.5333333333333257,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.5499999999999923,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.566666666666659,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.5833333333333255,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.599999999999992,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.6166666666666587,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.6333333333333253,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.649999999999992,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.6666666666666585,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.683333333333325,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.6999999999999917,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.7166666666666583,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.733333333333325,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.7499999999999916,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.766666666666658,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.7833333333333248,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.7999999999999914,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.816666666666658,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.8333333333333246,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.849999999999991,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.866666666666658,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.8833333333333244,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.899999999999991,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.9166666666666576,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.9333333333333242,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.949999999999991,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.9666666666666575,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.983333333333324,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:3.9999999999999907,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.016666666666658,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.033333333333324,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.049999999999991,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.0666666666666575,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.083333333333324,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.099999999999991,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.116666666666657,blendshapes:{eyeBlinkLeft:.119,eyeBlinkRight:.119,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.133333333333324,blendshapes:{eyeBlinkLeft:.283,eyeBlinkRight:.283,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.149999999999991,blendshapes:{eyeBlinkLeft:.423,eyeBlinkRight:.423,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.166666666666657,blendshapes:{eyeBlinkLeft:.502,eyeBlinkRight:.502,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.183333333333324,blendshapes:{eyeBlinkLeft:.464,eyeBlinkRight:.464,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.19999999999999,blendshapes:{eyeBlinkLeft:.35,eyeBlinkRight:.35,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.216666666666657,blendshapes:{eyeBlinkLeft:.229,eyeBlinkRight:.229,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.233333333333324,blendshapes:{eyeBlinkLeft:.142,eyeBlinkRight:.143,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.24999999999999,blendshapes:{eyeBlinkLeft:.103,eyeBlinkRight:.103,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.266666666666657,blendshapes:{eyeBlinkLeft:.072,eyeBlinkRight:.072,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.2833333333333234,blendshapes:{eyeBlinkLeft:.04,eyeBlinkRight:.04,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.29999999999999,blendshapes:{eyeBlinkLeft:.022,eyeBlinkRight:.022,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.316666666666657,blendshapes:{eyeBlinkLeft:.012,eyeBlinkRight:.012,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.333333333333323,blendshapes:{eyeBlinkLeft:.007,eyeBlinkRight:.007,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.34999999999999,blendshapes:{eyeBlinkLeft:.005,eyeBlinkRight:.005,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.3666666666666565,blendshapes:{eyeBlinkLeft:.003,eyeBlinkRight:.003,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.383333333333323,blendshapes:{eyeBlinkLeft:.002,eyeBlinkRight:.002,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.39999999999999,blendshapes:{eyeBlinkLeft:.002,eyeBlinkRight:.002,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.416666666666656,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.433333333333323,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.4499999999999895,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.466666666666656,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.483333333333323,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.499999999999989,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.516666666666656,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.533333333333323,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.549999999999989,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.566666666666656,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.583333333333322,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.599999999999989,blendshapes:{eyeBlinkLeft:.001,eyeBlinkRight:.001,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.616666666666656,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.633333333333322,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.649999999999989,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.666666666666655,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.683333333333322,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.699999999999989,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.716666666666655,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.733333333333322,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.7499999999999885,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.766666666666655,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.783333333333322,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.799999999999988,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.816666666666655,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.8333333333333215,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.849999999999988,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.866666666666655,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.883333333333321,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.899999999999988,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.9166666666666545,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.933333333333321,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.949999999999988,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.966666666666654,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.983333333333321,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:4.999999999999988,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.016666666666654,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.033333333333321,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.049999999999987,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.066666666666654,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.083333333333321,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.099999999999987,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.116666666666654,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.13333333333332,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.149999999999987,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.166666666666654,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.18333333333332,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.199999999999987,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.2166666666666535,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.23333333333332,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.249999999999987,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.266666666666653,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.28333333333332,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.2999999999999865,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.316666666666653,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.33333333333332,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.349999999999986,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.366666666666653,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.3833333333333195,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.399999999999986,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.416666666666653,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.433333333333319,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.449999999999986,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.466666666666653,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.483333333333319,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.499999999999986,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.516666666666652,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.533333333333319,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.549999999999986,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.566666666666652,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.583333333333319,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.599999999999985,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.616666666666652,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.633333333333319,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.649999999999985,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.666666666666652,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.6833333333333185,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.699999999999985,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.716666666666652,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.733333333333318,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.749999999999985,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.7666666666666515,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.783333333333318,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.799999999999985,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.816666666666651,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.833333333333318,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.8499999999999845,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.866666666666651,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.883333333333318,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.899999999999984,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.916666666666651,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.933333333333318,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.949999999999984,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.966666666666651,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.983333333333317,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:5.999999999999984,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.016666666666651,blendshapes:{eyeBlinkLeft:.002,eyeBlinkRight:.002,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.033333333333317,blendshapes:{eyeBlinkLeft:.158,eyeBlinkRight:.158,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.049999999999984,blendshapes:{eyeBlinkLeft:.313,eyeBlinkRight:.313,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.06666666666665,blendshapes:{eyeBlinkLeft:.461,eyeBlinkRight:.461,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.083333333333317,blendshapes:{eyeBlinkLeft:.517,eyeBlinkRight:.516,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.099999999999984,blendshapes:{eyeBlinkLeft:.441,eyeBlinkRight:.441,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.11666666666665,blendshapes:{eyeBlinkLeft:.343,eyeBlinkRight:.343,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.133333333333317,blendshapes:{eyeBlinkLeft:.246,eyeBlinkRight:.246,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.1499999999999835,blendshapes:{eyeBlinkLeft:.161,eyeBlinkRight:.161,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.16666666666665,blendshapes:{eyeBlinkLeft:.111,eyeBlinkRight:.11,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.183333333333317,blendshapes:{eyeBlinkLeft:.067,eyeBlinkRight:.066,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.199999999999983,blendshapes:{eyeBlinkLeft:.008,eyeBlinkRight:.009,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.21666666666665,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.2333333333333165,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.249999999999983,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.26666666666665,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.283333333333316,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.299999999999983,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.3166666666666496,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.333333333333316,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.349999999999983,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.366666666666649,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.383333333333316,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.399999999999983,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.416666666666649,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.433333333333316,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.449999999999982,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.466666666666649,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.483333333333316,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.499999999999982,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.516666666666649,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.5333333333333155,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.549999999999982,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.566666666666649,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.583333333333315,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.599999999999982,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.6166666666666485,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.633333333333315,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.649999999999982,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.666666666666648,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.683333333333315,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.6999999999999815,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.716666666666648,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.733333333333315,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.749999999999981,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.766666666666648,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.783333333333315,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.799999999999981,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.816666666666648,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.833333333333314,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.849999999999981,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.866666666666648,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.883333333333314,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}},{time:6.899999999999981,blendshapes:{eyeBlinkLeft:0,eyeBlinkRight:0,mouthSmileLeft:.3,mouthSmileRight:.3}}],fo=function(t){function n(e){var t,i;return Ye(this,n),(i=Xe(this,n)).opts=e,i.loader=null,i.mixer=null,i.fsm=new Xr(i),i.bsMap=new Map,i.chatMode="read",i.onChatEnd=function(){},i.expressions=[],i.navigator=new uo,i.idleBSAction=null,i.aniRoot=null!==(t=Mi.animateLibrary)&&void 0!==t?t:"/assets/models/anis/",i}return tt(n,zr),Qe(n,[{key:"dispose",value:function(){this.group.traverse((function(e){if(e.material){var t=e.material;e.material instanceof Array||(t=[e.material]);var n,i=Ze(t);try{for(i.s();!(n=i.n()).done;){n.value.dispose()}}catch(e){i.e(e)}finally{i.f()}}e.geometry&&e.geometry.dispose()})),ht.stage.scene.remove(this.group)}},{key:"isIdle",value:function(){return"Idle"===this.fsm.currentState.name}},{key:"init",value:(r=Ve(it().mark((function t(){var n,i,r,o,a,s,l,u=this;return it().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animations=new Map,this.group=new e.Group,ht.stage.scene.add(this.group),this.queuedState=null,a=null!==(n=null===(i=this.opts)||void 0===i||null===(i=i.desc)||void 0===i?void 0:i.gender)&&void 0!==n?n:"male",s=null!==(r=null===(o=this.opts)||void 0===o||null===(o=o.desc)||void 0===o?void 0:o.model)&&void 0!==r?r:Mi.assetsPath+"characters/"+a+".glb",this.loader=new ft,(l=new $i).setDecoderPath("/draco/"),this.loader.setDRACOLoader(l),t.next=12,this.loadModels(s);case 12:this.fsm.setState("Idle"),this.broadcast({topic:"load.character",model:this.group}),this.registerHandler("update.position",(function(e){u.onPosition(e)})),this.registerHandler("update.rotation",(function(e){u.onRotation(e)})),this.registerHandler("chat.message",(function(e){u.onChat(e)}));case 17:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"loadModels",value:(i=Ve(it().mark((function t(n){var i,r,o,a,s,l,u,h,c,f,d,m,p,v,g,y=this;return it().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.loadAsync(n);case 2:for(i=t.sent,r=this.model=i.scene,this.mixer=new e.AnimationMixer(r),r.traverse((function(e){e.isMesh&&(e.castShadow=!0),e.morphTargetDictionary&&y.setupBS(e)})),r.visible=!1,this.group.add(r),ht.useInnerMorph&&(s=null!==(o=null===(a=this.opts.desc)||void 0===a?void 0:a.head)&&void 0!==o?o:"My_Head",l=this.group.getObjectByName(s),u=new ao,h=u.createAnimation(co,l),this.idleBSAction=this.mixer.clipAction(h),this.idleBSAction.play()),c=[],f=0;f<ro.animations.length;f++)d=ro.animations[f],c.push(this.aniRoot+d.v+".glb");m=0,p=0;case 13:if(!(p<c.length)){t.next=24;break}return v=c[p],t.next=17,this.loader.loadAsync(v);case 17:g=t.sent,this.setupAnimations(g,r),++m>=c.length&&(r.visible=!0);case 21:p++,t.next=13;break;case 24:case"end":return t.stop()}}),t,this)}))),function(e){return i.apply(this,arguments)})},{key:"setupAnimations",value:function(e){var t=this;e.animations.filter((function(e){return"TPose"!=e.name})).forEach((function(e){var n=t.mixer.clipAction(e),i=eo.find((function(t){return t.v.includes(e.name)}));t.animations.set(i.k,n)}))}},{key:"setupBS",value:function(e){if(e.morphTargetDictionary)for(var t=["JawOpen","EyeBlink_L","EyeBlink_R"],n=Object.keys(e.morphTargetDictionary),i=0;i<n.length;i++){var r=e.name+"..."+n[i];Gn?this.bsMap.set(r,{key:i,weights:e.morphTargetInfluences}):(console.warn("webgl2 is not supported, therefore applying low quality animation."),t.includes(r)&&this.bsMap.set(r,{key:i,weights:e.morphTargetInfluences}))}}},{key:"setState",value:function(e){this.fsm?this.fsm.setState(e):this.queuedState=e}},{key:"onDeath",value:function(e){this.setState("death")}},{key:"onPosition",value:function(e){this.group.position.copy(e.value)}},{key:"onRotation",value:function(e){this.group.quaternion.copy(e.value)}},{key:"onChat",value:function(e){this.chat(e)}},{key:"addExpression",value:function(e){this.expressions.push(e)}},{key:"getExpression",value:function(e){return this.expressions.find((function(t){return t.text===e}))}},{key:"getExpressionsByState",value:function(e){return this.expressions.filter((function(t){return t.state===e}))}},{key:"getSpeech",value:function(e){if("active"!==e.state){var t=e.text,n=e.role,i=e.style,r=e.styledegree,o=Ss.getSystem("tts");if(o){var a,s,l,u;if(this.getExpressionsByState("active").length>=o.acl.limit)return;var h=null!==(a=null===(s=this.opts)||void 0===s||null===(s=s.desc)||void 0===s?void 0:s.gender)&&void 0!==a?a:"male",c=null!==(l=null===(u=this.opts)||void 0===u||null===(u=u.desc)||void 0===u?void 0:u.voice)&&void 0!==l?l:"default";if(!(c=ho[c=h+"."+c]))return void console.warn("[sdk] invalid voice");o.setParams({text:t,voice:c,role:n,style:i,styledegree:r}),o.start(),e.state="active"}}}},{key:"clearContexts",value:function(){var e=Ss.getSystem("llm");e&&e.clearContexts()}},{key:"setRole",value:function(e){var t=Ss.getSystem("llm");t&&t.setRole(e)}},{key:"testSpeech",value:function(e){var t=new Audio("assets/audios/female_hello.ogg");t.addEventListener("loadeddata",Ve(it().mark((function e(){var n,i;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.play(),e.next=3,fetch("assets/audios/female_hello.json",{cors:!0});case 3:return n=e.sent,e.next=6,n.json();case 6:i=e.sent,lipsync={source:"rhubarb",audio:t,sheet:i};case 8:case"end":return e.stop()}}),e)}))))}},{key:"mouthUpDown",value:function(e){var t,n=this.bsMap,i=Ze(new Map(at(n).filter((function(e){return e[0].includes("jawOpen")}))).entries());try{for(i.s();!(t=i.n()).done;){var r=ot(t.value,2),o=(r[0],r[1]);o.weights[o.key]=e}}catch(e){i.e(e)}finally{i.f()}}},{key:"resetBs",value:function(){this.idleBSAction&&this.idleBSAction.play()}},{key:"clearBs",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var t,n=Ze(this.bsMap.entries());try{for(n.s();!(t=n.n()).done;){var i=ot(t.value,2),r=(i[0],i[1]);r.weights[r.key]=e.MathUtils.lerp(r.weights[r.key],0,.5)}}catch(e){n.e(e)}finally{n.f()}}else{var o,a=Ze(this.bsMap.entries());try{for(a.s();!(o=a.n()).done;){var s=ot(o.value,2),l=(s[0],s[1]);l.weights[l.key]=0}}catch(e){a.e(e)}finally{a.f()}}}},{key:"resetTts",value:function(){var e=Ss.getSystem("tts");e&&e.setStatus("init")}},{key:"idle",value:function(){this.fsm.setState("Idle"),this.resetBs(),this.resetTts()}},{key:"update",value:function(t){var n=this;if(this.fsm){this.fsm.update(t,null),this.mixer&&this.mixer.update(t),this.navigator&&this.navigator.update(t);var i,r=this.group.getObjectByName("Hips");if(r&&r.position.set(0,r.position.y,0),this.expressions.forEach((function(e){return n.getSpeech(e)})),this.expressions.length>0){var o=this.expressions[0];i=o.lipsync,this.onChating&&this.onChating({name:"AI",text:o.text})}if(i){var a=0;if(i.audio){i.isAudioPlaying||i.audio.play(),i.isAudioPlaying=!0;var s=i.audio;if(s.paused||s.ended)return i.isAudioPlaying=!1,this.expressions.shift(),this.idle(),void(this.expressions.length<=0&&this.onChatEnd&&(this.onChatEnd(),this.onChatEnd=null));a=s.currentTime}if(i.sheet)if("axure"===i.source)for(var l=0;l<i.sheet.length;l++){var u=i.sheet[l].time,h=u+1/60,c=i.sheet[l].blendshapes;if(a>=u&&a<=h){var f=function(e){var t,i=c[e],r=n.bsMap,o=Ze(new Map(at(r).filter((function(t){return t[0].includes(e)}))).entries());try{for(o.s();!(t=o.n()).done;){var a=ot(t.value,2),s=(a[0],a[1]);"jawOpen"===e&&(i=Math.log(i+1)),"mouthShrugUpper"===e&&(i+=.05),s.weights[s.key]=i}}catch(e){o.e(e)}finally{o.f()}};for(var d in c)f(d)}}else if("rhubarb"===i.source){Object.values(to).forEach((function(t){var i,r=n.bsMap,o=Ze(new Map(at(r).filter((function(e){return e[0].includes(t)}))).entries());try{for(o.s();!(i=o.n()).done;){var a=ot(i.value,2),s=(a[0],a[1]);s.weights[s.key]=e.MathUtils.lerp(s.weights[s.key],0,.5)}}catch(e){o.e(e)}finally{o.f()}}));for(var m=function(){var t=i.sheet.mouthCues[p];if(a>=t.start&&a<=t.end){var r,o=to[t.value],s=n.bsMap,l=Ze(new Map(at(s).filter((function(e){return e[0].includes(o)}))).entries());try{for(l.s();!(r=l.n()).done;){var u=ot(r.value,2),h=(u[0],u[1]);h.weights[h.key]=e.MathUtils.lerp(h.weights[h.key],1,.5)}}catch(e){l.e(e)}finally{l.f()}}},p=0;p<i.sheet.mouthCues.length;p++)m()}}}}},{key:"chat",value:function(e,t,n){var i=this;if(n=n||{},e){this.stopChat();var r=Ss.getSystem("llm");if(r){r.speaker=this;var o=Ss.getSystem("tts");o?(o.speaker=this,this.chatMode=null!=t?t:"read",this.onChating=n.onChating,this.onChatEnd=n.onChatEnd,"read"===t?(e="en"===n.locale?e.split(/[，。；！？]/):"cn"===n.locale?e.split(/[,.;!?]/):e.split(/[,.;!?，。；！？]/),Array.isArray(e)?e.forEach((function(e){i.addExpression(new oo(e,n))})):this.addExpression(new oo(e,n))):"qa"===t&&(r.init(n),r.start(),r.ask(e))):console.warn("[sdk] tts service is not available")}else console.warn("[sdk] large model is not available")}}},{key:"stopChat",value:function(){var e=Ss.getSystem("llm");e&&e.stop();var t=Ss.getSystem("tts");t&&t.stop(),this.expressions.forEach((function(e){var t,n=null===(t=e.lipsync)||void 0===t?void 0:t.audio;n&&(n.pause(),n.currentTime=0,e=null)})),this.expressions=[],this.clearBs(),this.fsm.setState("Idle")}},{key:"motion",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"once";e=Vn(e);var i=eo.find((function(t){return t.k==e})),r=this.aniRoot+i.v+".glb";this.loader.load(r,(function(i){t.setupAnimations(i,t.model);var r=t.fsm.currentState;if(r){if(r.name==e)return;r.exit()}var o=new t.fsm.states.Motion(t.fsm,e);t.fsm.currentState=o,o.enter(r,n)}))}},{key:"stopMotion",value:function(){this.fsm.currentState.exit()}},{key:"pauseMotion",value:function(){this.fsm.currentState.pause()}},{key:"resumeMotion",value:function(){this.fsm.currentState.resume()}},{key:"nav",value:function(e,t){var n=this;this.fsm.setState("Walk"),this.navigator.init(this.group,e,(function(){n.fsm.setState("Idle"),t.onReady&&t.onReady()}),t)}},{key:"stopNav",value:function(){this.navigator.stop()}}]);var i,r}(),mo=function(e){function t(e,n){var i;return Ye(this,t),(i=Xe(this,t,[e])).opts=n||{},i.isAi=!0,i.isNpc=!0,i.controls=null,i}return tt(t,Pi),Qe(t,[{key:"init",value:(n=Ve(it().mark((function e(){var t;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},Object.assign(t,this.opts),this.controls=new fo(t),e.next=5,this.addComponent("AiControls",this.controls);case 5:t.nickname&&this.addComponent("FloatingName",new io({desc:t}));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"chat",value:function(e,t,n){this.controls.chat(e,t,n)}},{key:"stopChat",value:function(){this.controls.stopChat()}},{key:"motion",value:function(e,t){this.controls.motion(e,t)}},{key:"stopMotion",value:function(){this.controls.stopMotion()}},{key:"idle",value:function(){this.controls.idle()}},{key:"pauseMotion",value:function(){this.controls.pauseMotion()}},{key:"resumeMotion",value:function(){this.controls.resumeMotion()}},{key:"nav",value:function(e,t){this.controls.nav(e,t)}},{key:"stopNav",value:function(){this.controls.stopNav()}},{key:"dispose",value:function(){}}]);var n}(),po=function(e){function t(e){var n;return Ye(this,t),(n=Xe(this,t)).opts=e,n}return tt(t,zr),Qe(t,[{key:"spawn",value:function(e,t){this.opts.desc=t;var n=new $r(e,this.opts);return this.manager.add(n),n}}])}(),vo=function(e){function t(e){var n;return Ye(this,t),(n=Xe(this,t)).opts=e||{},n.count=0,n}return tt(t,zr),Qe(t,[{key:"spawn",value:(n=Ve(it().mark((function e(t,n){var i;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.opts.desc=n,i=new mo(t,this.opts),e.next=4,this.manager.add(i);case 4:return this.count++,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})}]);var n}(),go={rand_range:function(e,t){return Math.random()*(t-e)+e},rand_normalish:function(){return(Math.random()+Math.random()+Math.random()+Math.random())/4*2-1},rand_int:function(e,t){return Math.round(Math.random()*(t-e)+e)},lerp:function(e,t,n){return e*(n-t)+t},smoothstep:function(e,t,n){return(e=e*e*(3-2*e))*(n-t)+t},smootherstep:function(e,t,n){return(e=e*e*e*(e*(6*e-15)+10))*(n-t)+t},clamp:function(e,t,n){return Math.min(Math.max(e,t),n)},sat:function(e){return Math.min(Math.max(e,0),1)},in_range:function(e,t,n){return e>=t&&e<=n}},yo=function(){return Qe((function e(t,n){Ye(this,e);var i=ot(n,2),r=i[0],o=i[1];this._cells=at(Array(r)).map((function(e){return at(Array(o)).map((function(e){return null}))})),this._dimensions=n,this._bounds=t,this._queryIds=0}),[{key:"getCellIndex",value:function(e){var t=go.sat((e[0]-this._bounds[0][0])/(this._bounds[1][0]-this._bounds[0][0])),n=go.sat((e[1]-this._bounds[0][1])/(this._bounds[1][1]-this._bounds[0][1]));return[Math.floor(t*(this._dimensions[0]-1)),Math.floor(n*(this._dimensions[1]-1))]}},{key:"newClient",value:function(e,t){var n={position:e,dimensions:t,_cells:{min:null,max:null,nodes:null},_queryId:-1};return this.insert(n),n}},{key:"updateClient",value:function(e){var t=ot(e.position,2),n=t[0],i=t[1],r=ot(e.dimensions,2),o=r[0],a=r[1],s=this.getCellIndex([n-o/2,i-a/2]),l=this.getCellIndex([n+o/2,i+a/2]);e._cells.min[0]==s[0]&&e._cells.min[1]==s[1]&&e._cells.max[0]==l[0]&&e._cells.max[1]==l[1]||(this.remove(e),this.insert(e))}},{key:"findNear",value:function(e,t){for(var n=ot(e,2),i=n[0],r=n[1],o=ot(t,2),a=o[0],s=o[1],l=this.getCellIndex([i-a/2,r-s/2]),u=this.getCellIndex([i+a/2,r+s/2]),h=[],c=this._queryIds++,f=l[0],d=u[0];f<=d;++f)for(var m=l[1],p=u[1];m<=p;++m)for(var v=this._cells[f][m];v;){var g=v.client;v=v.next,g._queryId!=c&&(g._queryId=c,h.push(g))}return h}},{key:"insert",value:function(e){for(var t=ot(e.position,2),n=t[0],i=t[1],r=ot(e.dimensions,2),o=r[0],a=r[1],s=this.getCellIndex([n-o/2,i-a/2]),l=this.getCellIndex([n+o/2,i+a/2]),u=[],h=s[0],c=l[0];h<=c;++h){u.push([]);for(var f=s[1],d=l[1];f<=d;++f){var m={next:null,prev:null,client:e};u[h-s[0]].push(m),m.next=this._cells[h][f],this._cells[h][f]&&(this._cells[h][f].prev=m),this._cells[h][f]=m}}e._cells.min=s,e._cells.max=l,e._cells.nodes=u}},{key:"remove",value:function(e){for(var t=e._cells.min,n=e._cells.max,i=t[0],r=n[0];i<=r;++i)for(var o=t[1],a=n[1];o<=a;++o){var s=i-t[0],l=o-t[1],u=e._cells.nodes[s][l];u.next&&(u.next.prev=u.prev),u.prev&&(u.prev.next=u.next),u.prev||(this._cells[i][o]=u.next)}e._cells.min=null,e._cells.max=null,e._cells.nodes=null}}])}(),bo=function(e){function t(e,n){var i;return Ye(this,t),(i=Xe(this,t,[e])).opts=n||{},i.grid=new yo([[-1e3,-1e3],[1e3,1e3]],[100,100]),i.isSpawner=!0,i}return tt(t,Pi),Qe(t,[{key:"init",value:function(){var e;ht.useInnerScene&&this.addComponent("PlayerSpawner",new po({grid:this.grid,view:null!==(e=this.opts.view)&&void 0!==e?e:"first-person"}));this.addComponent("AiSpawner",new vo)}},{key:"dispose",value:function(){}}])}(),So="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ko(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xo={exports:{}};var wo,Ro={exports:{}};function Ao(){return wo||(wo=1,Ro.exports=function(){var e=e||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==So&&So.crypto&&(n=So.crypto),!n)try{n=require("crypto")}catch(e){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},a=o.lib={},s=a.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=a<<24-(i+o)%4*8}else for(var s=0;s<r;s+=4)t[i+s>>>2]=n[s>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new l.init(t,e)}}),u=o.enc={},h=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new l.init(n,t/2)}},c=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new l.init(n,t)}},f=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,r=i.words,o=i.sigBytes,a=this.blockSize,s=o/(4*a),u=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,h=e.min(4*u,o);if(u){for(var c=0;c<u;c+=a)this._doProcessBlock(r,c);n=r.splice(0,u),i.sigBytes-=h}return new l.init(n,h)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=d.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}});var m=o.algo={};return o}(Math);return e}()),Ro.exports}var Lo,Bo={exports:{}};function To(){return Lo||(Lo=1,Bo.exports=function(e){return i=(n=e).lib,r=i.Base,o=i.WordArray,(a=n.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=r.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var r=e[i];n.push(r.high),n.push(r.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,i=0;i<n;i++)t[i]=t[i].clone();return e}}),e;var t,n,i,r,o,a}(Ao())),Bo.exports}var Eo,Co={exports:{}};function Mo(){return Eo||(Eo=1,Co.exports=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,i=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],r=0;r<t;r++)i[r>>>2]|=e[r]<<24-r%4*8;n.call(this,i,t)}else n.apply(this,arguments)};i.prototype=t}}(),e.lib.WordArray}(Ao())),Co.exports}var Po,Oo={exports:{}};function _o(){return Po||(Po=1,Oo.exports=function(e){return function(){var t=e,n=t.lib.WordArray,i=t.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r+=2){var o=t[r>>>2]>>>16-r%4*8&65535;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r++)i[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return n.create(i,2*t)}},i.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o+=2){var a=r(t[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,i=[],o=0;o<t;o++)i[o>>>1]|=r(e.charCodeAt(o)<<16-o%2*16);return n.create(i,2*t)}}}(),e.enc.Utf16}(Ao())),Oo.exports}var Io,Do={exports:{}};function No(){return Io||(Io=1,Do.exports=function(e){return function(){var t=e,n=t.lib.WordArray;function i(e,t,i){for(var r=[],o=0,a=0;a<t;a++)if(a%4){var s=i[e.charCodeAt(a-1)]<<a%4*2|i[e.charCodeAt(a)]>>>6-a%4*2;r[o>>>2]|=s<<24-o%4*8,o++}return n.create(r,o)}t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp();for(var r=[],o=0;o<n;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)r.push(i.charAt(a>>>6*(3-s)&63));var l=i.charAt(64);if(l)for(;r.length%4;)r.push(l);return r.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return i(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64}(Ao())),Do.exports}var zo,Ho={exports:{}};function Uo(){return zo||(zo=1,Ho.exports=function(e){return function(){var t=e,n=t.lib.WordArray;function i(e,t,i){for(var r=[],o=0,a=0;a<t;a++)if(a%4){var s=i[e.charCodeAt(a-1)]<<a%4*2|i[e.charCodeAt(a)]>>>6-a%4*2;r[o>>>2]|=s<<24-o%4*8,o++}return n.create(r,o)}t.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,i=e.sigBytes,r=t?this._safe_map:this._map;e.clamp();for(var o=[],a=0;a<i;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,l=0;l<4&&a+.75*l<i;l++)o.push(r.charAt(s>>>6*(3-l)&63));var u=r.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(e,t){void 0===t&&(t=!0);var n=e.length,r=t?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var a=0;a<r.length;a++)o[r.charCodeAt(a)]=a}var s=r.charAt(64);if(s){var l=e.indexOf(s);-1!==l&&(n=l)}return i(e,n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url}(Ao())),Ho.exports}var Fo,jo={exports:{}};function Wo(){return Fo||(Fo=1,jo.exports=function(e){return function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,a=n.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var l=a.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o=this._hash.words,a=e[t+0],l=e[t+1],d=e[t+2],m=e[t+3],p=e[t+4],v=e[t+5],g=e[t+6],y=e[t+7],b=e[t+8],S=e[t+9],k=e[t+10],x=e[t+11],w=e[t+12],R=e[t+13],A=e[t+14],L=e[t+15],B=o[0],T=o[1],E=o[2],C=o[3];B=u(B,T,E,C,a,7,s[0]),C=u(C,B,T,E,l,12,s[1]),E=u(E,C,B,T,d,17,s[2]),T=u(T,E,C,B,m,22,s[3]),B=u(B,T,E,C,p,7,s[4]),C=u(C,B,T,E,v,12,s[5]),E=u(E,C,B,T,g,17,s[6]),T=u(T,E,C,B,y,22,s[7]),B=u(B,T,E,C,b,7,s[8]),C=u(C,B,T,E,S,12,s[9]),E=u(E,C,B,T,k,17,s[10]),T=u(T,E,C,B,x,22,s[11]),B=u(B,T,E,C,w,7,s[12]),C=u(C,B,T,E,R,12,s[13]),E=u(E,C,B,T,A,17,s[14]),B=h(B,T=u(T,E,C,B,L,22,s[15]),E,C,l,5,s[16]),C=h(C,B,T,E,g,9,s[17]),E=h(E,C,B,T,x,14,s[18]),T=h(T,E,C,B,a,20,s[19]),B=h(B,T,E,C,v,5,s[20]),C=h(C,B,T,E,k,9,s[21]),E=h(E,C,B,T,L,14,s[22]),T=h(T,E,C,B,p,20,s[23]),B=h(B,T,E,C,S,5,s[24]),C=h(C,B,T,E,A,9,s[25]),E=h(E,C,B,T,m,14,s[26]),T=h(T,E,C,B,b,20,s[27]),B=h(B,T,E,C,R,5,s[28]),C=h(C,B,T,E,d,9,s[29]),E=h(E,C,B,T,y,14,s[30]),B=c(B,T=h(T,E,C,B,w,20,s[31]),E,C,v,4,s[32]),C=c(C,B,T,E,b,11,s[33]),E=c(E,C,B,T,x,16,s[34]),T=c(T,E,C,B,A,23,s[35]),B=c(B,T,E,C,l,4,s[36]),C=c(C,B,T,E,p,11,s[37]),E=c(E,C,B,T,y,16,s[38]),T=c(T,E,C,B,k,23,s[39]),B=c(B,T,E,C,R,4,s[40]),C=c(C,B,T,E,a,11,s[41]),E=c(E,C,B,T,m,16,s[42]),T=c(T,E,C,B,g,23,s[43]),B=c(B,T,E,C,S,4,s[44]),C=c(C,B,T,E,w,11,s[45]),E=c(E,C,B,T,L,16,s[46]),B=f(B,T=c(T,E,C,B,d,23,s[47]),E,C,a,6,s[48]),C=f(C,B,T,E,y,10,s[49]),E=f(E,C,B,T,A,15,s[50]),T=f(T,E,C,B,v,21,s[51]),B=f(B,T,E,C,w,6,s[52]),C=f(C,B,T,E,m,10,s[53]),E=f(E,C,B,T,k,15,s[54]),T=f(T,E,C,B,l,21,s[55]),B=f(B,T,E,C,b,6,s[56]),C=f(C,B,T,E,L,10,s[57]),E=f(E,C,B,T,g,15,s[58]),T=f(T,E,C,B,R,21,s[59]),B=f(B,T,E,C,p,6,s[60]),C=f(C,B,T,E,x,10,s[61]),E=f(E,C,B,T,d,15,s[62]),T=f(T,E,C,B,S,21,s[63]),o[0]=o[0]+B|0,o[1]=o[1]+T|0,o[2]=o[2]+E|0,o[3]=o[3]+C|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;n[r>>>5]|=128<<24-r%32;var o=t.floor(i/4294967296),a=i;n[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,l=s.words,u=0;u<4;u++){var h=l[u];l[u]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,i,r,o,a){var s=e+(t&n|~t&i)+r+a;return(s<<o|s>>>32-o)+t}function h(e,t,n,i,r,o,a){var s=e+(t&i|n&~i)+r+a;return(s<<o|s>>>32-o)+t}function c(e,t,n,i,r,o,a){var s=e+(t^n^i)+r+a;return(s<<o|s>>>32-o)+t}function f(e,t,n,i,r,o,a){var s=e+(n^(t|~i))+r+a;return(s<<o|s>>>32-o)+t}n.MD5=o._createHelper(l),n.HmacMD5=o._createHmacHelper(l)}(Math),e.MD5}(Ao())),jo.exports}var Go,Vo={exports:{}};function Xo(){return Go||(Go=1,Vo.exports=function(e){return n=(t=e).lib,i=n.WordArray,r=n.Hasher,o=t.algo,a=[],s=o.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],l=n[4],u=0;u<80;u++){if(u<16)a[u]=0|e[t+u];else{var h=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=h<<1|h>>>31}var c=(i<<5|i>>>27)+l+a[u];c+=u<20?1518500249+(r&o|~r&s):u<40?1859775393+(r^o^s):u<60?(r&o|r&s|o&s)-1894007588:(r^o^s)-899497514,l=s,s=o,o=r<<30|r>>>2,r=i,i=c}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=r._createHelper(s),t.HmacSHA1=r._createHmacHelper(s),e.SHA1;var t,n,i,r,o,a,s}(Ao())),Vo.exports}var Yo,Ko={exports:{}};function qo(){return Yo||(Yo=1,Ko.exports=function(e){return function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,a=n.algo,s=[],l=[];!function(){function e(e){for(var n=t.sqrt(e),i=2;i<=n;i++)if(!(e%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,r=0;r<64;)e(i)&&(r<8&&(s[r]=n(t.pow(i,.5))),l[r]=n(t.pow(i,1/3)),r++),i++}();var u=[],h=a.SHA256=o.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],h=n[5],c=n[6],f=n[7],d=0;d<64;d++){if(d<16)u[d]=0|e[t+d];else{var m=u[d-15],p=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,v=u[d-2],g=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;u[d]=p+u[d-7]+g+u[d-16]}var y=i&r^i&o^r&o,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),S=f+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&h^~s&c)+l[d]+u[d];f=c,c=h,h=s,s=a+S|0,a=o,o=r,r=i,i=S+(b+y)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+h|0,n[6]=n[6]+c|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=o._createHelper(h),n.HmacSHA256=o._createHmacHelper(h)}(Math),e.SHA256}(Ao())),Ko.exports}var Qo,Zo={exports:{}};var Jo,$o={exports:{}};function ea(){return Jo||(Jo=1,$o.exports=function(e){return function(){var t=e,n=t.lib.Hasher,i=t.x64,r=i.Word,o=i.WordArray,a=t.algo;function s(){return r.create.apply(r,arguments)}var l=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=s()}();var h=a.SHA512=n.extend({_doReset:function(){this._hash=new o.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],h=n[5],c=n[6],f=n[7],d=i.high,m=i.low,p=r.high,v=r.low,g=o.high,y=o.low,b=a.high,S=a.low,k=s.high,x=s.low,w=h.high,R=h.low,A=c.high,L=c.low,B=f.high,T=f.low,E=d,C=m,M=p,P=v,O=g,_=y,I=b,D=S,N=k,z=x,H=w,U=R,F=A,j=L,W=B,G=T,V=0;V<80;V++){var X,Y,K=u[V];if(V<16)Y=K.high=0|e[t+2*V],X=K.low=0|e[t+2*V+1];else{var q=u[V-15],Q=q.high,Z=q.low,J=(Q>>>1|Z<<31)^(Q>>>8|Z<<24)^Q>>>7,$=(Z>>>1|Q<<31)^(Z>>>8|Q<<24)^(Z>>>7|Q<<25),ee=u[V-2],te=ee.high,ne=ee.low,ie=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,re=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=u[V-7],ae=oe.high,se=oe.low,le=u[V-16],ue=le.high,he=le.low;Y=(Y=(Y=J+ae+((X=$+se)>>>0<$>>>0?1:0))+ie+((X+=re)>>>0<re>>>0?1:0))+ue+((X+=he)>>>0<he>>>0?1:0),K.high=Y,K.low=X}var ce,fe=N&H^~N&F,de=z&U^~z&j,me=E&M^E&O^M&O,pe=C&P^C&_^P&_,ve=(E>>>28|C<<4)^(E<<30|C>>>2)^(E<<25|C>>>7),ge=(C>>>28|E<<4)^(C<<30|E>>>2)^(C<<25|E>>>7),ye=(N>>>14|z<<18)^(N>>>18|z<<14)^(N<<23|z>>>9),be=(z>>>14|N<<18)^(z>>>18|N<<14)^(z<<23|N>>>9),Se=l[V],ke=Se.high,xe=Se.low,we=W+ye+((ce=G+be)>>>0<G>>>0?1:0),Re=ge+pe;W=F,G=j,F=H,j=U,H=N,U=z,N=I+(we=(we=(we=we+fe+((ce+=de)>>>0<de>>>0?1:0))+ke+((ce+=xe)>>>0<xe>>>0?1:0))+Y+((ce+=X)>>>0<X>>>0?1:0))+((z=D+ce|0)>>>0<D>>>0?1:0)|0,I=O,D=_,O=M,_=P,M=E,P=C,E=we+(ve+me+(Re>>>0<ge>>>0?1:0))+((C=ce+Re|0)>>>0<ce>>>0?1:0)|0}m=i.low=m+C,i.high=d+E+(m>>>0<C>>>0?1:0),v=r.low=v+P,r.high=p+M+(v>>>0<P>>>0?1:0),y=o.low=y+_,o.high=g+O+(y>>>0<_>>>0?1:0),S=a.low=S+D,a.high=b+I+(S>>>0<D>>>0?1:0),x=s.low=x+z,s.high=k+N+(x>>>0<z>>>0?1:0),R=h.low=R+U,h.high=w+H+(R>>>0<U>>>0?1:0),L=c.low=L+j,c.high=A+F+(L>>>0<j>>>0?1:0),T=f.low=T+G,f.high=B+W+(T>>>0<G>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(i+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(h),t.HmacSHA512=n._createHmacHelper(h)}(),e.SHA512}(Ao(),To())),$o.exports}var ta,na={exports:{}};var ia,ra={exports:{}};function oa(){return ia||(ia=1,ra.exports=function(e){return function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,a=n.x64.Word,s=n.algo,l=[],u=[],h=[];!function(){for(var e=1,t=0,n=0;n<24;n++){l[e+5*t]=(n+1)*(n+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,o=0;o<24;o++){for(var s=0,c=0,f=0;f<7;f++){if(1&r){var d=(1<<f)-1;d<32?c^=1<<d:s^=1<<d-32}128&r?r=r<<1^113:r<<=1}h[o]=a.create(s,c)}}();var c=[];!function(){for(var e=0;e<25;e++)c[e]=a.create()}();var f=s.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,i=this.blockSize/2,r=0;r<i;r++){var o=e[t+2*r],a=e[t+2*r+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(T=n[r]).high^=a,T.low^=o}for(var s=0;s<24;s++){for(var f=0;f<5;f++){for(var d=0,m=0,p=0;p<5;p++)d^=(T=n[f+5*p]).high,m^=T.low;var v=c[f];v.high=d,v.low=m}for(f=0;f<5;f++){var g=c[(f+4)%5],y=c[(f+1)%5],b=y.high,S=y.low;for(d=g.high^(b<<1|S>>>31),m=g.low^(S<<1|b>>>31),p=0;p<5;p++)(T=n[f+5*p]).high^=d,T.low^=m}for(var k=1;k<25;k++){var x=(T=n[k]).high,w=T.low,R=l[k];R<32?(d=x<<R|w>>>32-R,m=w<<R|x>>>32-R):(d=w<<R-32|x>>>64-R,m=x<<R-32|w>>>64-R);var A=c[u[k]];A.high=d,A.low=m}var L=c[0],B=n[0];for(L.high=B.high,L.low=B.low,f=0;f<5;f++)for(p=0;p<5;p++){var T=n[k=f+5*p],E=c[k],C=c[(f+1)%5+5*p],M=c[(f+2)%5+5*p];T.high=E.high^~C.high&M.high,T.low=E.low^~C.low&M.low}T=n[0];var P=h[s];T.high^=P.high,T.low^=P.low}},_doFinalize:function(){var e=this._data,n=e.words;this._nDataBytes;var i=8*e.sigBytes,o=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(t.ceil((i+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,l=s/8,u=[],h=0;h<l;h++){var c=a[h],f=c.high,d=c.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u.push(d),u.push(f)}return new r.init(u,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=o._createHelper(f),n.HmacSHA3=o._createHmacHelper(f)}(Math),e.SHA3}(Ao(),To())),ra.exports}var aa,sa={exports:{}};var la,ua={exports:{}};function ha(){return la||(la=1,ua.exports=function(e){var t,n,i;n=(t=e).lib.Base,i=t.enc.Utf8,t.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,l=a.words,u=0;u<n;u++)s[u]^=1549556828,l[u]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}(Ao())),ua.exports}var ca,fa={exports:{}};var da,ma={exports:{}};function pa(){return da||(da=1,ma.exports=function(e){return n=(t=e).lib,i=n.Base,r=n.WordArray,o=t.algo,a=o.MD5,s=o.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,i=this.cfg,o=i.hasher.create(),a=r.create(),s=a.words,l=i.keySize,u=i.iterations;s.length<l;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var h=1;h<u;h++)n=o.finalize(n),o.reset();a.concat(n)}return a.sigBytes=4*l,a}}),t.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)},e.EvpKDF;var t,n,i,r,o,a,s}(Ao(),Xo(),ha())),ma.exports}var va,ga={exports:{}};function ya(){return va||(va=1,ga.exports=function(e){e.lib.Cipher||function(t){var n=e,i=n.lib,r=i.Base,o=i.WordArray,a=i.BufferedBlockAlgorithm,s=n.enc;s.Utf8;var l=s.Base64,u=n.algo.EvpKDF,h=i.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:g}return function(t){return{encrypt:function(n,i,r){return e(i).encrypt(t,n,i,r)},decrypt:function(n,i,r){return e(i).decrypt(t,n,i,r)}}}}()});i.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=n.mode={},f=i.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=c.CBC=function(){var e=f.extend();function n(e,n,i){var r,o=this._iv;o?(r=o,this._iv=t):r=this._prevBlock;for(var a=0;a<i;a++)e[n+a]^=r[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize;n.call(this,e,t,r),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,o=e.slice(t,t+r);i.decryptBlock(e,t),n.call(this,e,t,r),this._prevBlock=o}}),e}(),m=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,i=n-e.sigBytes%n,r=i<<24|i<<16|i<<8|i,a=[],s=0;s<i;s+=4)a.push(r);var l=o.create(a,i);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};i.BlockCipher=h.extend({cfg:h.cfg.extend({mode:d,padding:m}),reset:function(){var e;h.reset.call(this);var t=this.cfg,n=t.iv,i=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(i,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var p=i.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?o.create([1398893684,1701076831]).concat(n).concat(t):t).toString(l)},parse:function(e){var t,n=l.parse(e),i=n.words;return 1398893684==i[0]&&1701076831==i[1]&&(t=o.create(i.slice(2,4)),i.splice(0,4),n.sigBytes-=16),p.create({ciphertext:n,salt:t})}},g=i.SerializableCipher=r.extend({cfg:r.extend({format:v}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var r=e.createEncryptor(n,i),o=r.finalize(t),a=r.cfg;return p.create({ciphertext:o,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(n.kdf={}).OpenSSL={execute:function(e,t,n,i,r){if(i||(i=o.random(8)),r)a=u.create({keySize:t+n,hasher:r}).compute(e,i);else var a=u.create({keySize:t+n}).compute(e,i);var s=o.create(a.words.slice(t),4*n);return a.sigBytes=4*t,p.create({key:a,iv:s,salt:i})}},b=i.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:y}),encrypt:function(e,t,n,i){var r=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize,i.salt,i.hasher);i.iv=r.iv;var o=g.encrypt.call(this,e,t,r.key,i);return o.mixIn(r),o},decrypt:function(e,t,n,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var r=i.kdf.execute(n,e.keySize,e.ivSize,t.salt,i.hasher);return i.iv=r.iv,g.decrypt.call(this,e,t,r.key,i)}})}()}(Ao(),pa())),ga.exports}var ba,Sa={exports:{}};function ka(){return ba||(ba=1,Sa.exports=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,i){var r,o=this._iv;o?(r=o.slice(0),this._iv=void 0):r=this._prevBlock,i.encryptBlock(r,0);for(var a=0;a<n;a++)e[t+a]^=r[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize;n.call(this,e,t,r,i),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,o=e.slice(t,t+r);n.call(this,e,t,r,i),this._prevBlock=o}}),t}(),e.mode.CFB}(Ao(),ya())),Sa.exports}var xa,wa={exports:{}};function Ra(){return xa||(xa=1,wa.exports=function(e){return e.mode.CTR=(t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=this._iv,o=this._counter;r&&(o=this._counter=r.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[i-1]=o[i-1]+1|0;for(var s=0;s<i;s++)e[t+s]^=a[s]}}),t.Decryptor=n,t),e.mode.CTR;var t,n}(Ao(),ya())),wa.exports}var Aa,La={exports:{}};function Ba(){return Aa||(Aa=1,La.exports=function(e){
/** @preserve
       * Counter block mode compatible with  Dr Brian Gladman fileenc.c
       * derived from CryptoJS.mode.CTR
       * Jan Hruby jhruby.web@gmail.com
       */
return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255&~(e>>24))e+=1<<24;else{var t=e>>16&255,n=e>>8&255,i=255&e;255===t?(t=0,255===n?(n=0,255===i?i=0:++i):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=i}return e}function i(e){return 0===(e[0]=n(e[0]))&&(e[1]=n(e[1])),e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),i(a);var s=a.slice(0);n.encryptBlock(s,0);for(var l=0;l<r;l++)e[t+l]^=s[l]}});return t.Decryptor=r,t}(),e.mode.CTRGladman}(Ao(),ya())),La.exports}var Ta,Ea={exports:{}};function Ca(){return Ta||(Ta=1,Ea.exports=function(e){return e.mode.OFB=(t=e.lib.BlockCipherMode.extend(),n=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=this._iv,o=this._keystream;r&&(o=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<i;a++)e[t+a]^=o[a]}}),t.Decryptor=n,t),e.mode.OFB;var t,n}(Ao(),ya())),Ea.exports}var Ma,Pa={exports:{}};var Oa,_a={exports:{}};var Ia,Da={exports:{}};var Na,za={exports:{}};var Ha,Ua={exports:{}};var Fa,ja={exports:{}};var Wa,Ga={exports:{}};var Va,Xa={exports:{}};var Ya,Ka={exports:{}};function qa(){return Ya||(Ya=1,Ka.exports=function(e){return function(){var t=e,n=t.lib,i=n.WordArray,r=n.BlockCipher,o=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],c=o.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var i=a[n]-1;t[n]=e[i>>>5]>>>31-i%32&1}for(var r=this._subKeys=[],o=0;o<16;o++){var u=r[o]=[],h=l[o];for(n=0;n<24;n++)u[n/6|0]|=t[(s[n]-1+h)%28]<<31-n%6,u[4+(n/6|0)]|=t[28+(s[n+24]-1+h)%28]<<31-n%6;for(u[0]=u[0]<<1|u[0]>>>31,n=1;n<7;n++)u[n]=u[n]>>>4*(n-1)+3;u[7]=u[7]<<5|u[7]>>>27}var c=this._invSubKeys=[];for(n=0;n<16;n++)c[n]=r[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],f.call(this,4,252645135),f.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),f.call(this,1,1431655765);for(var i=0;i<16;i++){for(var r=n[i],o=this._lBlock,a=this._rBlock,s=0,l=0;l<8;l++)s|=u[l][((a^r[l])&h[l])>>>0];this._lBlock=a,this._rBlock=o^s}var c=this._lBlock;this._lBlock=this._rBlock,this._rBlock=c,f.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function d(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=r._createHelper(c);var m=o.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),r=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=c.createEncryptor(i.create(t)),this._des2=c.createEncryptor(i.create(n)),this._des3=c.createEncryptor(i.create(r))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=r._createHelper(m)}(),e.TripleDES}(Ao(),No(),Wo(),pa(),ya())),Ka.exports}var Qa,Za={exports:{}};var Ja,$a={exports:{}};var es,ts={exports:{}};var ns,is={exports:{}};function rs(){return ns||(ns=1,is.exports=function(e){return function(){var t=e,n=t.lib.BlockCipher,i=t.algo,r=16,o=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]],s={pbox:[],sbox:[]};function l(e,t){var n=t>>24&255,i=t>>16&255,r=t>>8&255,o=255&t,a=e.sbox[0][n]+e.sbox[1][i];return a^=e.sbox[2][r],a+=e.sbox[3][o]}function u(e,t,n){for(var i,o=t,a=n,s=0;s<r;++s)i=o^=e.pbox[s],o=a=l(e,o)^a,a=i;return i=o,o=a,a=i,a^=e.pbox[r],{left:o^=e.pbox[r+1],right:a}}function h(e,t,n){for(var i,o=t,a=n,s=r+1;s>1;--s)i=o^=e.pbox[s],o=a=l(e,o)^a,a=i;return i=o,o=a,a=i,a^=e.pbox[1],{left:o^=e.pbox[0],right:a}}function c(e,t,n){for(var i=0;i<4;i++){e.sbox[i]=[];for(var s=0;s<256;s++)e.sbox[i][s]=a[i][s]}for(var l=0,h=0;h<r+2;h++)e.pbox[h]=o[h]^t[l],++l>=n&&(l=0);for(var c=0,f=0,d=0,m=0;m<r+2;m+=2)c=(d=u(e,c,f)).left,f=d.right,e.pbox[m]=c,e.pbox[m+1]=f;for(var p=0;p<4;p++)for(var v=0;v<256;v+=2)c=(d=u(e,c,f)).left,f=d.right,e.sbox[p][v]=c,e.sbox[p][v+1]=f;return!0}var f=i.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;c(s,t,n)}},encryptBlock:function(e,t){var n=u(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=h(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=n._createHelper(f)}(),e.Blowfish}(Ao(),No(),Wo(),pa(),ya())),is.exports}xo.exports=function(e){return e}(Ao(),To(),Mo(),_o(),No(),Uo(),Wo(),Xo(),qo(),Qo||(Qo=1,Zo.exports=function(e){return n=(t=e).lib.WordArray,i=t.algo,r=i.SHA256,o=i.SHA224=r.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=r._createHelper(o),t.HmacSHA224=r._createHmacHelper(o),e.SHA224;var t,n,i,r,o}(Ao(),qo())),ea(),ta||(ta=1,na.exports=function(e){return n=(t=e).x64,i=n.Word,r=n.WordArray,o=t.algo,a=o.SHA512,s=o.SHA384=a.extend({_doReset:function(){this._hash=new r.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s),e.SHA384;var t,n,i,r,o,a,s}(Ao(),To(),ea())),oa(),aa||(aa=1,sa.exports=function(e){
/** @preserve
      (c) 2012 by Cédric Mesnil. All rights reserved.
      	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
      	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
          - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
      	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      */
return function(t){var n=e,i=n.lib,r=i.WordArray,o=i.Hasher,a=n.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),h=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=r.create([0,1518500249,1859775393,2400959708,2840853838]),f=r.create([1352829926,1548603684,1836072691,2053994217,0]),d=a.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o,a,d,S,k,x,w,R,A,L,B,T=this._hash.words,E=c.words,C=f.words,M=s.words,P=l.words,O=u.words,_=h.words;for(x=o=T[0],w=a=T[1],R=d=T[2],A=S=T[3],L=k=T[4],n=0;n<80;n+=1)B=o+e[t+M[n]]|0,B+=n<16?m(a,d,S)+E[0]:n<32?p(a,d,S)+E[1]:n<48?v(a,d,S)+E[2]:n<64?g(a,d,S)+E[3]:y(a,d,S)+E[4],B=(B=b(B|=0,O[n]))+k|0,o=k,k=S,S=b(d,10),d=a,a=B,B=x+e[t+P[n]]|0,B+=n<16?y(w,R,A)+C[0]:n<32?g(w,R,A)+C[1]:n<48?v(w,R,A)+C[2]:n<64?p(w,R,A)+C[3]:m(w,R,A)+C[4],B=(B=b(B|=0,_[n]))+L|0,x=L,L=A,A=b(R,10),R=w,w=B;B=T[1]+d+A|0,T[1]=T[2]+S+L|0,T[2]=T[3]+k+x|0,T[3]=T[4]+o+w|0,T[4]=T[0]+a+R|0,T[0]=B},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,o=r.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return r},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function m(e,t,n){return e^t^n}function p(e,t,n){return e&t|~e&n}function v(e,t,n){return(e|~t)^n}function g(e,t,n){return e&n|t&~n}function y(e,t,n){return e^(t|~n)}function b(e,t){return e<<t|e>>>32-t}n.RIPEMD160=o._createHelper(d),n.HmacRIPEMD160=o._createHmacHelper(d)}(),e.RIPEMD160}(Ao())),ha(),ca||(ca=1,fa.exports=function(e){return i=(n=(t=e).lib).Base,r=n.WordArray,a=(o=t.algo).SHA256,s=o.HMAC,l=o.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=s.create(n.hasher,e),o=r.create(),a=r.create([1]),l=o.words,u=a.words,h=n.keySize,c=n.iterations;l.length<h;){var f=i.update(t).finalize(a);i.reset();for(var d=f.words,m=d.length,p=f,v=1;v<c;v++){p=i.finalize(p),i.reset();for(var g=p.words,y=0;y<m;y++)d[y]^=g[y]}o.concat(f),u[0]++}return o.sigBytes=4*h,o}}),t.PBKDF2=function(e,t,n){return l.create(n).compute(e,t)},e.PBKDF2;var t,n,i,r,o,a,s,l}(Ao(),qo(),ha())),pa(),ya(),ka(),Ra(),Ba(),Ca(),Ma||(Ma=1,Pa.exports=function(e){return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB;var t}(Ao(),ya())),Oa||(Oa=1,_a.exports=function(e){return e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,i=4*t,r=i-n%i,o=n+r-1;e.clamp(),e.words[o>>>2]|=r<<24-o%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923}(Ao(),ya())),Ia||(Ia=1,Da.exports=function(e){return e.pad.Iso10126={pad:function(t,n){var i=4*n,r=i-t.sigBytes%i;t.concat(e.lib.WordArray.random(r-1)).concat(e.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126}(Ao(),ya())),Na||(Na=1,za.exports=function(e){return e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971}(Ao(),ya())),Ha||(Ha=1,Ua.exports=function(e){return e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},e.pad.ZeroPadding}(Ao(),ya())),Fa||(Fa=1,ja.exports=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding}(Ao(),ya())),Wa||(Wa=1,Ga.exports=function(e){return n=(t=e).lib.CipherParams,i=t.enc.Hex,t.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return n.create({ciphertext:t})}},e.format.Hex;var t,n,i}(Ao(),ya())),Va||(Va=1,Xa.exports=function(e){return function(){var t=e,n=t.lib.BlockCipher,i=t.algo,r=[],o=[],a=[],s=[],l=[],u=[],h=[],c=[],f=[],d=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,i=0;for(t=0;t<256;t++){var m=i^i<<1^i<<2^i<<3^i<<4;m=m>>>8^255&m^99,r[n]=m,o[m]=n;var p=e[n],v=e[p],g=e[v],y=257*e[m]^16843008*m;a[n]=y<<24|y>>>8,s[n]=y<<16|y>>>16,l[n]=y<<8|y>>>24,u[n]=y,y=16843009*g^65537*v^257*p^16843008*n,h[m]=y<<24|y>>>8,c[m]=y<<16|y>>>16,f[m]=y<<8|y>>>24,d[m]=y,n?(n=p^e[e[e[g^p]]],i^=e[e[i]]):n=i=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],p=i.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,i=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<i;a++)a<n?o[a]=t[a]:(u=o[a-1],a%n?n>6&&a%n==4&&(u=r[u>>>24]<<24|r[u>>>16&255]<<16|r[u>>>8&255]<<8|r[255&u]):(u=r[(u=u<<8|u>>>24)>>>24]<<24|r[u>>>16&255]<<16|r[u>>>8&255]<<8|r[255&u],u^=m[a/n|0]<<24),o[a]=o[a-n]^u);for(var s=this._invKeySchedule=[],l=0;l<i;l++){if(a=i-l,l%4)var u=o[a];else u=o[a-4];s[l]=l<4||a<=4?u:h[r[u>>>24]]^c[r[u>>>16&255]]^f[r[u>>>8&255]]^d[r[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,l,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,h,c,f,d,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,r,o,a,s){for(var l=this._nRounds,u=e[t]^n[0],h=e[t+1]^n[1],c=e[t+2]^n[2],f=e[t+3]^n[3],d=4,m=1;m<l;m++){var p=i[u>>>24]^r[h>>>16&255]^o[c>>>8&255]^a[255&f]^n[d++],v=i[h>>>24]^r[c>>>16&255]^o[f>>>8&255]^a[255&u]^n[d++],g=i[c>>>24]^r[f>>>16&255]^o[u>>>8&255]^a[255&h]^n[d++],y=i[f>>>24]^r[u>>>16&255]^o[h>>>8&255]^a[255&c]^n[d++];u=p,h=v,c=g,f=y}p=(s[u>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^n[d++],v=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&u])^n[d++],g=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[u>>>8&255]<<8|s[255&h])^n[d++],y=(s[f>>>24]<<24|s[u>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^n[d++],e[t]=p,e[t+1]=v,e[t+2]=g,e[t+3]=y},keySize:8});t.AES=n._createHelper(p)}(),e.AES}(Ao(),No(),Wo(),pa(),ya())),qa(),Qa||(Qa=1,Za.exports=function(e){return function(){var t=e,n=t.lib.StreamCipher,i=t.algo,r=i.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,i=this._S=[],r=0;r<256;r++)i[r]=r;r=0;for(var o=0;r<256;r++){var a=r%n,s=t[a>>>2]>>>24-a%4*8&255;o=(o+i[r]+s)%256;var l=i[r];i[r]=i[o],i[o]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,n=this._j,i=0,r=0;r<4;r++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,i|=e[(e[t]+e[n])%256]<<24-8*r}return this._i=t,this._j=n,i}t.RC4=n._createHelper(r);var a=i.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});t.RC4Drop=n._createHelper(a)}(),e.RC4}(Ao(),No(),Wo(),pa(),ya())),Ja||(Ja=1,$a.exports=function(e){return function(){var t=e,n=t.lib.StreamCipher,i=t.algo,r=[],o=[],a=[],s=i.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)l.call(this);for(n=0;n<8;n++)r[n]^=i[n+4&7];if(t){var o=t.words,a=o[0],s=o[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=u>>>16|4294901760&h,f=h<<16|65535&u;for(r[0]^=u,r[1]^=c,r[2]^=h,r[3]^=f,r[4]^=u,r[5]^=c,r[6]^=h,r[7]^=f,n=0;n<4;n++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8),e[t+i]^=r[i]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],r=65535&i,s=i>>>16,l=((r*r>>>17)+r*s>>>15)+s*s,u=((4294901760&i)*i|0)+((65535&i)*i|0);a[n]=l^u}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=n._createHelper(s)}(),e.Rabbit}(Ao(),No(),Wo(),pa(),ya())),es||(es=1,ts.exports=function(e){return function(){var t=e,n=t.lib.StreamCipher,i=t.algo,r=[],o=[],a=[],s=i.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)l.call(this);for(r=0;r<8;r++)i[r]^=n[r+4&7];if(t){var o=t.words,a=o[0],s=o[1],u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),c=u>>>16|4294901760&h,f=h<<16|65535&u;for(i[0]^=u,i[1]^=c,i[2]^=h,i[3]^=f,i[4]^=u,i[5]^=c,i[6]^=h,i[7]^=f,r=0;r<4;r++)l.call(this)}},_doProcessBlock:function(e,t){var n=this._X;l.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8),e[t+i]^=r[i]},blockSize:4,ivSize:2});function l(){for(var e=this._X,t=this._C,n=0;n<8;n++)o[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<o[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<o[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<o[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<o[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<o[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<o[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<o[6]>>>0?1:0)|0,this._b=t[7]>>>0<o[7]>>>0?1:0,n=0;n<8;n++){var i=e[n]+t[n],r=65535&i,s=i>>>16,l=((r*r>>>17)+r*s>>>15)+s*s,u=((4294901760&i)*i|0)+((65535&i)*i|0);a[n]=l^u}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=n._createHelper(s)}(),e.RabbitLegacy}(Ao(),No(),Wo(),pa(),ya())),rs());var os,as,ss=xo.exports,ls=ko(ss);os={exports:{}},function(e,t){os.exports=function(e){var t,n=(e=e||{}).Base64,i="2.6.4",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=function(e){for(var t={},n=0,i=e.length;n<i;n++)t[e.charAt(n)]=n;return t}(r),a=String.fromCharCode,s=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?a(192|t>>>6)+a(128|63&t):a(224|t>>>12&15)+a(128|t>>>6&63)+a(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return a(240|t>>>18&7)+a(128|t>>>12&63)+a(128|t>>>6&63)+a(128|63&t)},l=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,u=function(e){return e.replace(l,s)},h=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[r.charAt(n>>>18),r.charAt(n>>>12&63),t>=2?"=":r.charAt(n>>>6&63),t>=1?"=":r.charAt(63&n)].join("")},c=e.btoa&&"function"==typeof e.btoa?function(t){return e.btoa(t)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,h)},f=function(e){return c(u(String(e)))},d=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},m=function(e,t){return t?d(f(e)):f(e)},p=function(e){return m(e,!0)};e.Uint8Array&&(t=function(e,t){for(var n="",i=0,o=e.length;i<o;i+=3){var a=e[i],s=e[i+1],l=e[i+2],u=a<<16|s<<8|l;n+=r.charAt(u>>>18)+r.charAt(u>>>12&63)+(void 0!==s?r.charAt(u>>>6&63):"=")+(void 0!==l?r.charAt(63&u):"=")}return t?d(n):n});var v,g=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,y=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return a(55296+(t>>>10))+a(56320+(1023&t));case 3:return a((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return a((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},b=function(e){return e.replace(g,y)},S=function(e){var t=e.length,n=t%4,i=(t>0?o[e.charAt(0)]<<18:0)|(t>1?o[e.charAt(1)]<<12:0)|(t>2?o[e.charAt(2)]<<6:0)|(t>3?o[e.charAt(3)]:0),r=[a(i>>>16),a(i>>>8&255),a(255&i)];return r.length-=[0,0,2,1][n],r.join("")},k=e.atob&&"function"==typeof e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/\S{1,4}/g,S)},x=function(e){return k(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(e){return b(k(e))},R=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},A=function(e){return w(R(e))};e.Uint8Array&&(v=function(e){return Uint8Array.from(x(R(e)),(function(e){return e.charCodeAt(0)}))});var L=function(){var t=e.Base64;return e.Base64=n,t};if(e.Base64={VERSION:i,atob:x,btoa:c,fromBase64:A,toBase64:m,utob:u,encode:m,encodeURI:p,btou:b,decode:A,noConflict:L,fromUint8Array:t,toUint8Array:v},"function"==typeof Object.defineProperty){var B=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",B((function(){return A(this)}))),Object.defineProperty(String.prototype,"toBase64",B((function(e){return m(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",B((function(){return m(this,!0)})))}}return e.Meteor&&(Base64=e.Base64),os.exports&&(os.exports.Base64=e.Base64),{Base64:e.Base64}}(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:So);var us,hs=new URL(Mi.spark.chatUrl),cs=Mi.spark.APPID,fs=Mi.spark.API_SECRET,ds=Mi.spark.API_KEY,ms=null!==(as=Mi.spark.SEPERATORS)&&void 0!==as?as:["，","。","；","！","？",",",".",";","!","?"],ps=["*","#"],vs="";var gs,ys=function(e){function t(e,n){var i;return Ye(this,t),(i=Xe(this,t,[e,n])).appId=cs,i.state="init",i.llmWS=null,i.text="",i.answer="",i.answers=[],i.phase="",i.role={},i.contexts=[],i.onAnswered=function(){},i.onAnswering=function(){},i}return tt(t,wr),Qe(t,[{key:"init",value:function(e){var t;(e=null!==(t=e)&&void 0!==t?t:{}).onAnswered&&(this.onAnswered=e.onAnswered),e.onAnswering&&(this.onAnswering=e.onAnswering)}},{key:"setStatus",value:function(e){this.onWillStatusChange&&this.onWillStatusChange(this.state,e),this.state=e}},{key:"connectWebSocket",value:function(){var e=this;return function(){switch(hs.pathname){case"/v1.1/chat":us="general";break;case"/v2.1/chat":us="generalv2";break;case"/v3.1/chat":us="generalv3";break;case"/v3.5/chat":us="generalv3.5"}return new Promise((function(e,t){var n=ds,i=fs,r="wss://"+hs.host+hs.pathname,o=location.host,a=(new Date).toGMTString(),s="host: ".concat(o,"\ndate: ").concat(a,"\nGET ").concat(hs.pathname," HTTP/1.1"),l=ls.HmacSHA256(s,i),u=ls.enc.Base64.stringify(l),h='api_key="'.concat(n,'", algorithm="').concat("hmac-sha256",'", headers="').concat("host date request-line",'", signature="').concat(u,'"'),c=btoa(h);e(r="".concat(r,"?authorization=").concat(c,"&date=").concat(a,"&host=").concat(o))}))}().then((function(t){var n;if("WebSocket"in window)n=new WebSocket(t);else{if(!("MozWebSocket"in window))return void alert("WebSocket is not available");n=new MozWebSocket(t)}e.llmWS=n,n.onopen=function(t){e.webSocketSend()},n.onmessage=function(t){"init"!==e.state&&e.result(t.data)},n.onerror=function(n){clearTimeout(e.playTimeout),e.setStatus("error"),console.error("Error：".concat(encodeURI(t.replace("wss:","https:"))))},n.onclose=function(e){}}))}},{key:"webSocketSend",value:function(){var e,t,n=null!==(e=this.contexts)&&void 0!==e?e:[],i={header:{app_id:this.appId,uid:"fd3f47e4-d"},parameter:{chat:{domain:us,temperature:.8,max_tokens:256}},payload:{message:{text:[this.role].concat(at(n),[{role:"user",content:null!==(t=this.text)&&void 0!==t?t:""}])}}};this.llmWS.send(JSON.stringify(i))}},{key:"ask",value:function(e,t){this.text=e,t?this.contexts=t:this.contexts.push({role:"user",content:e})}},{key:"clearContexts",value:function(){this.contexts=[]}},{key:"setRole",value:function(e){e&&(this.role={role:"system",content:e})}},{key:"clearRole",value:function(){this.role={}}},{key:"start",value:function(){vs="",this.answers=[],this.setStatus("answering"),this.connectWebSocket()}},{key:"stop",value:function(){this.setStatus("init"),this.llmWS&&this.llmWS.close(),this.answer=null,this.phase="",this.answers=[]}},{key:"filter",value:function(e){var t="["+ps.join("")+"]",n=new RegExp([t],"gi");return e.replace(n,"")}},{key:"result",value:function(e){this.answer="";for(var t=JSON.parse(e),n=t.payload.choices.text,i=0;i<n.length;i++){var r=n[i];this.answer+=r.content}this.answer;for(var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cn";return Array.from(new Intl.Segmenter(t,{granularity:"word"}).segment(e))}(this.answer),a=0;a<o.length;a++){var s=o[a],l=s.segment;this.phase+=l,this.phase=this.filter(this.phase),this.phase&&ms.includes(s.segment)&&(this.answers.push(this.phase),this.speaker.addExpression(new oo(this.phase)),this.onAnswering({name:"AI",text:this.phase}),this.phase="")}vs+=this.answer,0===t.header.code?0===t.header.code&&2===t.header.status&&(this.onAnswered({name:"AI",text:vs}),this.llmWS.close(),this.setStatus("init")):console.error("".concat(t.header.code,":").concat(t.header.message))}},{key:"isFree",value:function(){return"init"===this.status&&this.answers.length<=0}}])}(),bs=function(e){function t(e,n){var i;return Ye(this,t),(i=Xe(this,t,[e,n])).text="",i.speaker=null,i.acl={limit:3,timeout:10},i}return tt(t,wr),Qe(t,[{key:"setStatus",value:function(e){this.state=e}},{key:"setParams",value:function(e){var t=e.text,n=e.voice,i=e.role,r=void 0===i?"Girl":i,o=e.style,a=void 0===o?"chat":o,s=e.styledegree,l=void 0===s?1:s;this.text=t,this.voice=n,this.role=r,this.style=a,this.styledegree=l}},{key:"getLipSync",value:function(e,t){var n=this,i=[],r=1/60,o=0,a=e.d,s=e.f;s=ss.AES.decrypt(s,"techbrood").toString(ss.enc.Utf8),a.forEach((function(e){var t=ss.AES.decrypt(e,"techbrood");JSON.parse(t.toString(ss.enc.Utf8)).BlendShapes.forEach((function(e){for(var t={},n=0;n<no.length;n++){t[no[n]]=e[n]}i.push({time:o,blendshapes:t}),o+=r}))}));var l=Mi.axure.host+s,u=new Audio(l);u.addEventListener("loadeddata",Ve(it().mark((function e(){var r;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.speaker&&(r=n.speaker.getExpression(t))&&(Date.now(),r.lipsync={source:"axure",audio:u,sheet:i}),n.setStatus("init");case 2:case"end":return e.stop()}}),e)}))))}},{key:"start",value:function(){var e,t=this;if(this.text){var n=this.text,i=null!==(e=this.voice)&&void 0!==e?e:"zh-CN-XiaoyiNeural",r=this.role||"Girl",o=this.style||"chat",a=this.styledegree||1;this.setStatus("ttsing");var s=Mi.axure.host+"/talk",l={text:n,voice:i,role:r,style:o,styledegree:a},u={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({s:ss.AES.encrypt(JSON.stringify(l),"techbrood").toString()})};fetch(s,u).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){Date.now(),t.getLipSync(e,n)})).catch((function(e){console.error("Error:",e)}))}}},{key:"stop",value:function(){this.setStatus("init"),this.text="",this.speaker=null}},{key:"update",value:function(){}}])}(),Ss={rt:{},stage:{},memo:{},manager:new Qi,systems:[],init:function(e,t,n,i){var r,o;(n=null!==(r=n)&&void 0!==r?r:{}).scene?ht.useInnerScene=!1:ht.useInnerScene=!0,ht.useInnerMorph=null===(o=n.useInnerMorph)||void 0===o||o,new qi(e,t,n).init((function(){Ss.initEntities(n),Ss.initSystems(n),ht.useInnerScene&&_i(),i&&i()}))},update:function(e){Ss.manager.update(e),Ss.systems.forEach((function(t){return t.update(e)}))},initSystems:function(){Ss.systems.push(new ys("llm")),Ss.systems.push(new bs("tts"))},initEntities:function(e){var t=new Yi("stage",e);if(Ss.manager.add(t),ht.useInnerScene){var n=new Nr("expo",e);Ss.manager.add(n)}var i=new Wr("mmo",e);Ss.manager.add(i);var r=new bo("spawner",e);Ss.manager.add(r)},getEntity:function(e){return Ss.manager.get(e)},getSystem:function(e){return Ss.systems.find((function(t){return t.name===e}))},spawn:function(e,t){var n=null,i=Ss.getEntity("spawner");if(i){var r=i.getComponent("AiSpawner");r&&(n=r.spawn(e,t))}return n},wait:function(){ht.stage.renderer.domElement.style.cursor="wait"},ready:function(){ht.stage.renderer.domElement.style.cursor="default"},toJSON:function(){var e={};return e.stage=ht.stage.toJSON(),e},fromJSON:function(e,t){t.fromJSON(e.stage)},dispose:function(){}};(gs=window).global||(gs.global=window),"undefined"!=typeof window&&(window.__MYAVATAR__?console.warn("WARNING: Multiple instances of myavatar.js being imported."):window.__MYAVATAR__="0.1.0");export{Ss as MyAvatar};
